(this["webpackJsonpfeinstaub-app-web"]=this["webpackJsonpfeinstaub-app-web"]||[]).push([[0],{429:function(e,t,a){e.exports=a(821)},434:function(e,t,a){},821:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(15),o=a.n(i),r=(a(434),a(4)),l=a(881),d=a(191),c=a(91),h=a(907),p=a(884),m=a(882),u=a(883),_=a(828),g=a(106),v=a(916),b=(a(263),a(912)),C=(a(909),a(382),a(875));a(376),a(253);var f=a(377),E=new(a.n(f).a)({en:{app_name:"Particulate Matter App",action_successful:"Action completed successfully",sensor_added_successfully:"Sensor added successfully!",error_please_try_again:"Error! Please try again.",sensor_favourized:"Sensor favourized successfully!",favourization_failed_try_again:"Favourization failed! Please try again.",changings_saved:"Changings saved successfully!",changings_save_failed:"The changings could not be saved! Please try again.",sensor_removed_successfully:"Removed sensor successfully!",sensor_removal_failed:"Sensor removal failed! Please try again.",add_sensor:"Add sensor",unknown_sensor:"Unknown sensor",sensors:"sensors",our_homepage:"Our homepage",download_android_app:"Download Android app",info:"Info",add_sensor_to_favourites:"Add sensor to favourites",display_name:"Display name",chip_id:"Chip id",cancel:"Cancel",ok:"OK",save:"Save",back:"Back",next:"Next",skip:"Skip",add_favourite:"Add favourite",error_add_sensor:"You entered a wrong chip id or the option 'Feinstaub-App' in the APIs category is not enabled in the configuration of your sensor. After it is enabled, it can last up to 10 minutes until our server receives data from the sensor.",enter_chip_id:"Enter chip id",enter_chip_id_instruction_1:"Please enter the chip id of your sensor below. You can find the id in the configuration of your sensor. If you still not find the chip id, you can check out the entry on our",enter_chip_id_instruction_2:".",faq_site:"FAQ site",enter_base_data:"Enter general data",display_name_color_instruction:"Please choose a display name and a color for sensor within the diagrams",add_sensor_to_map:"Add sensor to the map",add_sensor_to_map_instruction_1:"To add your sensor to the map, you have to enter the exact location and the mounting height of the sensor <b>over the ground </b>.<br><b>HINT:</b> This values only can be changed afterwards, if you",add_sensor_to_map_instruction_2:".",contact:"Send us an email",soon_available:"Available soon",latitude:"Latitude",longitude:"Longitude",mounting_height:"Mounting height (meters)",choose_location:"Choose location of sensor",edit_sensor:"Edit sensor",remove_sensor:"Remove sensor",remove_sensor_message_1:"Do you really want to remove the sensor with the chip id",remove_sensor_message_2:"? You could link it again at any time.",remove:"Remove",pm1:"PM10",pm2:"PM2.5",temperature:"Temperature",humidity:"Humidity",pressure:"Pressure",show_sensor_details:"Show sensor details",show_details:"Show details",close_window:"Close window",day_before:"Day before",day_after:"Day after",choose_another_date:"Choose another date",diagram:"Diagram",data_records:"Data records",time_of_day:"Time",measurement:"Measurement",show_pm1:"Show PM10 curve",show_pm2:"Show PM2.5 curve",show_temperature:"Show temperature curve",show_humidity:"Show humidity curve",show_pressure:"Show pressure curve",show_time:"Show measurement time",hide_dots:"Hide dots",enable_soft_curve:"Enable soft curve",enable_curve_smoothing:"Enable curve smoothing",zoom_of_diagram_:"Zoom of the diagram:",no_data:"No data existing",loading:"Loading ...",sensor_details:"Sensor details",public:"Public",firmware_version:"Firmware version",online_since:"Online since",link_with_android_app:"Link with android app",link_instruction_1:"To synchronize your sensors and your favourites,",link_instruction_2:"start the Particulate Matter App.",link_instruction_3:"Three dots at the top right corner \u2192 'Web version'.",link_instruction_4:"Scan the qr code above.",show_measurements:"Show measurements",properties:"Properties",no_favourites:"No favourites existing yet. To add a favourite, click on a sensor on the map and select 'Add favourite'.",no_own_sensors_1:"If you have an particulate matter sensor from",no_own_sensors_2:", you can link it here. Click on the '+' button in the bottom right corner on the page.",favourites:"My favourites",own_sensors:"Own sensors",loading_address:"Loading address ...",unknown_country:"Unknown country",unknown_city:"Unknown city",delete:"Delete",previous_page:"Previous page",next_page:"Next page",search_location:"Search location ...",is_this_the_right_place:"Is this the right place? If not, please try to switch the coordinats."},de:{app_name:"Feinstaub-App",action_successful:"Die Aktion war erfolgreich!",sensor_added_successfully:"Sensor erfolgreich hinzugef\xfcgt!",error_please_try_again:"Fehler! Bitte versuchen Sie es erneut.",sensor_favourized:"Der Sensor wurde favorisiert!",favourization_failed_try_again:"Favorisieren fehlgeschlagen! Bitte versuchen Sie es erneut.",changings_saved:"\xc4nderungen erfolgreich gespeichert!",changings_save_failed:"Die \xc4nderungen konnten nicht gespeichert werden! Bitte versuchen Sie es erneut.",sensor_removed_successfully:"Sensor erfolgreich entfernt!",sensor_removal_failed:"Entfernen fehlgeschlagen! Bitte versuchen Sie es erneut.",add_sensor:"Sensor hinzuf\xfcgen",unknown_sensor:"Unbekannter Sensor",sensors:"Sensoren",our_homepage:"Unsere Homepage",download_android_app:"Android-App herunterladen",info:"Info",add_sensor_to_favourites:"Sensor zu Favoriten hinzuf\xfcgen",display_name:"Anzeigename",chip_id:"Chip-ID",cancel:"Abbrechen",ok:"OK",save:"Speichern",back:"Zur\xfcck",next:"Weiter",skip:"\xdcberspringen",add_favourite:"Favorit hinzuf\xfcgen",error_add_sensor:"Sie haben entweder die falsche Chip-ID angegeben oder in der Konfiguration Ihres Sensors ist die Option 'Feinstaub-App' unter APIs nicht aktiviert. Nachdem die Option aktiviert ist, kann es bis zu 10 Minuten dauern, bis Daten auf dem Server ankommen.",enter_chip_id:"Chip-ID angeben",enter_chip_id_instruction_1:"Bitte geben Sie die Chip-ID Ihres Sensors in das Feld unten ein. Sie finden die ID in der Konfiguration Ihres Sensors. Falls Sie die Chip-ID dennoch nicht finden sollten, finden Sie auf unserer",enter_chip_id_instruction_2:"einen Eintrag",faq_site:"FAQ-Seite",enter_base_data:"Basisdaten angeben",display_name_color_instruction:"Bitte vergeben Sie f\xfcr Ihren Sensor einen Anzeigenamen und bestimmen Sie eine Farbe f\xfcr den Sensor innerhalb der Diagramme.",add_sensor_to_map:"Sensor auf die Karte bringen",add_sensor_to_map_instruction_1:"Um Ihren Sensor auf die Karte zu bekommen, m\xfcssen Sie die genaue Position des Sensors und die Montageh\xf6he \xfcber dem Boden angeben.\nHINWEIS: Diese Daten k\xf6nnen sp\xe4ter nur noch ge\xe4ndert werden, indem Sie per E-Mail mit uns in",add_sensor_to_map_instruction_2:"treten.",contact:"Kontakt",soon_available:"Bald verf\xfcgbar",latitude:"L\xe4ngengrad",longitude:"Breitengrad",mounting_height:"Montageh\xf6he (Meter)",choose_location:"Position des Sensors w\xe4hlen",edit_sensor:"Sensor bearbeiten",remove_sensor:"Sensor entfernen",remove_sensor_message_1:"Wollen Sie den Sensor mit der Chip-ID",remove_sensor_message_2:"wirklich entfernen? Sie k\xf6nnen ihn jederzeit wieder verkn\xfcpfen.",remove:"Entfernen",pm1:"PM10",pm2:"PM2,5",temperature:"Temperatur",humidity:"Luftfeuchtigkeit",pressure:"Luftdruck",show_sensor_details:"Sensordetails anzeigen",show_details:"Details anzeigen",close_window:"Fenster schlie\xdfen",day_before:"Tag davor",day_after:"Tag danach",choose_another_date:"Anderes Datum w\xe4hlen",diagram:"Diagramm",data_records:"Datens\xe4tze",time_of_day:"Uhrzeit",measurement:"Messwert",show_pm1:"PM10-Kurve anzeigen",show_pm2:"PM2,5-Kurve anzeigen",show_temperature:"Temperatur-Kurve anzeigen",show_humidity:"Luftfeuchtigkeit-Kurve anzeigen",show_pressure:"Luftdruck-Kurve anzeigen",show_time:"Messzeiten einblenden",hide_dots:"Punkte ausblenden",enable_soft_curve:"Weiche Kurve aktivieren",enable_curve_smoothing:"Kurvengl\xe4ttung aktivieren",zoom_of_diagram_:"Zoom des Diagrammes:",no_data:"Keine Daten vorhanden",loading:"Laden ...",sensor_details:"Sensor Details",public:"\xd6ffentlich",firmware_version:"Firmware Version",online_since:"Online seit",link_with_android_app:"Mit der Android-App verkn\xfcpfen",link_instruction_1:"Um Ihre Sensoren und Ihre Favoriten aus der App",link_instruction_2:"hier anzuzeigen, starten Sie die Feinstaub-App.",link_instruction_3:"Drei Punkte oben rechts \u2192 'Web-Version'.",link_instruction_4:"Scannen Sie den obigen QR-Code.",show_measurements:"Messwerte anzeigen",properties:"Eigenschaften",no_favourites:"Noch keine Favoriten vorhanden. Um Favoriten hinzuzuf\xfcgen, tippen Sie auf der Karte auf einen Sensor und w\xe4hlen Sie 'Favorit hinzuf\xfcgen'.",no_own_sensors_1:"Falls Sie einen eigenen Feinstaubsensor von",no_own_sensors_2:"haben, k\xf6nnen Sie ihn hier verkn\xfcpfen. Klicken Sie auf den '+'-Button ganz unten rechts auf der Seite.",favourites:"Meine Favoriten",own_sensors:"Meine Sensoren",loading_address:"Adresse wird geladen ...",unknown_country:"Unbekanntes Land",unknown_city:"Unbekannte Stadt",delete:"L\xf6schen",previous_page:"Vorherige Seite",next_page:"N\xe4chste Seite",search_location:"Ort suchen ...",is_this_the_right_place:"Ist dies der korrekte Standort? Falls nicht, versuchen Sie die Koordinaten zu vertauschen."},fr:{app_name:"App Mati\xe8re Particulaire",action_successful:"Action termin\xe9e avec succ\xe8s",sensor_added_successfully:"Capteur ajout\xe9 avec succ\xe8s!",error_please_try_again:"Erreur! Veuillez r\xe9essayer.",sensor_favourized:"Capteur favoris\xe9 avec succ\xe8s!",favourization_failed_try_again:"La favorisation a \xe9chou\xe9! Veuillez r\xe9essayer.",changings_saved:"Les modifications ont \xe9t\xe9 enregistr\xe9es avec succ\xe8s!",changings_save_failed:"Les modifications n'ont pas pu \xeatre enregistr\xe9es! Veuillez r\xe9essayer.",sensor_removed_successfully:"Capteur supprim\xe9 avec succ\xe8s!",sensor_removal_failed:"Le retrait du capteur a \xe9chou\xe9! Veuillez r\xe9essayer.",add_sensor:"Ajouter un capteur",unknown_sensor:"Capteur inconnu",sensors:"capteurs",our_homepage:"Notre page d'accueil",download_android_app:"T\xe9l\xe9chargez l'application Android",info:"Info",add_sensor_to_favourites:"Ajouter le capteur aux favoris",display_name:"Nom d'affichage",chip_id:"Chip ID",cancel:"Annuler",ok:"OK",save:"Sauver",back:"Retour",next:"Prochain",skip:"Sauter",add_favourite:"Ajouter un favori",error_add_sensor:"Vous avez ins\xe9r\xe9 un mauvaise Puce-ID ou l'option 'Feinstaub-App' dans la cat\xe9gorie des APIs n'est pas activ\xe9e dans la configuration de votre capteur. Une fois activ\xe9, il peut durer jusqu'\xe0 10 minutes jusqu'\xe0 ce que notre serveur re\xe7oive des donn\xe9es du capteur.",enter_chip_id:"Entrez Puce-ID",enter_chip_id_instruction_1:"Veuillez ins\xe9rer la Puce-ID de puce de votre capteur ci-dessous. Vous pouvez trouver la Puce-ID dans la configuration de votre capteur. Si vous ne trouvez toujours pas l'identifiant de la puce, vous pouvez consulter l'entr\xe9e sur notre",enter_chip_id_instruction_2:".",faq_site:"site de FAQ",enter_base_data:"Enter general data",display_name_color_instruction:"Veuillez choisir un nom d'affichage et une couleur pour le capteur et dans les diagrammes",add_sensor_to_map:"Ajouter un capteur \xe0 la carte",add_sensor_to_map_instruction_1:"Pour ajouter votre capteur \xe0 la carte, vous devez entrer l'emplacement exact et la hauteur de montage du capteur <b>sur le sol. </b>.<br><b>ALLUSION:</b> Ces valeurs ne peuvent \xeatre modifi\xe9es qu'apr\xe8s, si vous",add_sensor_to_map_instruction_2:".",contact:"Envoyez-nous un e-mail",soon_available:"Bient\xf4t disponible",latitude:"Latitude",longitude:"Longitude",mounting_height:"Hauteur de montage (m\xe8tres)",choose_location:"Choisissez l'emplacement du capteur",edit_sensor:"Modifier le capteur",remove_sensor:"Retirer le capteur",remove_sensor_message_1:"Voulez-vous vraiment retirer le capteur avec la Puce-ID",remove_sensor_message_2:"? Vous pouvez le lier \xe0 nouveau \xe0 tout moment.",remove:"Retirer",pm1:"PM10",pm2:"PM2.5",temperature:"Temp\xe9rature",humidity:"Humidit\xe9",pressure:"Pression",show_sensor_details:"Afficher les d\xe9tails du capteur",show_details:"Afficher les d\xe9tails",close_window:"Fermez le cadre",day_before:"Jour pr\xe9c\xe9dent",day_after:"Jour suivant",choose_another_date:"Choisissez une autre date",diagram:"Diagramme",data_records:"Enregistrements de donn\xe9es",time_of_day:"Temps",measurement:"La mesure",show_pm1:"Afficher la courbe de PM10",show_pm2:"Afficher la courbe de PM2,5",show_temperature:"Afficher la courbe de temp\xe9rature",show_humidity:"Afficher la courbe d'humidit\xe9",show_pressure:"Afficher la courbe de pression",show_time:"Afficher le temps de mesure",hide_dots:"Cacher les points",enable_soft_curve:"Activer la courbe douce",enable_curve_smoothing:"Activer le lissage de courbe",zoom_of_diagram_:"Zoom sur le diagramme:",no_data:"Aucune donn\xe9e existante",loading:"Chargement ...",sensor_details:"D\xe9tails du capteur",public:"Public",firmware_version:"Version du firmware",online_since:"En ligne depuis",link_with_android_app:"Lien avec l'application Android",link_instruction_1:"Pour synchroniser vos capteurs et vos favoris,",link_instruction_2:"d\xe9marrez l'App Mati\xe8re Particulaire.",link_instruction_3:"Trois points dans le coin sup\xe9rieur droit \u2192'Version Web'.",link_instruction_4:"Scannez le code QR ci-dessus.",show_measurements:"Afficher les mesures",properties:"Propri\xe9t\xe9s",no_favourites:"Aucun favori n'existe encore. Pour ajouter un favori, cliquez sur un capteur sur la carte et s\xe9lectionnez 'Ajouter un favori'.",no_own_sensors_1:"Si vous avez un capteur de mati\xe8re particulaire",no_own_sensors_2:", vous pouvez le lier ici. Cliquez sur le bouton '+' dans le coin inf\xe9rieur droit de la page.",favourites:"Mes favoris",own_sensors:"Propres capteurs",loading_address:"Adresse en chargement ...",unknown_country:"Pays inconnu",unknown_city:"Ville inconnue",delete:"Supprimer",previous_page:"Page pr\xe9c\xe9dente",next_page:"Page suivante",search_location:"Rechercher un lieu ...",is_this_the_right_place:"Est-ce le bon endroit? Sinon, essayez de changer les coordonn\xe9es."}}),y=a(53),k=a.n(y);Object(C.a)(e=>({icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)},input:{padding:10,paddingLeft:50,transition:e.transitions.create("width"),width:"100%"}}));class w extends n.Component{render(){const e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(m.a,{position:"static"},s.a.createElement(u.a,null,s.a.createElement(_.a,{href:"#",className:e.menuButton,color:"inherit","aria-label":E.app_name},s.a.createElement(v.a,{alt:E.app_name,src:"../favicon.ico",className:e.avatar})),s.a.createElement(c.a,{className:e.title,variant:"h6",color:"inherit",noWrap:!0},E.app_name))))}}var S=Object(r.a)(e=>({root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(g.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(g.fade)(e.palette.common.white,.25)},width:"100%",[e.breakpoints.up("sm")]:{marginLeft:10,width:"auto"}},searchIcon:{width:50,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}))(w),D=a(138),x=a(111),P=a.n(x),A=a(383),M=a.n(A);class z extends n.Component{constructor(e){super(e),this.state={markers:[],old_markerData:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{},selectedAddress:"",selectedMarkerLat:0,selectedMarkerLng:0,old_favourites:[],old_own_sensors:[]},this.onMarkerClick=(e,t,a)=>{let n=this;P.a.setApiKey("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc"),P.a.fromLatLng(t.position.lat(),t.position.lng()).then(e=>{var t=n.getCountry(e.results[0].address_components),a=n.getCity(e.results[0].address_components);this.setState({selectedAddress:t+", "+a,country:t,city:a})},e=>{console.error(e)}),this.setState({selectedPlace:e,activeMarker:t,selectedMarkerLat:Math.round(1e3*t.position.lat())/1e3,selectedMarkerLng:Math.round(1e3*t.position.lng())/1e3,selectedAddress:E.loading_address,showingInfoWindow:!0})},this.getCountry=e=>{for(var t=0;t<e.length;t++){if("country"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return E.unknown_country},this.getCity=e=>{for(var t=0;t<e.length;t++){if("locality"===e[t].types[0]||"postal_town"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return E.unknown_city},this.onMapClicked=e=>{this.state.showingInfoWindow&&this.setState({showingInfoWindow:!1,activeMarker:null})},this.onShowSensorDataClicked=()=>{var e={chip_id:this.state.activeMarker.name,name:this.state.selectedAddress,color:"#000000",fav:!1};this.props.onShowSensorData(e)},this.onAddFavouriteClicked=()=>{this.props.onAddFavourite(this.state.activeMarker.name)},this.showDetails=()=>{var e={chip_id:this.state.selectedPlace.name,name:this.state.selectedAddress};this.props.onOpenDetails(e)}}onInfoWindowOpen(e,t){const a=s.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:this.onShowSensorDataClicked,style:{marginTop:5,width:210}},E.show_measurements);o.a.render(s.a.Children.only(a),document.getElementById("show_data"));const n=s.a.createElement(_.a,{"aria-label":"info",onClick:this.showDetails},s.a.createElement(M.a,{color:"primary"}));if(o.a.render(s.a.Children.only(n),document.getElementById("sensor_info")),this.props.logged_in){const e=s.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.onAddFavouriteClicked,style:{marginTop:5,width:210}},E.add_favourite);o.a.render(s.a.Children.only(e),document.getElementById("add_favourite"))}}render(){if(this.props.markerData!==this.state.old_markerData||this.props.favourites.length!==this.state.old_favourites.length||this.props.own_sensors.length!==this.state.old_own_sensors.length){var e=this.props.markerData.map(e=>{var t="markers/blue.png";if(this.props.favourites.map(a=>(a.chip_id===e.i&&(t="markers/red.png"),!0)),this.props.own_sensors.map(a=>(a.chip_id===e.i&&(t="markers/green.png"),!0)),0!=e.l||0!=e.b)return s.a.createElement(D.Marker,{key:e.i,icon:{url:t},title:e.i,name:e.i,onClick:this.onMarkerClick,position:{lat:e.l,lng:e.b}})});this.setState({markers:e,old_markerData:this.props.markerData,old_favourites:this.props.favourites,old_own_sensors:this.props.own_sensors})}return s.a.createElement(D.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:7,initialCenter:{lat:this.props.ownPosition.lat,lng:this.props.ownPosition.lng}},this.state.markers,s.a.createElement(D.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onOpen:e=>{this.onInfoWindowOpen(this.props,e)}},s.a.createElement(d.a,{elevation:1,style:{width:210}},s.a.createElement("div",null,s.a.createElement(l.a,{container:!0},s.a.createElement(l.a,{item:!0,xs:3},s.a.createElement(v.a,null,s.a.createElement(ee,null))),s.a.createElement(l.a,{item:!0,xs:9},s.a.createElement(c.a,{variant:"body2",noWrap:!0},this.state.selectedPlace.name),s.a.createElement(c.a,{noWrap:!0},s.a.createElement("i",null,this.state.selectedMarkerLat,", ",this.state.selectedMarkerLng)))),s.a.createElement("div",{id:"sensor_info",style:{position:"absolute",right:15,top:5,width:45,height:45}}),s.a.createElement(c.a,null,this.state.selectedAddress),s.a.createElement("div",{id:"show_data",style:{height:50}}),this.props.logged_in&&s.a.createElement("div",{id:"add_favourite",style:{height:50}})))))}}var T=Object(D.GoogleApiWrapper)({apiKey:"AIzaSyDs145s6rNrM2_yEhWs27gd4Q9RHbh4WSY",language:"de"})(z),I=a(910),L=a(887),H=a(880),F=a(829),B=a(885),O=a(405),V=a(886),N=a(185),R=a.n(N),W=a(385),j=a.n(W),K=a(256),Z=a.n(K),q=a(384),U=a.n(q),Y=a(112);const Q="undefined"!==typeof InstallTrigger;function J({children:e,dir:t}){return s.a.createElement(c.a,{component:"div",dir:t},e)}class G extends n.Component{constructor(...e){super(...e),this.state={sync_key:this.props.sync_key,favourites:this.props.favourites,own_sensors:this.props.own_sensors,clicked:void 0,anchorEl:null,page:0},this.handlePageChange=(e,t)=>{this.setState({page:t})},this.handleMenuClick=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.setState({clicked:t,anchorEl:e.currentTarget})},this.handleMenuClose=(e,t)=>{0===e?this.setState({clicked:void 0,anchorEl:null}):1===e?(this.props.onShowSensorData(t),this.setState({clicked:void 0,anchorEl:null})):2===e?(this.props.onEditSensor(t),this.setState({clicked:void 0,anchorEl:null})):3===e?(this.props.onRemoveSensor(t.chip_id),this.setState({clicked:void 0,anchorEl:null})):4===e&&(this.props.onSensorDetails(t),this.setState({clicked:void 0,anchorEl:null}))}}render(){const e=this.props,t=e.classes,a=e.theme;return s.a.createElement("div",{style:{height:"100%"}},!1===this.props.logged_in&&s.a.createElement(Y.Scrollbars,null,s.a.createElement("div",{className:t.container},s.a.createElement(v.a,{className:t.qr_container},s.a.createElement("div",{style:{backgroundColor:"#FFF",padding:10,borderRadius:10}},s.a.createElement(U.a,{value:this.state.sync_key,size:210,logo:"https://h2801469.stratoserver.net/qr_icon.png",logoWidth:70}))),s.a.createElement(c.a,{variant:"h6",style:Q?{position:"absolute",marginTop:450,color:"#3F51B5"}:{position:"absolute",marginTop:230,color:"#3F51B5"},gutterBottom:!0},s.a.createElement("b",null,E.link_with_android_app)),s.a.createElement(c.a,{variant:"subtitle1",style:Q?{position:"absolute",marginTop:560,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:290,color:"#666",textAlign:"center"},gutterBottom:!0},E.link_instruction_1,s.a.createElement("br",null),E.link_instruction_2),s.a.createElement(c.a,{variant:"subtitle1",style:Q?{position:"absolute",marginTop:690,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:360,color:"#666",textAlign:"center"},gutterBottom:!0},s.a.createElement("i",{style:{color:"#3F51B5"}},E.link_instruction_3)),s.a.createElement(c.a,{variant:"subtitle1",style:Q?{position:"absolute",marginTop:800,color:"#666",textAlign:"center",marginBottom:30}:{position:"absolute",marginTop:415,color:"#666",textAlign:"center",marginBottom:30},gutterBottom:!0},E.link_instruction_4))),this.props.logged_in&&s.a.createElement("div",{style:{height:"calc(100% - 8px)"}},s.a.createElement(Y.Scrollbars,{style:{height:"calc(100% - 64px)"}},s.a.createElement(R.a,{axis:"x",index:this.state.page,onChangeIndex:this.handlePageChange,animateHeight:!0},s.a.createElement(J,{style:{overflow:"auto"},dir:a.direction},this.props.favourites.length>0&&s.a.createElement(H.a,{style:{overflow:"auto"}},this.props.favourites.map(e=>s.a.createElement("div",{key:e.chip_id},s.a.createElement(F.a,{button:!0,onClick:()=>this.props.onShowSensorData(e)},s.a.createElement(v.a,{style:{backgroundColor:e.color,marginRight:15}},s.a.createElement(ee,null)),s.a.createElement(B.a,{primary:e.name,secondary:e.chip_id}),s.a.createElement(_.a,{"aria-label":"Weitere Optionen",onClick:t=>this.handleMenuClick(t,e.chip_id),style:{zIndex:"3"},"aria-haspopup":"true"},s.a.createElement(Z.a,null))),void 0!==this.state.clicked&&s.a.createElement(O.a,{anchorEl:this.state.anchorEl,open:this.state.clicked===e.chip_id,onClose:()=>this.handleMenuClose(0,e)},s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(1,e)},E.show_measurements),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(2,e)},E.edit_sensor),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(3,e)},E.remove_sensor),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(4,e)},E.properties))),this)),0===this.props.favourites.length&&s.a.createElement(n.Fragment,null,s.a.createElement(v.a,{src:"/images/star_impossible.png",style:{width:250,height:250,marginLeft:60,marginTop:50,padding:15}}),s.a.createElement(c.a,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:40,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},s.a.createElement("b",null,E.no_favourites)))),s.a.createElement(J,{style:{overflow:"auto"},dir:a.direction},this.props.own_sensors.length>0&&s.a.createElement(H.a,{style:{overflow:"auto"}},this.props.own_sensors.map(e=>s.a.createElement("div",{key:e.chip_id},s.a.createElement(F.a,{button:!0,onClick:()=>this.props.onShowSensorData(e)},s.a.createElement(v.a,{style:{backgroundColor:e.color,marginRight:15}},s.a.createElement(ee,null)),s.a.createElement(B.a,{primary:e.name,secondary:e.chip_id}),s.a.createElement(_.a,{"aria-label":"Weitere Optionen",onClick:t=>this.handleMenuClick(t,e.chip_id),style:{zIndex:"3"},"aria-haspopup":"true"},s.a.createElement(Z.a,null))),void 0!==this.state.clicked&&s.a.createElement(O.a,{anchorEl:this.state.anchorEl,open:this.state.clicked===e.chip_id,onClose:()=>this.handleMenuClose(0,e)},s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(1,e)},E.show_measurements),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(2,e)},E.edit_sensor),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(3,e)},E.remove_sensor),s.a.createElement(V.a,{onClick:()=>this.handleMenuClose(4,e)},E.properties))),this)),0===this.props.own_sensors.length&&s.a.createElement(n.Fragment,null,s.a.createElement(v.a,{src:"/images/sensor_large.png",style:{width:200,height:200,marginLeft:85,marginTop:75,padding:15}}),s.a.createElement(c.a,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:65,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},s.a.createElement("b",null,E.no_own_sensors_1," ",s.a.createElement("a",{href:"https://luftdaten.info/feinstaubsensor-bauen/",target:"blank"},"www.luftdaten.info"),E.no_own_sensors_2)))))),s.a.createElement(I.a,{value:this.state.page,onChange:this.handlePageChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},s.a.createElement(L.a,{icon:s.a.createElement(j.a,null),label:E.favourites}),s.a.createElement(L.a,{icon:s.a.createElement(ee,null),label:E.own_sensors}))))}}var X=Object(r.a)(e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},qr_container:{width:330,height:330,marginTop:40,backgroundColor:"#3F51B5"}}),{withTheme:!0})(G),$=a(182),ee=class extends n.Component{render(){return s.a.createElement($.a,null,s.a.createElement("path",{d:"M22,9L22,7h-2L20,5c0,-1.1 -0.9,-2 -2,-2L4,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2v-2h2v-2h-2v-2h2v-2h-2L20,9h2zM18,19L4,19L4,5h14v14zM6,13h5v4L6,17zM12,7h4v3h-4zM6,7h5v5L6,12zM12,11h4v6h-4z"}))}},te=a(915),ae=a(889),ne=a(888),se=a(919),ie=a(890),oe=a(914),re=a(917),le=a(891),de=a(892),ce=a(107),he=a(133),pe=a.n(he),me=a(254),ue=a.n(me),_e=(a(647),ue.a.initializeApp({apiKey:"AIzaSyBcaCFA3uJQ7WrjRflWoIdQFhuFmqBEmcI",authDomain:"feinstaub-app-web.firebaseapp.com",databaseURL:"https://feinstaub-app-web.firebaseio.com",projectId:"feinstaub-app-web",storageBucket:"feinstaub-app-web.appspot.com",messagingSenderId:"985064412726"}));const ge="https://h2801469.stratoserver.net/backend_web_v100.php";class ve extends s.a.Component{constructor(...e){super(...e),this.state={active_step:1,chip_id:"",next_disabled:!0,loading:!1,chip_id_error:!1,error_desc:"",sensor_name:"",color:"",lat:"",lng:"",alt:"",location_picker_open:!1},this.handleNext=e=>{if(1===e){this.setState({loading:!0});let e=this;k.a.post(ge).set("Content-Type","application/x-www-form-urlencoded").send({command:"issensordataexisting",chip_id:this.state.chip_id}).end((function(t,a){"true"===a.text.trim()?e.setState({loading:!1,active_step:2,next_disabled:!0}):e.setState({loading:!1,chip_id_error:!0,next_disabled:!0,error_desc:E.error_add_sensor})}))}else 3===e?this.addSensor():this.setState({active_step:this.state.active_step+1,next_disabled:!0})},this.handleBack=()=>{this.setState({active_step:this.state.active_step-1})},this.chipIDChange=e=>{var t=0===e.target.value.length;this.setState({chip_id:e.target.value,chip_id_error:!1,error_desc:"",next_disabled:t})},this.nameChange=e=>{var t=0===e.target.value.length||""===this.state.color;this.setState({sensor_name:e.target.value,next_disabled:t})},this.colorChange=(e,t)=>{var a=0===this.state.sensor_name.length;this.setState({color:e.hex,next_disabled:a})},this.chooseLocation=()=>{this.setState({location_picker_open:!0})},this.locationChange=(e,t)=>{console.log(t),console.log(e),this.setState({location_picker_open:!1})},this.latChanged=e=>{var t=0===e.target.value.length||0===this.state.lng.length||0===this.state.alt.length;e.target.value.length>0&&this.state.lng.length>0&&this.checkPlace(),this.setState({lat:e.target.value,next_disabled:t})},this.lngChanged=e=>{var t=0===this.state.lat.length||0===e.target.value.length||0===this.state.alt.length;e.target.value.length>0&&this.state.lat.length>0&&this.checkPlace(),this.setState({lng:e.target.value,next_disabled:t})},this.altChanged=e=>{var t=0===this.state.lat.length||0===this.state.lng.length||0===e.target.value.length;this.state.lat.length>0&&this.state.lng.length>0&&this.checkPlace(),this.setState({alt:e.target.value,next_disabled:t})},this.addSensor=()=>{if(this.setState({loading:!0}),this.props.logged_in){var e=Math.floor(Date.now()),t=this.props.user_data;t.push({chip_id:this.state.chip_id,color:this.state.color,fav:!1,name:this.state.sensor_name});var a={time:e,device:"web",data:t};_e.database().ref("sync/"+this.props.sync_key).set(a)}let n=this;k.a.post(ge).set("Content-Type","application/x-www-form-urlencoded").send({command:"addsensor",chip_id:this.state.chip_id,lat:this.state.lat,lng:this.state.lng,alt:this.state.alt}).end((function(e,t){var a=t.text.trim();0===a&&(a=2),n.props.onClose(parseInt(a))}))},this.addSensorPrivate=()=>{this.setState({loading:!0});var e=Math.floor(Date.now()),t=this.props.user_data;t.push({chip_id:this.state.chip_id,color:this.state.color,fav:!1,name:this.state.sensor_name});var a={time:e,device:"web",data:t};_e.database().ref("sync/"+this.props.sync_key).set(a),this.props.onClose(1)},this.checkPlace=()=>{P.a.setApiKey("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc"),P.a.fromLatLng(this.state.lat,this.state.lng).then(e=>{this.setState({selectedAddress:e.results[0].formatted_address})},e=>{console.error(e)})},this.onEnterPressed=e=>{"Enter"===e.key&&(this.state.next_disabled||this.handleNext(this.state.active_step),e.preventDefault())}}render(){const e=this.props.classes;return s.a.createElement(n.Fragment,null,s.a.createElement(te.a,{open:this.props.opened,fullWidth:!0,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(ne.a,{id:"alert-dialog-title"},E.add_sensor),s.a.createElement(ae.a,null,s.a.createElement(se.a,{activeStep:this.state.active_step-1,orientation:"vertical"},s.a.createElement(ie.a,{key:E.enter_chip_id},s.a.createElement(oe.a,null,E.enter_chip_id),s.a.createElement(re.a,null,s.a.createElement("div",null,s.a.createElement(c.a,null,E.enter_chip_id_instruction_1," ",s.a.createElement("a",{href:"https://chillibits.com/pmapp/en/faq/#6",target:"blank"},E.faq_site)," ",E.enter_chip_id_instruction_2),s.a.createElement(b.a,{value:this.state.chip_id,label:E.chip_id,type:"number",error:this.state.chip_id_error,onChange:this.chipIDChange,variant:"outlined",onKeyPress:this.onEnterPressed,style:{marginTop:15}}),""!==this.state.error_desc&&s.a.createElement(c.a,{color:"error",style:{marginTop:15}},this.state.error_desc)),s.a.createElement(p.a,{disabled:!0,onClick:this.handleBack,style:{marginTop:15,marginRight:15}},E.back),s.a.createElement("span",{style:{position:"relative",width:80}},s.a.createElement(p.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:()=>this.handleNext(1)},E.next),this.state.loading&&s.a.createElement(le.a,{size:24,style:{marginTop:0},className:e.buttonProgress})))),s.a.createElement(ie.a,{key:E.enter_base_data},s.a.createElement(oe.a,null,E.enter_base_data),s.a.createElement(re.a,null,s.a.createElement("div",null,s.a.createElement(c.a,null,E.display_name_color_instruction),s.a.createElement(b.a,{label:E.display_name,value:this.state.sensor_name,style:{width:360,marginTop:15,marginBottom:15},onChange:this.nameChange,onKeyPress:this.onEnterPressed,variant:"outlined"}),s.a.createElement(ce.CirclePicker,{color:this.state.color,width:"380px",onChangeComplete:this.colorChange})),s.a.createElement(p.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},E.back),s.a.createElement("span",{style:{position:"relative",width:80}},s.a.createElement(p.a,{variant:"contained",color:"primary",disabled:this.state.next_disabled,style:{marginTop:15},onClick:()=>this.handleNext(2)},E.next)))),s.a.createElement(ie.a,{key:E.add_sensor_to_map},s.a.createElement(oe.a,null,E.add_sensor_to_map),s.a.createElement(re.a,null,s.a.createElement("div",null,s.a.createElement(c.a,null,E.add_sensor_to_map_instruction_1," ",s.a.createElement("a",{href:"mailto:contact@chillibits.com"},E.contact)," ",E.add_sensor_to_map_instruction_2),s.a.createElement(de.a,{title:E.soon_available},s.a.createElement(p.a,{variant:"outlined",color:"primary",_onClick:this.chooseLocation,style:{marginTop:10,width:"100%"}},E.choose_location)),s.a.createElement(b.a,{label:E.longitude,style:{marginTop:10,marginRight:"2%",width:"49%"},type:"number",onChange:this.lngChanged,onKeyPress:this.onEnterPressed,inputProps:{min:-180,max:180,maxLength:9},variant:"outlined"}),s.a.createElement(b.a,{label:E.latitude,style:{marginTop:10,width:"49%"},type:"number",onChange:this.latChanged,onKeyPress:this.onEnterPressed,inputProps:{min:-90,max:90,maxLength:8},variant:"outlined"}),s.a.createElement(b.a,{label:E.mounting_height,style:{marginTop:10,width:"49%"},type:"number",onChange:this.altChanged,onKeyPress:this.onEnterPressed,inputProps:{min:0,max:999,maxLength:3},variant:"outlined"}),void 0!==this.state.selectedAddress&&s.a.createElement("div",null,s.a.createElement(c.a,{style:{marginTop:5,marginBottom:5}},s.a.createElement("b",null,this.state.selectedAddress)),s.a.createElement(c.a,null,E.is_this_the_right_place))),s.a.createElement(p.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},E.back),this.props.logged_in&&s.a.createElement(p.a,{variant:"outlined",onClick:this.addSensorPrivate,style:{marginTop:15,marginRight:15}},E.skip),s.a.createElement("span",{style:{position:"relative",width:80}},s.a.createElement(p.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:()=>this.handleNext(3)},E.add_sensor),this.state.loading&&s.a.createElement(le.a,{size:24,style:{marginTop:0},className:e.buttonProgress}))))))),this.state.location_picker_open&&s.a.createElement(dt,{onChoose:this.locationChange}))}}var be=Object(r.a)(e=>({buttonProgress:{position:"absolute",color:pe.a[500],top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}))(ve),Ce=a(893);class fe extends s.a.Component{constructor(...e){super(...e),this.state={name:"",color:void 0,button_disabled:!0},this.onAddFavourite=()=>{var e=Math.floor(Date.now()),t=this.props.user_data;t.push({chip_id:this.props.chip_id,color:this.state.color,fav:!0,name:this.state.name});var a={time:e,device:"web",data:t};_e.database().ref("sync/"+this.props.sync_key).set(a),this.props.onClose()},this.onNameChanged=e=>{var t=0===e.target.value.length||void 0===this.state.color;this.setState({name:e.target.value,button_disabled:t})},this.onColorChanged=(e,t)=>{this.setState({color:e.hex,button_disabled:0===this.state.name.length})}}render(){const e=this.props.classes;return s.a.createElement(te.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"dialog-title"},s.a.createElement(ne.a,{id:"dialog-title"},E.add_sensor_to_favourites),s.a.createElement("div",{className:e.dialog_content},s.a.createElement("p",null,s.a.createElement(b.a,{label:E.display_name,style:{width:"320px"},onChange:this.onNameChanged,variant:"outlined"})),s.a.createElement("p",null,s.a.createElement(b.a,{label:E.chip_id,disabled:!0,value:this.props.chip_id,style:{width:"320px"},variant:"outlined"})),s.a.createElement(ce.CirclePicker,{color:this.state.color,width:"340px",onChangeComplete:this.onColorChanged})),s.a.createElement(Ce.a,null,s.a.createElement(p.a,{onClick:this.props.onClose,color:"primary"},E.cancel),s.a.createElement(p.a,{onClick:this.onAddFavourite,color:"primary",disabled:this.state.button_disabled,autoFocus:!0},E.add_favourite)))}}var Ee=Object(r.a)(e=>({dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}))(fe),ye=a(895),ke=a(137),we=a.n(ke),Se=a(894),De=a(896),xe=a(897),Pe=a(264),Ae=a(403),Me=a(404),ze=a(388),Te=a.n(ze),Ie=a(259),Le=a.n(Ie),He=a(390),Fe=a.n(He),Be=a(136),Oe=a.n(Be),Ve=a(386),Ne=a(922),Re=a(899),We=a(913),je=a(900);let Ke=0;function Ze({children:e,dir:t}){return s.a.createElement(c.a,{component:"div",dir:t,style:{padding:24}}," ",e," ")}function qe(e){return s.a.createElement(Se.a,Object.assign({direction:"up"},e))}function Ue(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}class Ye extends s.a.Component{constructor(e){super(e),this.state={data:void 0,data_pm10:[],data_pm2_5:[],data_temp:[],data_humidity:[],data_pressure:[],data_graph:[],loading:!0,picker:null,open:!1,value:0,default_date:new Date,selected_date:new Date,dialog_details_open:!1,current_zoom:1e4,enabled_pm10:!0,enabled_pm2_5:!0,enabled_temp:!1,enabled_humidity:!1,enabled_pressure:!1},this.loadSensorData=()=>{this.setState({loading:!0});let e=this;Ke=0;var t=this.state.selected_date;t.setHours(0,0,0,0);var a=new Date(t.getTime()+864e5);k.a.post("https://h2801469.stratoserver.net/get.php").set("Content-Type","application/x-www-form-urlencoded").send({id:this.props.sensor.chip_id,from:t.getTime()/1e3,to:a.getTime()/1e3,minimize:!0,with_gps:!1,with_note:!1}).end((function(t,a){var n=a.text.trim(),s=JSON.parse(n),i=[],o=[],r=[],l=[],d=[],c=[],h=[];s.map((e,t)=>{var a=new Date(1e3*e.time);i.push(function(e,t,a,n,s,i){return Ke+=1,{id:Ke,time:e,pm1:t,pm2:a,temp:n,humidity:s,pressure:i}}(Oe()(1e3*e.time).format("HH:mm:ss"),e.p1,e.p2,Ue(e.t,1),Ue(e.h,1),Ue(e.p/100,2)));var n=parseFloat(e.p1),s=parseFloat(e.p2),o=parseFloat(Ue(e.t,1)),p=parseFloat(Ue(e.h,1)),m=parseFloat(Ue(e.p/100,2));return r.push({x:a,y:n}),l.push({x:a,y:s}),d.push({x:a,y:o}),c.push({x:a,y:p}),h.push({x:a,y:m}),t}),e.state.enabled_pm10&&o.push({id:E.pm1,color:"hsl(353, 70%, 50%)",data:r}),e.state.enabled_pm2_5&&o.push({id:E.pm2,color:"hsl(87, 70%, 50%)",data:l}),e.state.enabled_temp&&o.push({id:E.temperature,color:"hsl(183, 70%, 50%)",data:d}),e.state.enabled_humidity&&o.push({id:E.humidity,color:"hsl(281, 70%, 50%)",data:c}),e.state.enabled_pressure&&o.push({id:E.pressure,color:"hsl(61, 70%, 50%)",data:h}),e.setState({data:i,data_graph:o,data_pm10:r,data_pm2_5:l,data_temp:d,data_humidity:c,data_pressure:h,loading:!1})}))},this.handleClickOpen=()=>{this.setState({open:!0})},this.handleClose=()=>{this.setState({open:!1})},this.showDetails=()=>{this.props.onOpenDetails(this.props.sensor)},this.handleTabChange=(e,t)=>{this.setState({value:t})},this.handleTabChangeIndex=e=>{this.setState({value:e})},this.openPicker=()=>{this.picker.open()},this.minusDay=()=>{var e=this.state.selected_date;this.setState({selected_date:new Date(e.setTime(e.getTime()-864e5))}),this.loadSensorData()},this.plusDay=()=>{var e=this.state.selected_date;this.setState({selected_date:new Date(e.setTime(e.getTime()+864e5))}),this.loadSensorData()},this.handleDateChange=e=>{this.setState({selected_date:e}),this.loadSensorData()},this.onZoomChange=(e,t)=>{this.setState({current_zoom:t})},this.onCheckedChange=e=>t=>{var a=[];("enabled_pm10"===e&&t.target.checked||"enabled_pm10"!==e&&this.state.enabled_pm10)&&a.push({id:E.pm1,color:"hsl(353, 70%, 50%)",data:this.state.data_pm10}),("enabled_pm2_5"===e&&t.target.checked||"enabled_pm2_5"!==e&&this.state.enabled_pm2_5)&&a.push({id:E.pm2,color:"hsl(87, 70%, 50%)",data:this.state.data_pm2_5}),("enabled_temp"===e&&t.target.checked||"enabled_temp"!==e&&this.state.enabled_temp)&&a.push({id:E.temperature,color:"hsl(183, 70%, 50%)",data:this.state.data_temp}),("enabled_humidity"===e&&t.target.checked||"enabled_humidity"!==e&&this.state.enabled_humidity)&&a.push({id:E.humidity,color:"hsl(281, 70%, 50%)",data:this.state.data_humidity}),("enabled_pressure"===e&&t.target.checked||"enabled_pressure"!==e&&this.state.enabled_pressure)&&a.push({id:E.pressure,color:"hsl(61, 70%, 50%)",data:this.state.data_pressure}),this.setState({[e]:t.target.checked,data_graph:a})},this.loadSensorData()}render(){const e=this.props,t=e.classes,a=e.theme;return s.a.createElement(te.a,{fullScreen:!0,open:this.props.opened,onClose:this.props.onClose,TransitionComponent:qe},s.a.createElement(m.a,{className:t.appBar},s.a.createElement(u.a,null,s.a.createElement(de.a,{title:E.show_sensor_details},s.a.createElement(_.a,{color:"inherit",onClick:this.showDetails,"aria-label":E.show_details},s.a.createElement(ee,null))),s.a.createElement(c.a,{variant:"h6",color:"inherit",className:t.flex},this.props.sensor.name," - ChipID: ",this.props.sensor.chip_id),s.a.createElement(de.a,{title:E.close_window},s.a.createElement(_.a,{color:"inherit",onClick:this.props.onClose},s.a.createElement(we.a,null))))),this.state.loading&&s.a.createElement(ye.a,null),s.a.createElement(De.a,{className:t.card},s.a.createElement(xe.a,{className:t.card_content},s.a.createElement(de.a,{title:E.day_before},s.a.createElement(_.a,{onClick:this.minusDay},s.a.createElement(Te.a,null))),s.a.createElement(Pe.b,{utils:Ae.a,locale:Me.a},s.a.createElement(Pe.a,{value:this.state.selected_date,onChange:this.handleDateChange,className:t.date_selection,showTodayButton:!0,disableFuture:!0,cancelLabel:"Abbrechen",todayLabel:"Heute",okLabel:"OK",invalidLabel:"Ung\xfcltige Eingabe",format:"dd.MM.yyyy",ref:e=>{this.picker=e}})),s.a.createElement(de.a,{title:E.choose_another_date},s.a.createElement(_.a,{onClick:this.openPicker},s.a.createElement(Fe.a,null))),this.state.selected_date>=this.state.default_date&&s.a.createElement(de.a,{title:E.day_after},s.a.createElement(_.a,{onClick:this.plusDay,disabled:!0},s.a.createElement(Le.a,{disabled:!0}))),this.state.selected_date<this.state.default_date&&s.a.createElement(de.a,{title:E.day_after},s.a.createElement(_.a,{onClick:this.plusDay},s.a.createElement(Le.a,null))))),s.a.createElement(m.a,{position:"static",color:"default"},s.a.createElement(I.a,{value:this.state.value,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},s.a.createElement(L.a,{label:E.diagram}),s.a.createElement(L.a,{label:E.data_records}))),s.a.createElement(Y.Scrollbars,null,s.a.createElement(R.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleTabChangeIndex,style:{overflowX:"hidden"},animateHeight:!0},s.a.createElement(Ze,{dir:a.direction,style:{overflowX:"hidden"}},s.a.createElement(Y.Scrollbars,{style:{height:600,overflowX:"hidden"}},this.state.data_graph!==[]&&s.a.createElement("div",{style:{height:590,width:this.state.current_zoom}},s.a.createElement(Ve.ResponsiveLine,{data:this.state.data_graph,margin:{top:10,right:50,bottom:40,left:30},xScale:{type:"time",format:"native",precision:"minute"},yScale:{type:"linear",stacked:!1,min:"auto",max:"auto"},curve:this.state.smooth_curve?this.state.basis_curve?"basis":"cardinal":"linear",axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:E.time_of_day,legendOffset:35,format:"%H:%m",legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:E.measurement,legendOffset:-40,legendPosition:"middle"},colors:"category10",lineWidth:1,dotSize:this.state.disable_dots?0:5,dotColor:"inherit:darker(0.3)",enableDotLabel:!0,dotLabel:this.state.enable_time?function(e){return"".concat(Oe()(e.x).format("HH:mm"),"")}:"",dotLabelYOffset:-12,dotBorderWidth:0,animate:!1,motionStiffness:90,motionDamping:15,legends:[{anchor:"bottom-right",direction:"row",justify:!1,translateX:25,translateY:40,itemsSpacing:10,itemDirection:"left-to-right",itemWidth:100,itemHeight:18,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))),s.a.createElement(Re.a,{control:s.a.createElement(We.a,{checked:this.state.enabled_pm10,onChange:this.onCheckedChange("enabled_pm10"),value:"pm10",color:"primary"}),label:E.show_pm1}),s.a.createElement(Re.a,{control:s.a.createElement(We.a,{checked:this.state.enabled_pm2_5,onChange:this.onCheckedChange("enabled_pm2_5"),value:"pm2_5",color:"primary"}),label:E.show_pm2}),s.a.createElement(Re.a,{control:s.a.createElement(We.a,{checked:this.state.enabled_temp,onChange:this.onCheckedChange("enabled_temp"),value:"temp",color:"primary"}),label:E.show_temperature}),s.a.createElement(Re.a,{control:s.a.createElement(We.a,{checked:this.state.enabled_humidity,onChange:this.onCheckedChange("enabled_humidity"),value:"humidity",color:"primary"}),label:E.show_humidity}),s.a.createElement(Re.a,{control:s.a.createElement(We.a,{checked:this.state.enabled_pressure,onChange:this.onCheckedChange("enabled_pressure"),value:"pressure",color:"primary"}),label:E.show_pressure}),s.a.createElement(c.a,{variant:"h6"},E.zoom_of_diagram_),s.a.createElement("br",null),s.a.createElement(Ne.a,{value:this.state.current_zoom,onChange:this.onZoomChange,min:1e3,max:3e4,step:1e3}),s.a.createElement("br",null),s.a.createElement(Re.a,{control:s.a.createElement(je.a,{checked:this.state.enable_time,onChange:this.onCheckedChange("enable_time"),color:"primary"}),label:E.show_time}),s.a.createElement(Re.a,{control:s.a.createElement(je.a,{checked:this.state.disable_dots,onChange:this.onCheckedChange("disable_dots"),color:"primary"}),label:E.hide_dots}),s.a.createElement(Re.a,{control:s.a.createElement(je.a,{checked:this.state.smooth_curve,onChange:this.onCheckedChange("smooth_curve"),color:"primary"}),label:E.enable_soft_curve}),this.state.smooth_curve&&s.a.createElement(Re.a,{control:s.a.createElement(je.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary"}),label:E.enable_curve_smoothing}),!this.state.smooth_curve&&s.a.createElement(Re.a,{control:s.a.createElement(je.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary",disabled:!0}),label:E.enable_curve_smoothing})),s.a.createElement(Ze,{dir:a.direction},this.state.data&&s.a.createElement(Pt,{data:this.state.data}),void 0===this.state.data&&s.a.createElement(n.Fragment,null,E.no_data)))))}}var Qe=Object(r.a)(e=>({root:{backgroundColor:e.palette.background.paper,width:500},appBar:{position:"relative"},flex:{flex:1},card:{minWidth:275,margin:15},card_content:{height:50,padding:5},date_selection:{marginTop:10}}),{withTheme:!0})(Ye);class Je extends s.a.Component{constructor(...e){super(...e),this.state={name:this.props.name,color:this.props.color,error:!1},this.nameChanged=e=>{var t=0===e.target.value.length;this.setState({name:e.target.value,error:t})},this.colorChanged=(e,t)=>{this.setState({color:e.hex})},this.saveChangings=()=>{var e=Math.floor(Date.now()),t=[];this.props.data.map(e=>(e.chip_id===this.props.chip_id?t.push({chip_id:this.props.chip_id,color:this.state.color,fav:this.props.fav,name:this.state.name}):t.push(e),!0));var a={time:e,device:"web",data:t};_e.database().ref("sync/"+this.props.sync_key).set(a),this.props.onClose(1)}}render(){const e=this.props.classes;return s.a.createElement(te.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(ne.a,{id:"alert-dialog-title"},E.edit_sensor),s.a.createElement("div",{className:e.dialog_content},s.a.createElement("p",null,s.a.createElement(b.a,{label:E.display_name,value:this.state.name,style:{width:"320px"},onChange:this.nameChanged,variant:"outlined"})),s.a.createElement("p",null,s.a.createElement(b.a,{label:E.chip_id,value:this.props.chip_id,style:{width:"320px"},variant:"outlined",disabled:!0})),s.a.createElement(ce.CirclePicker,{colors:[this.props.color,"#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],color:this.state.color,width:"340px",onChangeComplete:this.colorChanged})),s.a.createElement(Ce.a,null,s.a.createElement(p.a,{onClick:this.props.onClose,color:"primary"},E.cancel),s.a.createElement(p.a,{onClick:this.saveChangings,color:"primary",disabled:this.state.error,autoFocus:!0},E.save)))}}var Ge=Object(r.a)(e=>({dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}))(Je),Xe=a(901);class $e extends s.a.Component{constructor(...e){super(...e),this.onRemove=()=>{var e=Math.floor(Date.now()),t=[];this.props.user_data.map(e=>(e.chip_id!==this.props.chip_id&&t.push(e),!0));var a={time:e,device:"web",data:t};_e.database().ref("sync/"+this.props.sync_key).set(a),this.props.onClose(1)}}render(){return s.a.createElement(te.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(ne.a,{id:"alert-dialog-title"},E.remove_sensor),s.a.createElement(ae.a,null,s.a.createElement(Xe.a,{id:"alert-dialog-description"},E.remove_sensor_message_1," ",s.a.createElement("b",null,this.props.chip_id)," ",E.remove_sensor_message_2)),s.a.createElement(Ce.a,null,s.a.createElement(p.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},E.cancel),s.a.createElement(p.a,{onClick:this.onRemove,color:"primary"},E.remove)))}}var et=$e;class tt extends s.a.Component{constructor(e){super(e),this.state={public:!1,firmware_version:E.loading,creation_date:E.loading,lat:E.loading,lng:E.loading,alt:E.loading},this.loadSensorDetails=()=>{let e=this;k.a.post(ge).set("Content-Type","application/x-www-form-urlencoded").send({command:"issensorexisting",chip_id:this.props.chip_id}).end((function(t,a){"1"===a.text.trim()?k.a.post(ge).set("Content-Type","application/x-www-form-urlencoded").send({command:"getsensorinfo",chip_id:e.props.chip_id}).end((function(t,a){var n=a.text.trim(),s=JSON.parse(n)[0],i=s.alt+"m";e.setState({creation_date:Oe.a.unix(s.creation_date).format("DD.MM.YYYY"),firmware_version:s.firmware_version,public:!0,lat:s.lat,lng:s.lng,alt:i})})):e.setState({creation_date:"-",firmware_version:"-",public:!1,lat:"-",lng:"-",alt:"-"})}))},this.loadSensorDetails()}render(){return s.a.createElement(te.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(ne.a,{id:"alert-dialog-title"},E.sensor_details),s.a.createElement(ae.a,null,s.a.createElement("table",{width:"350"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.display_name,":")),s.a.createElement("td",{align:"right"},this.props.name)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.chip_id,":")),s.a.createElement("td",{align:"right"},this.props.chip_id)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.public,":")),s.a.createElement("td",{align:"right"},this.state.public?"Ja":"Nein")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.firmware_version,":")),s.a.createElement("td",{align:"right"},this.state.firmware_version)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.online_since,":")),s.a.createElement("td",{align:"right"},this.state.creation_date)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.latitude,":")),s.a.createElement("td",{align:"right"},this.state.lat)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.longitude,":")),s.a.createElement("td",{align:"right"},this.state.lng)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,E.mounting_height,":")),s.a.createElement("td",{align:"right"},this.state.alt))))),s.a.createElement(Ce.a,null,s.a.createElement(p.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},E.ok)))}}var at=tt,nt=a(393),st=a.n(nt),it=a(391),ot=a.n(it);function rt(e){return s.a.createElement(Se.a,Object.assign({direction:"up"},e))}class lt extends s.a.Component{constructor(...e){super(...e),this.state={adress:"",position:{lat:0,lng:0}},this.onClose=()=>{this.props.onChoose(this.state.position,this.state.address)}}componentDidMount(){}handleLocationChange({position:e,address:t}){this.setState({position:e,address:t})}render(){const e=this.props.classes;return s.a.createElement(te.a,{fullScreen:!0,open:!0,onClose:this.onClose,TransitionComponent:rt},s.a.createElement(m.a,{className:e.appBar},s.a.createElement(u.a,null,s.a.createElement(c.a,{variant:"h6",color:"inherit",className:e.flex}," W\xe4hlen Sie den genauen Standort des Sensors auf der Karte "),s.a.createElement(_.a,{color:"inherit",onClick:this.onClose,"aria-label":"Fertig"},s.a.createElement(st.a,null)))),s.a.createElement(ot.a,{containerElement:s.a.createElement("div",{style:{height:"100%",overflowY:"hidden"}}),mapElement:s.a.createElement("div",{style:{height:"100%"}}),radius:-1,defaultPosition:this.state.position,onChange:this.handleLocationChange}))}}var dt=Object(r.a)({appBar:{position:"relative"},flex:{flex:1}})(lt),ct=a(394),ht=a.n(ct),pt=a(905),mt=a(906),ut=a(904),_t=a(902),gt=a(923),vt=a(903),bt=a(918),Ct=a(395),ft=a.n(Ct),Et=a(396),yt=a.n(Et);function kt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}const wt=[{id:"time",numeric:!1,disablePadding:!0,label:E.time_of_day},{id:"pm10",numeric:!0,disablePadding:!1,label:E.pm1},{id:"pm2.5",numeric:!0,disablePadding:!1,label:E.pm2},{id:"temp",numeric:!0,disablePadding:!1,label:E.temperature},{id:"humidity",numeric:!0,disablePadding:!1,label:E.humidity},{id:"pressure",numeric:!0,disablePadding:!1,label:E.pressure}];class St extends s.a.Component{constructor(...e){super(...e),this.createSortHandler=e=>t=>{this.props.onRequestSort(t,e)}}render(){const e=this.props,t=e.onSelectAllClick,a=e.order,n=e.orderBy,i=e.numSelected,o=e.rowCount;return s.a.createElement(_t.a,null,s.a.createElement(vt.a,null,s.a.createElement(ut.a,{padding:"checkbox"},s.a.createElement(We.a,{indeterminate:i>0&&i<o,checked:i===o,onChange:t})),wt.map(e=>s.a.createElement(ut.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},s.a.createElement(de.a,{title:"Sortieren",placement:e.numeric?"bottom-end":"bottom-start",enterDelay:300},s.a.createElement(bt.a,{active:n===e.id,direction:a,onClick:this.createSortHandler(e.id)},e.label))),this)))}}let Dt=e=>{const t=e.numSelected,a=e.classes;return s.a.createElement(u.a,{className:ht()(a.root,{[a.highlight]:t>0})},s.a.createElement("div",{className:a.title},t>0?s.a.createElement(c.a,{color:"inherit",variant:"subtitle1"},t," Datens\xe4tze ausgew\xe4hlt"):s.a.createElement(c.a,{variant:"h6",id:"tableTitle"},"Datens\xe4tze der Messdaten")),s.a.createElement("div",{className:a.spacer}),s.a.createElement("div",{className:a.actions},t>0?s.a.createElement(de.a,{title:E.delete},s.a.createElement(_.a,{"aria-label":E.delete},s.a.createElement(ft.a,null))):s.a.createElement(de.a,{title:E.soon_available},s.a.createElement(_.a,{"aria-label":E.soon_available},s.a.createElement(yt.a,null)))))};Dt=Object(r.a)(e=>({root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(g.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}))(Dt);class xt extends s.a.Component{constructor(...e){super(...e),this.state={order:"asc",orderBy:"calories",selected:[],page:0,rowsPerPage:25},this.handleRequestSort=(e,t)=>{const a=t;let n="desc";this.state.orderBy===t&&"desc"===this.state.order&&(n="asc"),this.setState({order:n,orderBy:a})},this.handleSelectAllClick=e=>{e.target.checked?this.setState(e=>({selected:this.props.data.map(e=>e.id)})):this.setState({selected:[]})},this.handleClick=(e,t)=>{const a=this.state.selected,n=a.indexOf(t);let s=[];-1===n?s=s.concat(a,t):0===n?s=s.concat(a.slice(1)):n===a.length-1?s=s.concat(a.slice(0,-1)):n>0&&(s=s.concat(a.slice(0,n),a.slice(n+1))),this.setState({selected:s})},this.handleChangePage=(e,t)=>{this.setState({page:t})},this.handleChangeRowsPerPage=e=>{this.setState({rowsPerPage:e.target.value})},this.isSelected=e=>-1!==this.state.selected.indexOf(e)}render(){const e=this.props,t=e.classes,a=e.data,n=this.state,i=n.order,o=n.orderBy,r=n.selected,l=n.rowsPerPage,c=n.page,h=l-Math.min(l,a.length-c*l);return s.a.createElement(d.a,{className:t.root},s.a.createElement(Dt,{numSelected:r.length}),s.a.createElement("div",{className:t.tableWrapper},s.a.createElement(pt.a,{className:t.table,"aria-labelledby":"tableTitle"},s.a.createElement(St,{numSelected:r.length,order:i,orderBy:o,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:a.length}),s.a.createElement(mt.a,null,function(e,t){const a=e.map((e,t)=>[e,t]);return a.sort((e,a)=>{const n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(e=>e[0])}(a,function(e,t){return"desc"===e?(e,a)=>kt(e,a,t):(e,a)=>-kt(e,a,t)}(i,o)).slice(c*l,c*l+l).map(e=>{const t=this.isSelected(e.id);return s.a.createElement(vt.a,{hover:!0,onClick:t=>this.handleClick(t,e.id),role:"checkbox","aria-checked":t,tabIndex:-1,key:e.id,selected:t},s.a.createElement(ut.a,{padding:"checkbox"},s.a.createElement(We.a,{checked:t})),s.a.createElement(ut.a,{component:"th",scope:"row",padding:"none"},s.a.createElement("b",null,e.time)),s.a.createElement(ut.a,{align:"right"},e.pm1," \xb5g/m\xb3"),s.a.createElement(ut.a,{align:"right"},e.pm2," \xb5g/m\xb3"),s.a.createElement(ut.a,{align:"right",style:0===e.temp&&0===e.humidity&&0===e.pressure?{color:"#F00"}:{}},0===e.temp&&0===e.humidity&&0===e.pressure?"-":e.temp+" \xb0C"),s.a.createElement(ut.a,{align:"right"},0!==e.humidity?e.humidity+" %":"-"),s.a.createElement(ut.a,{align:"right"},0!==e.pressure?e.pressure+" hPa":"-"))}),h>0&&s.a.createElement(vt.a,{style:{height:49*h}},s.a.createElement(ut.a,{colSpan:6}))))),s.a.createElement(gt.a,{rowsPerPageOptions:[25,50,100],component:"div",count:a.length,rowsPerPage:l,page:c,backIconButtonProps:{"aria-label":E.previous_page},nextIconButtonProps:{"aria-label":E.next_page},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}var Pt=Object(r.a)(e=>({root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}))(xt),At=a(400),Mt=a.n(At),zt=a(920),Tt=a(908),It=a(401),Lt=a.n(It),Ht=a(402),Ft=a.n(Ht),Bt=a(255),Ot=a.n(Bt),Vt=a(397),Nt=a(78),Rt=a(114);class Wt extends n.Component{constructor(e){super(e),this.state={sync_key:"",user_data:[],favourites:[],own_sensors:[],first_sync_complete:!1,logged_in:!1,markerData:[],currentPosition:{lat:52.520008,lng:13.404954},selected:void 0,selected_id:void 0,suggestions:[],dialog_add_sensor_open:!1,dialog_add_favourite_open:!1,dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!0,dialog_sensor_details_open:!1,dialog_edit_sensor_open:!1,dialog_remove_sensor_open:!1,snackbar_message:E.action_successful,snackbar_success_open:!1,snackbar_error_open:!1},this.loadAllSensors=()=>{let e=this;k.a.post(ge).set("Content-Type","application/x-www-form-urlencoded").send({command:"getall"}).end((function(t,a){var n=a.text.trim(),s=JSON.parse(n);e.setState({markerData:s})}))},this.handleSearchChange=(e,t)=>{alert(e),alert(t)},this.onShowAddSensorDialog=()=>{this.setState({dialog_add_sensor_open:!0})},this.onHideAddSensorDialog=e=>{this.setState({dialog_add_sensor_open:!1}),this.onSnackbarOpen(e,E.sensor_added_successfully,E.error_please_try_again)},this.onShowAddFavouriteDialog=e=>{this.setState({dialog_add_favourite_open:!0,selected_id:e})},this.onHideAddFavouriteDialog=e=>{this.setState({dialog_add_favourite_open:!1}),this.onSnackbarOpen(e,E.sensor_favourized,E.favourization_failed_try_again)},this.onShowSensorDataDialog=e=>{this.setState({dialog_sensor_data_open:!0,selected:e})},this.onHideSensorDataDialog=()=>{this.setState({dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!1})},this.onShowDetailsDialog=e=>{this.setState({dialog_sensor_details_open:!0,selected:e})},this.onHideDetailsDialog=()=>{this.setState({dialog_sensor_details_open:!1})},this.onShowEditSensorDialog=e=>{this.setState({dialog_edit_sensor_open:!0,selected:e})},this.onHideEditSensorDialog=e=>{this.setState({dialog_edit_sensor_open:!1,selected:void 0}),this.onSnackbarOpen(e,E.changings_saved,E.changings_save_failed)},this.onShowRemoveSensorDialog=e=>{this.setState({dialog_remove_sensor_open:!0,selected_id:e})},this.onHideRemoveSensorDialog=e=>{this.setState({dialog_remove_sensor_open:!1,selected:void 0}),this.onSnackbarOpen(e,E.sensor_removed_successfully,E.sensor_removal_failed)},this.onSnackbarOpen=(e,t,a)=>{1===e?this.setState({snackbar_success_open:!0,snackbar_message:t}):2===e&&this.setState({snackbar_error_open:!0,snackbar_message:a})},this.onSnackbarClose=(e,t)=>{"clickaway"!==t&&this.setState({snackbar_success_open:!1,snackbar_error_open:!1})},navigator.geolocation.getCurrentPosition(e=>{this.setState({currentPosition:{lat:e.coords.latitude,lng:e.coords.longitude}})});var t=a(815)({length:25});this.state.sync_key=t,window.addEventListener("beforeunload",e=>{_e.database().ref("sync/"+this.state.sync_key).remove()}),this.loadAllSensors()}componentDidMount(){const e=this;var t=Math.floor(Date.now()),a={time:t,device:"web"};_e.database().ref("sync/"+this.state.sync_key).set(a),_e.database().ref("sync/"+this.state.sync_key).on("value",(function(a){if(null!==a.val()){if(a.child("time").val()>t){var n=a.child("data").val(),s=[],i=[];null!==n?n.map(e=>(e.fav?s.push(e):i.push(e),!0)):n=[],e.setState({logged_in:!0,user_data:n,favourites:s,own_sensors:i,snackbar_success_open:!e.state.first_sync_complete,snackbar_message:"Verkn\xfcpfung mit Android-App erfolgreich",first_sync_complete:!0})}}else e.setState({logged_in:!1,user_data:[],favourites:[],own_sensors:[],snackbar_error_open:!0,snackbar_message:"Verbindung zur Android-App beendet",first_sync_complete:!1})}))}render(){const e=this.props.classes;return Rt.isAndroid&&(window.location="https://play.app.goo.gl/?link=https://play.google.com/store/apps/details?id=com.mrgames13.jimdo.feinstaubapp"),s.a.createElement(Vt.a,null,s.a.createElement(Rt.CustomView,{condition:Rt.isAndroid},s.a.createElement("div",null,s.a.createElement("p",null,"Sie werden weitergeleitet ..."))),s.a.createElement(Rt.CustomView,{condition:!Rt.isAndroid},s.a.createElement(n.Fragment,null,s.a.createElement("div",{id:"logo-container"},s.a.createElement("svg",{id:"logo",width:"1062",height:"152",viewBox:"0 0 1062 152",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("path",{d:"M58.9256 11.632V22.288H15.2936V56.128H50.7176V66.784H15.2936V112H2.18958V11.632H58.9256Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M146.752 69.52C146.752 72.016 146.608 74.656 146.32 77.44H83.2481C83.7281 85.216 86.3681 91.312 91.1681 95.728C96.0641 100.048 101.968 102.208 108.88 102.208C114.544 102.208 119.248 100.912 122.992 98.32C126.832 95.632 129.52 92.08 131.056 87.664H145.168C143.056 95.248 138.832 101.44 132.496 106.24C126.16 110.944 118.288 113.296 108.88 113.296C101.392 113.296 94.6721 111.616 88.7201 108.256C82.8641 104.896 78.2561 100.144 74.8961 94C71.5361 87.76 69.8561 80.56 69.8561 72.4C69.8561 64.24 71.4881 57.088 74.7521 50.944C78.0161 44.8 82.5761 40.096 88.4321 36.832C94.3841 33.472 101.2 31.792 108.88 31.792C116.368 31.792 122.992 33.424 128.752 36.688C134.512 39.952 138.928 44.464 142 50.224C145.168 55.888 146.752 62.32 146.752 69.52ZM133.216 66.784C133.216 61.792 132.112 57.52 129.904 53.968C127.696 50.32 124.672 47.584 120.832 45.76C117.088 43.84 112.912 42.88 108.304 42.88C101.68 42.88 96.0161 44.992 91.3121 49.216C86.7041 53.44 84.0641 59.296 83.3921 66.784H133.216Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M170.817 20.272C168.321 20.272 166.209 19.408 164.481 17.68C162.753 15.952 161.889 13.84 161.889 11.344C161.889 8.84798 162.753 6.73599 164.481 5.00799C166.209 3.27999 168.321 2.41599 170.817 2.41599C173.217 2.41599 175.233 3.27999 176.865 5.00799C178.593 6.73599 179.457 8.84798 179.457 11.344C179.457 13.84 178.593 15.952 176.865 17.68C175.233 19.408 173.217 20.272 170.817 20.272ZM177.153 33.088V112H164.049V33.088H177.153Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M237.934 31.648C247.534 31.648 255.31 34.576 261.262 40.432C267.214 46.192 270.19 54.544 270.19 65.488V112H257.23V67.36C257.23 59.488 255.262 53.488 251.326 49.36C247.39 45.136 242.014 43.024 235.198 43.024C228.286 43.024 222.766 45.184 218.638 49.504C214.606 53.824 212.59 60.112 212.59 68.368V112H199.486V33.088H212.59V44.32C215.182 40.288 218.686 37.168 223.102 34.96C227.614 32.752 232.558 31.648 237.934 31.648Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M319.532 113.296C313.484 113.296 308.06 112.288 303.26 110.272C298.46 108.16 294.668 105.28 291.884 101.632C289.1 97.888 287.564 93.616 287.276 88.816H300.812C301.196 92.752 303.02 95.968 306.284 98.464C309.644 100.96 314.012 102.208 319.388 102.208C324.38 102.208 328.316 101.104 331.196 98.896C334.076 96.688 335.516 93.904 335.516 90.544C335.516 87.088 333.98 84.544 330.908 82.912C327.836 81.184 323.084 79.504 316.652 77.872C310.796 76.336 305.996 74.8 302.252 73.264C298.604 71.632 295.436 69.28 292.748 66.208C290.156 63.04 288.86 58.912 288.86 53.824C288.86 49.792 290.06 46.096 292.46 42.736C294.86 39.376 298.268 36.736 302.684 34.816C307.1 32.8 312.14 31.792 317.804 31.792C326.54 31.792 333.596 34 338.972 38.416C344.348 42.832 347.228 48.88 347.612 56.56H334.508C334.22 52.432 332.54 49.12 329.468 46.624C326.492 44.128 322.46 42.88 317.372 42.88C312.668 42.88 308.924 43.888 306.14 45.904C303.356 47.92 301.964 50.56 301.964 53.824C301.964 56.416 302.78 58.576 304.412 60.304C306.14 61.936 308.252 63.28 310.748 64.336C313.34 65.296 316.892 66.4 321.404 67.648C327.068 69.184 331.676 70.72 335.228 72.256C338.78 73.696 341.804 75.904 344.3 78.88C346.892 81.856 348.236 85.744 348.332 90.544C348.332 94.864 347.132 98.752 344.732 102.208C342.332 105.664 338.924 108.4 334.508 110.416C330.188 112.336 325.196 113.296 319.532 113.296Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M382.814 43.888V90.4C382.814 94.24 383.63 96.976 385.262 98.608C386.894 100.144 389.726 100.912 393.758 100.912H403.406V112H391.598C384.302 112 378.83 110.32 375.182 106.96C371.534 103.6 369.71 98.08 369.71 90.4V43.888H359.486V33.088H369.71V13.216H382.814V33.088H403.406V43.888H382.814Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M414.387 72.256C414.387 64.192 416.019 57.136 419.283 51.088C422.547 44.944 427.011 40.192 432.675 36.832C438.435 33.472 444.819 31.792 451.827 31.792C458.739 31.792 464.739 33.28 469.827 36.256C474.915 39.232 478.707 42.976 481.203 47.488V33.088H494.451V112H481.203V97.312C478.611 101.92 474.723 105.76 469.539 108.832C464.451 111.808 458.499 113.296 451.683 113.296C444.675 113.296 438.339 111.568 432.675 108.112C427.011 104.656 422.547 99.808 419.283 93.568C416.019 87.328 414.387 80.224 414.387 72.256ZM481.203 72.4C481.203 66.448 480.003 61.264 477.603 56.848C475.203 52.432 471.939 49.072 467.811 46.768C463.779 44.368 459.315 43.168 454.419 43.168C449.523 43.168 445.059 44.32 441.027 46.624C436.995 48.928 433.779 52.288 431.379 56.704C428.979 61.12 427.779 66.304 427.779 72.256C427.779 78.304 428.979 83.584 431.379 88.096C433.779 92.512 436.995 95.92 441.027 98.32C445.059 100.624 449.523 101.776 454.419 101.776C459.315 101.776 463.779 100.624 467.811 98.32C471.939 95.92 475.203 92.512 477.603 88.096C480.003 83.584 481.203 78.352 481.203 72.4Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M586.58 33.088V112H573.476V100.336C570.98 104.368 567.476 107.536 562.964 109.84C558.548 112.048 553.652 113.152 548.276 113.152C542.132 113.152 536.612 111.904 531.716 109.408C526.82 106.816 522.932 102.976 520.052 97.888C517.268 92.8 515.876 86.608 515.876 79.312V33.088H528.836V77.584C528.836 85.36 530.804 91.36 534.74 95.584C538.676 99.712 544.052 101.776 550.868 101.776C557.876 101.776 563.396 99.616 567.428 95.296C571.46 90.976 573.476 84.688 573.476 76.432V33.088H586.58Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M621.809 47.776C624.497 43.072 628.433 39.232 633.617 36.256C638.801 33.28 644.705 31.792 651.329 31.792C658.433 31.792 664.817 33.472 670.481 36.832C676.145 40.192 680.609 44.944 683.873 51.088C687.137 57.136 688.769 64.192 688.769 72.256C688.769 80.224 687.137 87.328 683.873 93.568C680.609 99.808 676.097 104.656 670.337 108.112C664.673 111.568 658.337 113.296 651.329 113.296C644.513 113.296 638.513 111.808 633.329 108.832C628.241 105.856 624.401 102.064 621.809 97.456V112H608.705V5.43999H621.809V47.776ZM675.377 72.256C675.377 66.304 674.177 61.12 671.777 56.704C669.377 52.288 666.113 48.928 661.985 46.624C657.953 44.32 653.489 43.168 648.593 43.168C643.793 43.168 639.329 44.368 635.201 46.768C631.169 49.072 627.905 52.48 625.409 56.992C623.009 61.408 621.809 66.544 621.809 72.4C621.809 78.352 623.009 83.584 625.409 88.096C627.905 92.512 631.169 95.92 635.201 98.32C639.329 100.624 643.793 101.776 648.593 101.776C653.489 101.776 657.953 100.624 661.985 98.32C666.113 95.92 669.377 92.512 671.777 88.096C674.177 83.584 675.377 78.304 675.377 72.256Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M760.738 53.68V64.768H703.282V53.68H760.738Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M844.658 89.68H800.882L792.818 112H778.994L815.282 12.208H830.402L866.546 112H852.722L844.658 89.68ZM840.914 79.024L822.77 28.336L804.626 79.024H840.914Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M895.465 47.632C898.057 43.12 901.897 39.376 906.985 36.4C912.169 33.328 918.169 31.792 924.985 31.792C931.993 31.792 938.329 33.472 943.993 36.832C949.753 40.192 954.265 44.944 957.529 51.088C960.793 57.136 962.425 64.192 962.425 72.256C962.425 80.224 960.793 87.328 957.529 93.568C954.265 99.808 949.753 104.656 943.993 108.112C938.329 111.568 931.993 113.296 924.985 113.296C918.265 113.296 912.313 111.808 907.129 108.832C902.041 105.76 898.153 101.968 895.465 97.456V149.44H882.361V33.088H895.465V47.632ZM949.033 72.256C949.033 66.304 947.833 61.12 945.433 56.704C943.033 52.288 939.769 48.928 935.641 46.624C931.609 44.32 927.145 43.168 922.249 43.168C917.449 43.168 912.985 44.368 908.857 46.768C904.825 49.072 901.561 52.48 899.065 56.992C896.665 61.408 895.465 66.544 895.465 72.4C895.465 78.352 896.665 83.584 899.065 88.096C901.561 92.512 904.825 95.92 908.857 98.32C912.985 100.624 917.449 101.776 922.249 101.776C927.145 101.776 931.609 100.624 935.641 98.32C939.769 95.92 943.033 92.512 945.433 88.096C947.833 83.584 949.033 78.304 949.033 72.256Z",stroke:"white","stroke-width":"4"}),s.a.createElement("path",{d:"M992.778 47.632C995.37 43.12 999.21 39.376 1004.3 36.4C1009.48 33.328 1015.48 31.792 1022.3 31.792C1029.31 31.792 1035.64 33.472 1041.31 36.832C1047.07 40.192 1051.58 44.944 1054.84 51.088C1058.11 57.136 1059.74 64.192 1059.74 72.256C1059.74 80.224 1058.11 87.328 1054.84 93.568C1051.58 99.808 1047.07 104.656 1041.31 108.112C1035.64 111.568 1029.31 113.296 1022.3 113.296C1015.58 113.296 1009.63 111.808 1004.44 108.832C999.354 105.76 995.466 101.968 992.778 97.456V149.44H979.674V33.088H992.778V47.632ZM1046.35 72.256C1046.35 66.304 1045.15 61.12 1042.75 56.704C1040.35 52.288 1037.08 48.928 1032.95 46.624C1028.92 44.32 1024.46 43.168 1019.56 43.168C1014.76 43.168 1010.3 44.368 1006.17 46.768C1002.14 49.072 998.874 52.48 996.378 56.992C993.978 61.408 992.778 66.544 992.778 72.4C992.778 78.352 993.978 83.584 996.378 88.096C998.874 92.512 1002.14 95.92 1006.17 98.32C1010.3 100.624 1014.76 101.776 1019.56 101.776C1024.46 101.776 1028.92 100.624 1032.95 98.32C1037.08 95.92 1040.35 92.512 1042.75 88.096C1045.15 83.584 1046.35 78.304 1046.35 72.256Z",stroke:"white","stroke-width":"4"}))),s.a.createElement("div",{id:"app-container"},s.a.createElement(S,{suggestions:this.state.suggestions,onChange:this.handleSearchChange}),s.a.createElement("main",{className:e.main},s.a.createElement(l.a,{container:!0,style:{height:"100%"}},s.a.createElement(l.a,{item:!0,style:{width:400}},s.a.createElement(X,{logged_in:this.state.logged_in,sync_key:this.state.sync_key,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onShowSensorData:this.onShowSensorDataDialog,onEditSensor:this.onShowEditSensorDialog,onRemoveSensor:this.onShowRemoveSensorDialog,onSensorDetails:this.onShowDetailsDialog})),s.a.createElement(l.a,{item:!0},this.state.markerData&&s.a.createElement(T,{google:window.google,logged_in:this.state.logged_in,ownPosition:this.state.currentPosition,markerData:this.state.markerData,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onAddFavourite:this.onShowAddFavouriteDialog,onShowSensorData:this.onShowSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,style:{position:"absolute",top:0,bottom:0}}))),s.a.createElement(d.a,{style:{margin:0,paddingLeft:10,paddingRight:10,paddingTop:3,paddingBottom:3,right:20,top:80,position:"fixed",backgroundColor:"rgba(255,255,255,0.5)",cursor:"pointer"},onClick:()=>window.open("https://h2801469.stratoserver.net/stats.php","_blank")},s.a.createElement(c.a,null,this.state.markerData.length," ",E.sensors)),s.a.createElement(h.a,{color:"primary","aria-label":E.add_sensor,style:{margin:0,right:20,bottom:65,position:"fixed"},onClick:this.onShowAddSensorDialog},s.a.createElement(Mt.a,null)),this.state.dialog_add_sensor_open&&s.a.createElement(be,{opened:this.state.dialog_add_sensor_open,onClose:this.onHideAddSensorDialog,onSensorAdded:this.props.onHideAddSensorDialog,user_data:this.state.user_data,sync_key:this.state.sync_key,logged_in:this.state.logged_in}),void 0!==this.state.selected_id&&this.state.dialog_add_favourite_open&&s.a.createElement(Ee,{opened:this.state.dialog_add_favourite_open,onClose:this.onHideAddFavouriteDialog,sync_key:this.state.sync_key,user_data:this.state.user_data,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_data_open&&s.a.createElement(Qe,{opened:this.state.dialog_sensor_data_open,onClose:this.onHideSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,sensor:this.state.selected}),void 0!==this.state.selected&&this.state.dialog_edit_sensor_open&&s.a.createElement(Ge,{opened:this.state.dialog_edit_sensor_open,sync_key:this.state.sync_key,data:this.state.user_data,onClose:this.onHideEditSensorDialog,chip_id:this.state.selected.chip_id,name:this.state.selected.name,fav:this.state.selected.fav,color:this.state.selected.color}),void 0!==this.state.selected_id&&this.state.dialog_remove_sensor_open&&s.a.createElement(et,{opened:this.state.dialog_remove_sensor_open,sync_key:this.state.sync_key,user_data:this.state.user_data,onClose:this.onHideRemoveSensorDialog,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_details_open&&s.a.createElement(at,{opened:this.state.dialog_sensor_details_open,chip_id:this.state.selected.chip_id,name:this.state.selected.name,onClose:this.onHideDetailsDialog}),s.a.createElement(Nt.d,null,s.a.createElement(Nt.b,{path:"/s/:id",render:e=>s.a.createElement(Qe,{opened:this.state.dialog_sensor_data_route_open,onClose:this.onHideSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,sensor:{chip_id:e.match.params.id,name:E.unknown_sensor}})}),s.a.createElement(Nt.a,{strict:!0,from:"/",to:"."})),s.a.createElement(zt.a,{open:this.state.snackbar_success_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},s.a.createElement(Tt.a,{message:s.a.createElement("span",{style:{display:"flex",alignItems:"center"}},s.a.createElement(Lt.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[s.a.createElement(_.a,{key:"success",color:"inherit",onClick:this.onSnackbarClose},s.a.createElement(we.a,{style:{fontSize:20}}))],style:{backgroundColor:pe.a[600]}})),s.a.createElement(zt.a,{open:this.state.snackbar_error_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},s.a.createElement(Tt.a,{message:s.a.createElement("span",{style:{display:"flex",alignItems:"center"}},s.a.createElement(Ft.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[s.a.createElement(_.a,{key:"error",color:"inherit",onClick:this.onSnackbarClose},s.a.createElement(we.a,{style:{fontSize:20}}))],style:{backgroundColor:Ot.a[600]}}))),s.a.createElement(l.a,{container:!0,className:e.footer},s.a.createElement(c.a,{variant:"body2",color:"inherit",style:{marginTop:7},noWrap:!0},"\xa9 ChilliBits\xa0\xa0-\xa0\xa02018 - ",(new Date).getFullYear()),s.a.createElement(p.a,{variant:"outlined",color:"primary",href:"https://chillibits.com",target:"_blank",className:e.button_homepage},E.our_homepage),s.a.createElement(p.a,{variant:"outlined",color:"primary",href:"https://chillibits.com/pmapp",target:"_blank",className:e.button_info},E.info),s.a.createElement(p.a,{variant:"contained",color:"secondary",href:"https://play.google.com/store/apps/details?id=com.mrgames13.jimdo.feinstaubapp",target:"_blank",className:e.button_download},E.download_android_app))))))}}var jt=Object(r.a)(e=>({main:{flexGrow:1,display:"flex",position:"absolute",width:"100%",height:"calc(100% - 64px - 45px)",zIndex:1,top:64,overflow:"hidden"},footer:{position:"absolute",backgroundColor:"#32a087",height:45,paddingLeft:13,paddingRight:13,paddingTop:5,width:"100%",bottom:0,left:0,right:0},button_download:{position:"absolute",right:13},button_info:{position:"absolute",right:272},button_homepage:{position:"absolute",right:344}}),{withTheme:!0})(Wt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[429,1,2]]]);
//# sourceMappingURL=main.c1b4f50c.chunk.js.map