(window["webpackJsonpfeinstaub-app-web"]=window["webpackJsonpfeinstaub-app-web"]||[]).push([[0],{416:function(e,t,a){e.exports=a(836)},421:function(e,t,a){},836:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),i=a.n(r),s=(a(421),a(18)),l=a(16),c=a(20),d=a(21),h=a(28),u=a(22),p=a(4),m=a(896),g=a(180),_=a(81),f=a(923),b=a(895),v=a(12),y=a(890),E=a(893),k=a(841),w=a(88),C=a(894),S=a(365),O=new(a.n(S).a)({en:{app_name:"Particulate Matter App",action_successful:"Action completed successfully",sensor_added_successfully:"Sensor added successfully!",error_please_try_again:"Error! Please try again.",sensor_favourized:"Sensor favourized successfully!",favourization_failed_try_again:"Favourization failed! Please try again.",changings_saved:"Changings saved successfully!",changings_save_failed:"The changings could not be saved! Please try again.",sensor_removed_successfully:"Removed sensor successfully!",sensor_removal_failed:"Sensor removal failed! Please try again.",add_sensor:"Add sensor",unknown_sensor:"Unknown sensor",sensors:"sensors",our_homepage:"Our homepage",download_android_app:"Download android app",info:"Info",add_sensor_to_favourites:"Add sensor to favourites",display_name:"Display name",chip_id:"Chip id",cancel:"Cancel",ok:"OK",save:"Save",back:"Back",next:"Next",skip:"Skip",add_favourite:"Add favourite",error_add_sensor:"You entered a wrong chip id or the option 'Send to Feinstaub-App' is not enabled in the configuration of your sensor. After it is enabled, it can last up to 10 minutes until our server receives data from the sensor.",enter_chip_id:"Enter chip id",enter_chip_id_instruction_1:"Please enter the chip id of your sensor below. You can find the id in the configuration of your sensor. If you still not find the chip id, you can check out the entry on our",enter_chip_id_instruction_2:".",faq_site:"faq site",enter_base_data:"Enter base data",display_name_color_instruction:"Please choose a display name and a color for sensor within the diagrams",add_sensor_to_map:"Add sensor to the map",add_sensor_to_map_instruction_1:"To add your sensor to the map, you have to enter the exact location and the mounting height of the sensor <b>over the ground </b>.<br><b>HINT:</b> This values only can be changed afterwards, if you",add_sensor_to_map_instruction_2:".",contact:"send us an email",soon_available:"Soon available",latitude:"Latitude",longitude:"Longitude",mounting_height:"Mounting height (meters)",choose_location:"Choose location of sensor",edit_sensor:"Edit sensor",remove_sensor:"Remove sensor",remove_sensor_message_1:"Do you really want to remove the sensor with the chip id",remove_sensor_message_2:"? You could link it again at any time.",remove:"Remove",pm1:"PM10",pm2:"PM2.5",temperature:"Temperature",humidity:"Humidity",pressure:"Pressure",show_sensor_details:"Show sensor details",show_details:"Show details",close_window:"Close window",day_before:"Day before",day_after:"Day after",choose_another_date:"Choose another date",diagram:"Diagram",data_records:"Data records",time_of_day:"Time",measurement:"Measurement",show_pm1:"Show PM10 curve",show_pm2:"Show PM2.5 curve",show_temperature:"Show temperature curve",show_humidity:"Show humidity curve",show_pressure:"Show pressure curve",show_time:"Show measurement time",hide_dots:"Hide dots",enable_soft_curve:"Enable soft curve",enable_curve_smoothing:"Enable curve smoothing",zoom_of_diagram_:"Zoom of the diagram:",no_data:"No data existing",loading:"Loading ...",sensor_details:"Sensor details",public:"Public",online_since:"Online since",link_with_android_app:"Link with android app",link_instruction_1:"To synchronize your sensors and your favourites,",link_instruction_2:"start the Particulate Matter App.",link_instruction_3:"Three dots at the top right corner \u2192 'Web version'.",link_instruction_4:"Scan the qr code above.",show_measurements:"Show measurements",properties:"Properties",no_favourites:"No favourites existing yet. To add a favourite, click on a sonsor on the map and select 'Add favourite'.",no_own_sensors_1:"If you have an particulate matter sensor from",no_own_sensors_2:", you can link it here. Click on the '+' button in the right bottom corner on the page.",favourites:"My favourites",own_sensors:"Own sensors",loading_address:"Loading address ...",unknown_country:"Unknown country",unknown_city:"Unknown city",delete:"Delete",previous_page:"Previous page",next_page:"Next page"},de:{app_name:"Feinstaub-App",action_successful:"Die Aktion war erfolgreich!",sensor_added_successfully:"Sensor erfolgreich hinzugef\xfcgt!",error_please_try_again:"Fehler! Bitte versuchen Sie es erneut.",sensor_favourized:"Der Sensor wurde favorisiert!",favourization_failed_try_again:"Favorisieren fehlgeschlagen! Bitte versuchen Sie es erneut.",changings_saved:"\xc4nderungen erfolgreich gespeichert!",changings_save_failed:"Die \xc4nderungen konnten nicht gespeichert werden! Bitte versuchen Sie es erneut.",sensor_removed_successfully:"Sensor erfolgreich entfernt!",sensor_removal_failed:"Entfernen fehlgeschlagen! Bitte versuchen Sie es erneut.",add_sensor:"Sensor hinzuf\xfcgen",unknown_sensor:"Unbekannter Sensor",sensors:"Sensoren",our_homepage:"Unsere Homepage",download_android_app:"Android-App herunterladen",info:"Info",add_sensor_to_favourites:"Sensor zu Favoriten hinzuf\xfcgen",display_name:"Anzeigename",chip_id:"Chip-ID",cancel:"Abbrechen",ok:"OK",save:"Speichern",back:"Zur\xfcck",next:"Weiter",skip:"\xdcberspringen",add_favourite:"Favorit hinzuf\xfcgen",error_add_sensor:"Sie haben entweder die falsche Chip-ID angegeben oder in der Konfiguration Ihres Sensors ist die Option 'Senden an Feinstaub-App' nicht aktiviert. Nachdem die Option aktiviert ist, kann es bis zu 10 Minuten dauern, bis Daten auf dem Server ankommen.",enter_chip_id:"Chip-ID angeben",enter_chip_id_instruction_1:"Bitte geben Sie die Chip-ID Ihres Sensors in das Feld unten ein. Sie finden die ID in der Konfiguration Ihres Sensors. Falls Sie die Chip-ID dennoch nicht finden sollten, finden Sie auf unserer",enter_chip_id_instruction_2:"einen Eintrag",faq_site:"FAQ-Seite",enter_base_data:"Basisdaten angeben",display_name_color_instruction:"Bitte vergeben Sie f\xfcr Ihren Sensor einen Anzeigenamen und bestimmen Sie eine Farbe f\xfcr den Sensor innerhalb der Diagramme.",add_sensor_to_map:"Sensor auf die Karte bringen",add_sensor_to_map_instruction_1:"Um Ihren Sensor auf die Karte zu bekommen, m\xfcssen Sie die genaue Position des Sensors und die Montageh\xf6he \xfcber dem Boden angeben.\nHINWEIS: Diese Daten k\xf6nnen sp\xe4ter nur noch ge\xe4ndert werden, indem Sie per E-Mail mit uns in",add_sensor_to_map_instruction_2:"treten.",contact:"Kontakt",soon_available:"Bald verf\xfcgbar",latitude:"L\xe4ngengrad",longitude:"Breitengrad",mounting_height:"Montageh\xf6he (Meter)",choose_location:"Position des Sensors w\xe4hlen",edit_sensor:"Sensor bearbeiten",remove_sensor:"Sensor entfernen",remove_sensor_message_1:"Wollen Sie den Sensor mit der Chip-ID",remove_sensor_message_2:"wirklich entfernen? Sie k\xf6nnen ihn jederzeit wieder verkn\xfcpfen.",remove:"Entfernen",pm1:"PM10",pm2:"PM2,5",temperature:"Temperatur",humidity:"Luftfeuchtigkeit",pressure:"Luftdruck",show_sensor_details:"Sensordetails anzeigen",show_details:"Details anzeigen",close_window:"Fenster schlie\xdfen",day_before:"Tag davor",day_after:"Tag danach",choose_another_date:"Anderes Datum w\xe4hlen",diagram:"Diagramm",data_records:"Datens\xe4tze",time_of_day:"Uhrzeit",measurement:"Messwert",show_pm1:"PM10-Kurve anzeigen",show_pm2:"PM2,5-Kurve anzeigen",show_temperature:"Temperatur-Kurve anzeigen",show_humidity:"Luftfeuchtigkeit-Kurve anzeigen",show_pressure:"Luftdruck-Kurve anzeigen",show_time:"Messzeiten einblenden",hide_dots:"Punkte ausblenden",enable_soft_curve:"Weiche Kurve aktivieren",enable_curve_smoothing:"Kurvengl\xe4ttung aktivieren",zoom_of_diagram_:"Zoom des Diagrammes:",no_data:"Keine Daten vorhanden",loading:"Laden ...",sensor_details:"Sensor Details",public:"\xd6ffentlich",online_since:"Online seit",link_with_android_app:"Mit der Android-App verkn\xfcpfen",link_instruction_1:"Um Ihre Sensoren und Ihre Favouriten aus der App",link_instruction_2:"hier anzuzeigen, starten Sie die Feinstaub-App.",link_instruction_3:"Drei Punkte oben rechts \u2192 'Web-Version'.",link_instruction_4:"Scannen Sie den obigen QR-Code.",show_measurements:"Messwerte anzeigen",properties:"Eigenschaften",no_favourites:"Noch keine Favouriten vorhanden. Um Favoriten hinzuzuf\xfcgen, tippen Sie auf der Karte auf einen Sensor und w\xe4hlen Sie 'Favorit hinzuf\xfcgen'.",no_own_sensors_1:"Falls Sie einen eigenen Feinstaubsensor von",no_own_sensors_2:"haben, k\xf6nnen Sie ihn hier verkn\xfcpfen. Klicken Sie auf den '+'-Button ganz unten rechts auf der Seite.",favourites:"Meine Favouriten",own_sensors:"Meine Sensoren",loading_address:"Adresse wird geladen ...",unknown_country:"Unbekanntes Land",unknown_city:"Unbekannte Stadt",delete:"L\xf6schen",previous_page:"Vorherige Seite",next_page:"N\xe4chste Seite"}}),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){return function(e,t){var n=t.newValue;a.props.onChange(e,{newValue:n})}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(y.a,{position:"static"},o.a.createElement(E.a,null,o.a.createElement(k.a,{href:"#",className:e.menuButton,color:"inherit","aria-label":O.app_name},o.a.createElement(C.a,{alt:O.app_name,src:"../favicon.ico",className:e.avatar})),o.a.createElement(_.a,{className:e.title,variant:"h6",color:"inherit",noWrap:!0},O.app_name),o.a.createElement("div",{className:e.grow}))))}}]),t}(n.Component),x=Object(p.a)((function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(v.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(v.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(w.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(w.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(v.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:350}})}}))(D),j="AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc",P=a(109),M=a(244),A=a.n(M),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={markers:[],old_markerData:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{},selectedAddress:"",selectedMarkerLat:0,selectedMarkerLng:0,old_favourites:[],old_own_sensors:[]},a.onMarkerClick=function(e,t,n){var o=Object(h.a)(a);A.a.setApiKey(j),A.a.fromLatLng(t.position.lat(),t.position.lng()).then((function(e){a.setState({selectedAddress:o.getCountry(e.results[0].address_components)+", "+o.getCity(e.results[0].address_components)})}),(function(e){console.error(e)})),a.setState({selectedPlace:e,activeMarker:t,selectedMarkerLat:Math.round(1e3*t.position.lat())/1e3,selectedMarkerLng:Math.round(1e3*t.position.lng())/1e3,selectedAddress:O.loading_address,showingInfoWindow:!0})},a.getCountry=function(e){for(var t=0;t<e.length;t++){if("country"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return O.unknown_country},a.getCity=function(e){for(var t=0;t<e.length;t++){if("locality"===e[t].types[0]||"postal_town"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return O.unknown_city},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onShowSensorDataClicked=function(){var e={chip_id:a.state.activeMarker.name,name:a.state.selectedAddress,color:"#000000",fav:!1};a.props.onShowSensorData(e)},a.onAddFavouriteClicked=function(){a.props.onAddFavourite(a.state.activeMarker.name)},a.state.markers=a.props.markerData.map((function(e){return o.a.createElement(P.Marker,{key:e.i,icon:{url:"markers/blue.png"},title:e.i,name:e.i,onClick:a.onMarkerClick,position:{lat:e.l,lng:e.b}})})),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"onInfoWindowOpen",value:function(e,t){var a=o.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:this.onShowSensorDataClicked,style:{marginTop:5,width:210}},O.show_measurements);if(i.a.render(o.a.Children.only(a),document.getElementById("show_data")),this.props.logged_in){var n=o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.onAddFavouriteClicked,style:{marginTop:5,width:210}},O.add_favourite);i.a.render(o.a.Children.only(n),document.getElementById("add_favourite"))}}},{key:"render",value:function(){var e=this;return this.props.markerData===this.state.old_markerData&&this.props.favourites.length===this.state.old_favourites.length&&this.props.own_sensors.length===this.state.old_own_sensors.length||(this.state.markers=this.props.markerData.map((function(t){var a="markers/blue.png";return e.props.favourites.map((function(e){return e.chip_id===t.i&&(a="markers/red.png"),!0})),e.props.own_sensors.map((function(e){return e.chip_id===t.i&&(a="markers/green.png"),!0})),o.a.createElement(P.Marker,{key:t.i,icon:{url:a},title:t.i,name:t.i,onClick:e.onMarkerClick,position:{lat:t.l,lng:t.b}})})),this.setState({old_markerData:this.props.markerData,old_favourites:this.props.favourites,old_own_sensors:this.props.own_sensors})),o.a.createElement(P.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:7,initialCenter:{lat:this.props.ownPosition.lat,lng:this.props.ownPosition.lng}},this.state.markers,o.a.createElement(P.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onOpen:function(t){e.onInfoWindowOpen(e.props,t)}},o.a.createElement(g.a,{elevation:1,style:{width:210}},o.a.createElement("div",null,o.a.createElement(m.a,{container:!0},o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(C.a,null,o.a.createElement(fe,null))),o.a.createElement(m.a,{item:!0,xs:9},o.a.createElement(_.a,{variant:"body2",noWrap:!0},this.state.selectedPlace.name),o.a.createElement(_.a,{noWrap:!0},o.a.createElement("i",null,this.state.selectedMarkerLat,", ",this.state.selectedMarkerLng)))),o.a.createElement(_.a,null,this.state.selectedAddress),o.a.createElement("div",{id:"show_data",style:{height:50}}),this.props.logged_in&&o.a.createElement("div",{id:"add_favourite",style:{height:50}})))))}}]),t}(n.Component),T=Object(P.GoogleApiWrapper)({apiKey:"AIzaSyDs145s6rNrM2_yEhWs27gd4Q9RHbh4WSY",language:"de"})(z),I=a(3),F=a(367),L=a.n(F),B=a(368),R=a.n(B),N=a(369),W=a.n(N),H=a(370),K=a.n(H),q=a(926),U=a(902);function Y(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,r=e.ref,i=Object(I.a)(e,["classes","inputRef","ref"]);return o.a.createElement(q.a,Object.assign({fullWidth:!0,InputProps:{inputRef:function(e){r(e),n(e)},classes:{input:t.input},disableUnderline:!0}},i))}function V(e,t){var a=t.query,n=t.isHighlighted,r=W()(e.description,a),i=K()(e.description,r);return o.a.createElement(U.a,{selected:n,component:"div"},o.a.createElement("div",null,i.map((function(e,t){return e.highlight?o.a.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):o.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)}))))}function J(e,t){var a=e.suggestions,n=L()(t.trim()).toLowerCase(),o=n.length,r=0;return 0===o?[]:a.filter((function(e){var t=r<5&&e.description.slice(0,o).toLowerCase()===n;return t&&(r+=1),t}))}function G(e){return e.description}var Q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={single:"",popper:"",suggestions:[]},a.handleSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:J(a.props,t)})},a.handleSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.handleChange=function(e){return function(t,n){var o=n.newValue;a.props.onChange(t,{newValue:o}),a.setState(Object(v.a)({},e,o))}},a.handleEnterHit=function(e){console.log("Enter!"),"Enter"===e.key&&(e.preventDefault(),console.log("Enter!"))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t={renderInputComponent:Y,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,getSuggestionValue:G,renderSuggestion:V};return o.a.createElement("div",{className:e.root},o.a.createElement(R.a,Object.assign({onKeyPress:this.handleEnterHit},t,{inputProps:{classes:e,placeholder:this.props.placeholder,value:this.state.single,onChange:this.handleChange("single")},theme:{container:e.container,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderSuggestionsContainer:function(e){return o.a.createElement(g.a,Object.assign({},e.containerProps,{style:{zIndex:3},square:!0}),e.children)}})))}}]),t}(o.a.Component),Z=(Object(p.a)((function(e){return{root:{height:40,flexGrow:1},container:{position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit},input:{display:"flex"}}}))(Q),a(925)),X=a(904),$=a(901),ee=a(843),te=a(903),ae=a(394),ne=a(172),oe=a.n(ne),re=a(372),ie=a.n(re),se=a(245),le=a.n(se),ce=a(371),de=a.n(ce),he=a(107),ue="undefined"!==typeof InstallTrigger;function pe(e){var t=e.children,a=e.dir;return o.a.createElement(_.a,{component:"div",dir:a},t)}var me=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={sync_key:a.props.sync_key,favourites:a.props.favourites,own_sensors:a.props.own_sensors,clicked:void 0,anchorEl:null,page:0},a.handlePageChange=function(e,t){a.setState({page:t})},a.handleMenuClick=function(e,t){e.stopPropagation(),e.preventDefault(),a.setState({clicked:t,anchorEl:e.currentTarget})},a.handleMenuClose=function(e,t){0===e?a.setState({clicked:void 0,anchorEl:null}):1===e?(a.props.onShowSensorData(t),a.setState({clicked:void 0,anchorEl:null})):2===e?(a.props.onEditSensor(t),a.setState({clicked:void 0,anchorEl:null})):3===e?(a.props.onRemoveSensor(t.chip_id),a.setState({clicked:void 0,anchorEl:null})):4===e&&(a.props.onSensorDetails(t),a.setState({clicked:void 0,anchorEl:null}))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme;return o.a.createElement("div",{style:{height:"100%"}},!1===this.props.logged_in&&o.a.createElement(he.Scrollbars,null,o.a.createElement("div",{className:a.container},o.a.createElement(C.a,{className:a.qr_container},o.a.createElement("div",{style:{backgroundColor:"#FFF",padding:10,borderRadius:10}},o.a.createElement(de.a,{value:this.state.sync_key,size:210,logo:"https://map.h2801469.stratoserver.net/qr_icon.png",logoWidth:70}))),o.a.createElement(_.a,{variant:"h6",style:ue?{position:"absolute",marginTop:450,color:"#3F51B5"}:{position:"absolute",marginTop:230,color:"#3F51B5"},gutterBottom:!0},o.a.createElement("b",null,O.link_with_android_app)),o.a.createElement(_.a,{variant:"subtitle1",style:ue?{position:"absolute",marginTop:560,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:290,color:"#666",textAlign:"center"},gutterBottom:!0},O.link_instruction_1,o.a.createElement("br",null),O.link_instruction_2),o.a.createElement(_.a,{variant:"subtitle1",style:ue?{position:"absolute",marginTop:690,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:360,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("i",{style:{color:"#3F51B5"}},O.link_instruction_3)),o.a.createElement(_.a,{variant:"subtitle1",style:ue?{position:"absolute",marginTop:800,color:"#666",textAlign:"center",marginBottom:30}:{position:"absolute",marginTop:415,color:"#666",textAlign:"center",marginBottom:30},gutterBottom:!0},O.link_instruction_4))),this.props.logged_in&&o.a.createElement("div",{style:{height:"calc(100% - 8px)"}},o.a.createElement(he.Scrollbars,{style:{height:"calc(100% - 64px)"}},o.a.createElement(oe.a,{axis:"x",index:this.state.page,onChangeIndex:this.handlePageChange,animateHeight:!0},o.a.createElement(pe,{style:{overflow:"auto"},dir:r.direction},this.props.favourites.length>0&&o.a.createElement($.a,{style:{overflow:"auto"}},this.props.favourites.map((function(t){return o.a.createElement(n.Fragment,null,o.a.createElement(ee.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},o.a.createElement(C.a,{style:{backgroundColor:t.color,marginRight:15}},o.a.createElement(fe,null)),o.a.createElement(te.a,{primary:t.name,secondary:t.chip_id}),o.a.createElement(k.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},o.a.createElement(le.a,null))),void 0!==e.state.clicked&&o.a.createElement(ae.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(1,t)}},O.show_measurements),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(2,t)}},O.edit_sensor),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(3,t)}},O.remove_sensor),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(4,t)}},O.properties)))}),this)),0===this.props.favourites.length&&o.a.createElement(n.Fragment,null,o.a.createElement(C.a,{src:"/images/star_impossible.png",style:{width:250,height:250,marginLeft:60,marginTop:50,padding:15}}),o.a.createElement(_.a,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:40,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("b",null,O.no_favourites)))),o.a.createElement(pe,{style:{overflow:"auto"},dir:r.direction},this.props.own_sensors.length>0&&o.a.createElement($.a,{style:{overflow:"auto"}},this.props.own_sensors.map((function(t){return o.a.createElement(n.Fragment,null,o.a.createElement(ee.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},o.a.createElement(C.a,{style:{backgroundColor:t.color,marginRight:15}},o.a.createElement(fe,null)),o.a.createElement(te.a,{primary:t.name,secondary:t.chip_id}),o.a.createElement(k.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},o.a.createElement(le.a,null))),void 0!==e.state.clicked&&o.a.createElement(ae.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(1,t)}},O.show_measurements),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(2,t)}},O.edit_sensor),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(3,t)}},O.remove_sensor),o.a.createElement(U.a,{onClick:function(){return e.handleMenuClose(4,t)}},O.properties)))}),this)),0===this.props.own_sensors.length&&o.a.createElement(n.Fragment,null,o.a.createElement(C.a,{src:"/images/sensor_large.png",style:{width:200,height:200,marginLeft:85,marginTop:75,padding:15}}),o.a.createElement(_.a,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:65,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("b",null,O.no_own_sensors_1," ",o.a.createElement("a",{href:"https://luftdaten.info/feinstaubsensor-bauen/",target:"blank"},"www.luftdaten.info")," ",O.no_own_sensors_2)))))),o.a.createElement(Z.a,{value:this.state.page,onChange:this.handlePageChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},o.a.createElement(X.a,{icon:o.a.createElement(ie.a,null),label:O.favourites}),o.a.createElement(X.a,{icon:o.a.createElement(fe,null),label:O.own_sensors}))))}}]),t}(n.Component),ge=Object(p.a)((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},qr_container:{width:330,height:330,marginTop:40,backgroundColor:"#3F51B5"}}}),{withTheme:!0})(me),_e=a(170),fe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(_e.a,null,o.a.createElement("path",{d:"M22,9L22,7h-2L20,5c0,-1.1 -0.9,-2 -2,-2L4,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2v-2h2v-2h-2v-2h2v-2h-2L20,9h2zM18,19L4,19L4,5h14v14zM6,13h5v4L6,17zM12,7h4v3h-4zM6,7h5v5L6,12zM12,11h4v6h-4z"}))}}]),t}(n.Component),be=a(58),ve=a.n(be),ye=a(930),Ee=a(906),ke=a(905),we=a(933),Ce=a(907),Se=a(928),Oe=a(934),De=a(908),xe=a(935),je=a(106),Pe=a(173),Me=a.n(Pe),Ae=a(240),ze=a.n(Ae),Te=(a(646),ze.a.initializeApp({apiKey:"AIzaSyBcaCFA3uJQ7WrjRflWoIdQFhuFmqBEmcI",authDomain:"feinstaub-app-web.firebaseapp.com",databaseURL:"https://feinstaub-app-web.firebaseio.com",projectId:"feinstaub-app-web",storageBucket:"feinstaub-app-web.appspot.com",messagingSenderId:"985064412726"})),Ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={active_step:1,chip_id:"",next_disabled:!0,loading:!1,chip_id_error:!1,error_desc:"",sensor_name:"",color:"",lat:"",lng:"",alt:"",location_picker_open:!1},a.handleNext=function(e){if(1===e){a.setState({loading:!0});var t=Object(h.a)(a);ve.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensordataexisting",chip_id:a.state.chip_id}).end((function(e,a){"true"===a.text.trim()?t.setState({loading:!1,active_step:2,next_disabled:!0}):t.setState({loading:!1,chip_id_error:!0,next_disabled:!0,error_desc:O.error_add_sensor})}))}else 3===e?a.addSensor():a.setState({active_step:a.state.active_step+1,next_disabled:!0})},a.handleBack=function(){a.setState({active_step:a.state.active_step-1})},a.chipIDChange=function(e){var t=0===e.target.value.length;a.setState({chip_id:e.target.value,chip_id_error:!1,error_desc:"",next_disabled:t})},a.nameChange=function(e){var t=0===e.target.value.length||""===a.state.color;a.setState({sensor_name:e.target.value,next_disabled:t})},a.colorChange=function(e,t){var n=0===a.state.sensor_name.length;a.setState({color:e.hex,next_disabled:n})},a.chooseLocation=function(){a.setState({location_picker_open:!0})},a.locationChange=function(e,t){console.log(t),console.log(e),a.setState({location_picker_open:!1})},a.latChanged=function(e){var t=0===e.target.value.length||0===a.state.lng.length||0===a.state.alt.length;a.setState({lat:e.target.value,next_disabled:t})},a.lngChanged=function(e){var t=0===a.state.lat.length||0===e.target.value.length||0===a.state.alt.length;a.setState({lng:e.target.value,next_disabled:t})},a.altChanged=function(e){var t=0===a.state.lat.length||0===a.state.lng.length||0===e.target.value.length;a.setState({alt:e.target.value,next_disabled:t})},a.addSensor=function(){if(a.setState({loading:!0}),a.props.logged_in){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};Te.database().ref("sync/"+a.props.sync_key).set(n)}var o=Object(h.a)(a);ve.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"addsensor",chip_id:a.state.chip_id,lat:a.state.lat,lng:a.state.lng,alt:a.state.alt}).end((function(e,t){var a=t.text.trim();console.log(a),0===a&&(a=2),o.props.onClose(parseInt(a))}))},a.addSensorPrivate=function(){a.setState({loading:!0});var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};Te.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(n.Fragment,null,o.a.createElement(ye.a,{open:this.props.opened,fullWidth:!0,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ke.a,{id:"alert-dialog-title"},O.add_sensor),o.a.createElement(Ee.a,null,o.a.createElement(we.a,{activeStep:this.state.active_step-1,orientation:"vertical"},o.a.createElement(Ce.a,{key:O.enter_chip_id},o.a.createElement(Se.a,null,O.enter_chip_id),o.a.createElement(Oe.a,null,o.a.createElement("div",null,o.a.createElement(_.a,null,O.enter_chip_id_instruction_1," ",o.a.createElement("a",{href:"https://mrgames13.jimdo.com/feinstaub-app/faq/#6",target:"blank"},O.faq_site)," ",O.enter_chip_id_instruction_2),o.a.createElement(q.a,{value:this.state.chip_id,label:O.chip_id,type:"number",error:this.state.chip_id_error,onChange:this.chipIDChange,variant:"outlined",style:{marginTop:15}}),""!==this.state.error_desc&&o.a.createElement(_.a,{color:"error",style:{marginTop:15}},this.state.error_desc)),o.a.createElement(b.a,{disabled:!0,onClick:this.handleBack,style:{marginTop:15,marginRight:15}},O.back),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(b.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(1)}},O.next),this.state.loading&&o.a.createElement(De.a,{size:24,style:{marginTop:0},className:t.buttonProgress})))),o.a.createElement(Ce.a,{key:O.enter_base_data},o.a.createElement(Se.a,null,O.enter_base_data),o.a.createElement(Oe.a,null,o.a.createElement("div",null,o.a.createElement(_.a,null,O.display_name_color_instruction),o.a.createElement(q.a,{label:O.display_name,value:this.state.sensor_name,style:{width:360,marginTop:15,marginBottom:15},onChange:this.nameChange,variant:"outlined"}),o.a.createElement(je.CirclePicker,{color:this.state.color,width:"380px",onChangeComplete:this.colorChange})),o.a.createElement(b.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},O.back),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(b.a,{variant:"contained",color:"primary",disabled:this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(2)}},O.next)))),o.a.createElement(Ce.a,{key:O.add_sensor_to_map},o.a.createElement(Se.a,null,O.add_sensor_to_map),o.a.createElement(Oe.a,null,o.a.createElement("div",null,o.a.createElement(_.a,null,O.add_sensor_to_map_instruction_1," ",o.a.createElement("a",{href:"mailto:mrgames@outlook.de"},O.contact)," ",O.add_sensor_to_map_instruction_2),o.a.createElement(xe.a,{title:O.soon_available},o.a.createElement(b.a,{variant:"outlined",color:"primary",_onClick:this.chooseLocation,style:{margin:10,width:440}},O.choose_location)),o.a.createElement("span",null,o.a.createElement(q.a,{label:O.latitude,style:{margin:10},type:"number",onChange:this.latChanged,variant:"outlined"}),o.a.createElement(q.a,{label:O.longitude,style:{margin:10},type:"number",onChange:this.lngChanged,variant:"outlined"})),o.a.createElement(q.a,{label:O.mounting_height,style:{margin:10},type:"number",onChange:this.altChanged,variant:"outlined"})),o.a.createElement(b.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},O.back),this.props.logged_in&&o.a.createElement(b.a,{variant:"outlined",onClick:this.addSensorPrivate,style:{marginTop:15,marginRight:15}},O.skip),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(b.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(3)}},O.add_sensor),this.state.loading&&o.a.createElement(De.a,{size:24,style:{marginTop:0},className:t.buttonProgress}))))))),this.state.location_picker_open&&o.a.createElement(Ot,{onChoose:this.locationChange}))}}]),t}(o.a.Component),Fe=Object(p.a)((function(e){return{buttonProgress:{position:"absolute",color:Me.a[500],top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}))(Ie),Le=a(909),Be=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",color:void 0,button_disabled:!0},a.onAddFavourite=function(){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.props.chip_id,color:a.state.color,fav:!0,name:a.state.name});var n={time:e,device:"web",data:t};Te.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose()},a.onNameChanged=function(e){var t=0===e.target.value.length||void 0===a.state.color;a.setState({name:e.target.value,button_disabled:t})},a.onColorChanged=function(e,t){a.setState({color:e.hex,button_disabled:0===a.state.name.length})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(ye.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"dialog-title"},o.a.createElement(ke.a,{id:"dialog-title"},O.add_sensor_to_favourites),o.a.createElement("div",{className:e.dialog_content},o.a.createElement("p",null,o.a.createElement(q.a,{label:O.display_name,style:{width:"320px"},onChange:this.onNameChanged,variant:"outlined"})),o.a.createElement("p",null,o.a.createElement(q.a,{label:O.chip_id,disabled:!0,value:this.props.chip_id,style:{width:"320px"},variant:"outlined"})),o.a.createElement(je.CirclePicker,{color:this.state.color,width:"340px",onChangeComplete:this.onColorChanged})),o.a.createElement(Le.a,null,o.a.createElement(b.a,{onClick:this.props.onClose,color:"primary"},O.cancel),o.a.createElement(b.a,{onClick:this.onAddFavourite,color:"primary",disabled:this.state.button_disabled,autoFocus:!0},O.add_favourite)))}}]),t}(o.a.Component),Re=Object(p.a)((function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}}))(Be),Ne=a(911),We=a(130),He=a.n(We),Ke=a(910),qe=a(912),Ue=a(913),Ye=a(251),Ve=a(392),Je=a(393),Ge=a(376),Qe=a.n(Ge),Ze=a(247),Xe=a.n(Ze),$e=a(378),et=a.n($e),tt=a(129),at=a.n(tt),nt=a(374),ot=a(379),rt=a.n(ot),it=a(915),st=a(929),lt=a(916),ct=0;function dt(e){var t=e.children,a=e.dir;return o.a.createElement(_.a,{component:"div",dir:a,style:{padding:24}}," ",t," ")}function ht(e){return o.a.createElement(Ke.a,Object.assign({direction:"up"},e))}function ut(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var pt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={data:void 0,data_pm10:[],data_pm2_5:[],data_temp:[],data_humidity:[],data_pressure:[],data_graph:[],loading:!0,picker:null,open:!1,value:0,default_date:new Date,selected_date:new Date,dialog_details_open:!1,current_zoom:1e4,enabled_pm10:!0,enabled_pm2_5:!0,enabled_temp:!1,enabled_humidity:!1,enabled_pressure:!1},a.loadSensorData=function(){a.setState({loading:!0});var e=Object(h.a)(a);ct=0;var t=a.state.selected_date;t.setHours(0,0,0,0);var n=new Date(t.getTime()+864e5);ve.a.post("https://h2801469.stratoserver.net/get.php").set("Content-Type","application/x-www-form-urlencoded").send({id:a.props.sensor.chip_id,from:t.getTime()/1e3,to:n.getTime()/1e3,minimize:!0,with_gps:!1,with_note:!1}).end((function(t,a){var n=a.text.trim(),o=JSON.parse(n),r=[],i=[],s=[],l=[],c=[],d=[],h=[];o.map((function(e,t){var a=new Date(1e3*e.time);r.push(function(e,t,a,n,o,r){return{id:ct+=1,time:e,pm1:t,pm2:a,temp:n,humidity:o,pressure:r}}(at()(1e3*e.time).format("HH:mm:ss"),e.p1,e.p2,ut(e.t,1),ut(e.h,1),ut(e.p/100,2)));var n=parseFloat(e.p1),o=parseFloat(e.p2),i=parseFloat(ut(e.t,1)),u=parseFloat(ut(e.h,1)),p=parseFloat(ut(e.p/100,2));s.push({x:a,y:n}),l.push({x:a,y:o}),c.push({x:a,y:i}),d.push({x:a,y:u}),h.push({x:a,y:p})})),e.state.enabled_pm10&&i.push({id:O.pm1,color:"hsl(353, 70%, 50%)",data:s}),e.state.enabled_pm2_5&&i.push({id:O.pm2,color:"hsl(87, 70%, 50%)",data:l}),e.state.enabled_temp&&i.push({id:O.temperature,color:"hsl(183, 70%, 50%)",data:c}),e.state.enabled_humidity&&i.push({id:O.humidity,color:"hsl(281, 70%, 50%)",data:d}),e.state.enabled_pressure&&i.push({id:O.pressure,color:"hsl(61, 70%, 50%)",data:h}),e.setState({data:r,data_graph:i,data_pm10:s,data_pm2_5:l,data_temp:c,data_humidity:d,data_pressure:h,loading:!1})}))},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.showDetails=function(){a.props.onOpenDetails(a.props.sensor)},a.handleTabChange=function(e,t){a.setState({value:t})},a.handleTabChangeIndex=function(e){a.setState({value:e})},a.openPicker=function(){a.picker.open()},a.minusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()-864e5))}),a.loadSensorData()},a.plusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()+864e5))}),a.loadSensorData()},a.handleDateChange=function(e){a.setState({selected_date:e}),a.loadSensorData()},a.onZoomChange=function(e,t){a.setState({current_zoom:t})},a.onCheckedChange=function(e){return function(t){var n,o=[];"enabled_pm10"===e&&t.target.checked?o.push({id:O.pm1,color:"hsl(353, 70%, 50%)",data:a.state.data_pm10}):"enabled_pm10"!==e&&a.state.enabled_pm10&&o.push({id:O.pm1,color:"hsl(353, 70%, 50%)",data:a.state.data_pm10}),"enabled_pm2_5"===e&&t.target.checked?o.push({id:O.pm2,color:"hsl(87, 70%, 50%)",data:a.state.data_pm2_5}):"enabled_pm2_5"!==e&&a.state.enabled_pm2_5&&o.push({id:O.pm2,color:"hsl(87, 70%, 50%)",data:a.state.data_pm2_5}),"enabled_temp"===e&&t.target.checked?o.push({id:O.temperature,color:"hsl(183, 70%, 50%)",data:a.state.data_temp}):"enabled_temp"!==e&&a.state.enabled_temp&&o.push({id:O.temperature,color:"hsl(183, 70%, 50%)",data:a.state.data_temp}),"enabled_humidity"===e&&t.target.checked?o.push({id:O.humidity,color:"hsl(281, 70%, 50%)",data:a.state.data_humidity}):"enabled_humidity"!==e&&a.state.enabled_humidity&&o.push({id:O.humidity,color:"hsl(281, 70%, 50%)",data:a.state.data_humidity}),"enabled_pressure"===e&&t.target.checked?o.push({id:O.pressure,color:"hsl(61, 70%, 50%)",data:a.state.data_pressure}):"enabled_pressure"!==e&&a.state.enabled_pressure&&o.push({id:O.pressure,color:"hsl(61, 70%, 50%)",data:a.state.data_pressure}),a.setState((n={},Object(v.a)(n,e,t.target.checked),Object(v.a)(n,"data_graph",o),n))}},a.loadSensorData(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme;return o.a.createElement(ye.a,{fullScreen:!0,open:this.props.opened,onClose:this.props.onClose,TransitionComponent:ht},o.a.createElement(y.a,{className:a.appBar},o.a.createElement(E.a,null,o.a.createElement(xe.a,{title:O.show_sensor_details},o.a.createElement(k.a,{color:"inherit",onClick:this.showDetails,"aria-label":O.show_details},o.a.createElement(fe,null))),o.a.createElement(_.a,{variant:"h6",color:"inherit",className:a.flex},this.props.sensor.name," - ChipID: ",this.props.sensor.chip_id),o.a.createElement(xe.a,{title:O.close_window},o.a.createElement(k.a,{color:"inherit",onClick:this.props.onClose},o.a.createElement(He.a,null))))),this.state.loading&&o.a.createElement(Ne.a,null),o.a.createElement(qe.a,{className:a.card},o.a.createElement(Ue.a,{className:a.card_content},o.a.createElement(xe.a,{title:O.day_before},o.a.createElement(k.a,{onClick:this.minusDay},o.a.createElement(Qe.a,null))),o.a.createElement(Ye.b,{utils:Ve.a,locale:Je.a},o.a.createElement(Ye.a,{value:this.state.selected_date,onChange:this.handleDateChange,className:a.date_selection,showTodayButton:!0,disableFuture:!0,cancelLabel:"Abbrechen",todayLabel:"Heute",okLabel:"OK",invalidLabel:"Ung\xfcltige Eingabe",format:"dd.MM.yyyy",ref:function(t){e.picker=t}})),o.a.createElement(xe.a,{title:O.choose_another_date},o.a.createElement(k.a,{onClick:this.openPicker},o.a.createElement(et.a,null))),this.state.selected_date>=this.state.default_date&&o.a.createElement(xe.a,{title:O.day_after},o.a.createElement(k.a,{onClick:this.plusDay,disabled:!0},o.a.createElement(Xe.a,{disabled:!0}))),this.state.selected_date<this.state.default_date&&o.a.createElement(xe.a,{title:O.day_after},o.a.createElement(k.a,{onClick:this.plusDay},o.a.createElement(Xe.a,null))))),o.a.createElement(y.a,{position:"static",color:"default"},o.a.createElement(Z.a,{value:this.state.value,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(X.a,{label:O.diagram}),o.a.createElement(X.a,{label:O.data_records}))),o.a.createElement(he.Scrollbars,null,o.a.createElement(oe.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleTabChangeIndex,style:{overflowX:"hidden"},animateHeight:!0},o.a.createElement(dt,{dir:r.direction,style:{overflowX:"hidden"}},o.a.createElement(he.Scrollbars,{style:{height:600,overflowX:"hidden"}},this.state.data_graph!==[]&&o.a.createElement("div",{style:{height:590,width:this.state.current_zoom}},o.a.createElement(nt.ResponsiveLine,{data:this.state.data_graph,margin:{top:10,right:50,bottom:40,left:30},xScale:{type:"time",format:"native",precision:"minute"},yScale:{type:"linear",stacked:!1,min:"auto",max:"auto"},curve:this.state.smooth_curve?this.state.basis_curve?"basis":"cardinal":"linear",axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:O.time_of_day,legendOffset:35,format:"%H:%m",legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:O.measurement,legendOffset:-40,legendPosition:"middle"},colors:"category10",lineWidth:1,dotSize:this.state.disable_dots?0:5,dotColor:"inherit:darker(0.3)",enableDotLabel:!0,dotLabel:this.state.enable_time?function(e){return"".concat(at()(e.x).format("HH:mm"),"")}:"",dotLabelYOffset:-12,dotBorderWidth:0,animate:!1,motionStiffness:90,motionDamping:15,legends:[{anchor:"bottom-right",direction:"row",justify:!1,translateX:25,translateY:40,itemsSpacing:10,itemDirection:"left-to-right",itemWidth:100,itemHeight:18,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))),o.a.createElement(it.a,{control:o.a.createElement(st.a,{checked:this.state.enabled_pm10,onChange:this.onCheckedChange("enabled_pm10"),value:"pm10",color:"primary"}),label:O.show_pm1}),o.a.createElement(it.a,{control:o.a.createElement(st.a,{checked:this.state.enabled_pm2_5,onChange:this.onCheckedChange("enabled_pm2_5"),value:"pm2_5",color:"primary"}),label:O.show_pm2}),o.a.createElement(it.a,{control:o.a.createElement(st.a,{checked:this.state.enabled_temp,onChange:this.onCheckedChange("enabled_temp"),value:"temp",color:"primary"}),label:O.show_temperature}),o.a.createElement(it.a,{control:o.a.createElement(st.a,{checked:this.state.enabled_humidity,onChange:this.onCheckedChange("enabled_humidity"),value:"humidity",color:"primary"}),label:O.show_humidity}),o.a.createElement(it.a,{control:o.a.createElement(st.a,{checked:this.state.enabled_pressure,onChange:this.onCheckedChange("enabled_pressure"),value:"pressure",color:"primary"}),label:O.show_pressure}),o.a.createElement(_.a,{variant:"h6"},O.zoom_of_diagram_),o.a.createElement("br",null),o.a.createElement(rt.a,{value:this.state.current_zoom,onChange:this.onZoomChange,min:1e3,max:3e4,step:1e3}),o.a.createElement("br",null),o.a.createElement(it.a,{control:o.a.createElement(lt.a,{checked:this.state.enable_time,onChange:this.onCheckedChange("enable_time"),color:"primary"}),label:O.show_time}),o.a.createElement(it.a,{control:o.a.createElement(lt.a,{checked:this.state.disable_dots,onChange:this.onCheckedChange("disable_dots"),color:"primary"}),label:O.hide_dots}),o.a.createElement(it.a,{control:o.a.createElement(lt.a,{checked:this.state.smooth_curve,onChange:this.onCheckedChange("smooth_curve"),color:"primary"}),label:O.enable_soft_curve}),this.state.smooth_curve&&o.a.createElement(it.a,{control:o.a.createElement(lt.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary"}),label:O.enable_curve_smoothing}),!this.state.smooth_curve&&o.a.createElement(it.a,{control:o.a.createElement(lt.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary",disabled:!0}),label:O.enable_curve_smoothing})),o.a.createElement(dt,{dir:r.direction},this.state.data&&o.a.createElement(Ut,{data:this.state.data}),void 0===this.state.data&&o.a.createElement(n.Fragment,null,O.no_data)))))}}]),t}(o.a.Component),mt=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500},appBar:{position:"relative"},flex:{flex:1},card:{minWidth:275,margin:15},card_content:{height:50,padding:5},date_selection:{marginTop:10}}}),{withTheme:!0})(pt),gt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:a.props.name,color:a.props.color,error:!1},a.nameChanged=function(e){var t=0===e.target.value.length;a.setState({name:e.target.value,error:t})},a.colorChanged=function(e,t){a.setState({color:e.hex})},a.saveChangings=function(){var e=Math.floor(Date.now()),t=[];a.props.data.map((function(e){return e.chip_id===a.props.chip_id?t.push({chip_id:a.props.chip_id,color:a.state.color,fav:a.props.fav,name:a.state.name}):t.push(e),!0}));var n={time:e,device:"web",data:t};Te.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(ye.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ke.a,{id:"alert-dialog-title"},O.edit_sensor),o.a.createElement("div",{className:e.dialog_content},o.a.createElement("p",null,o.a.createElement(q.a,{label:O.display_name,value:this.state.name,style:{width:"320px"},onChange:this.nameChanged,variant:"outlined"})),o.a.createElement("p",null,o.a.createElement(q.a,{label:O.chip_id,value:this.props.chip_id,style:{width:"320px"},variant:"outlined",disabled:!0})),o.a.createElement(je.CirclePicker,{colors:[this.props.color,"#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],color:this.state.color,width:"340px",onChangeComplete:this.colorChanged})),o.a.createElement(Le.a,null,o.a.createElement(b.a,{onClick:this.props.onClose,color:"primary"},O.cancel),o.a.createElement(b.a,{onClick:this.saveChangings,color:"primary",disabled:this.state.error,autoFocus:!0},O.save)))}}]),t}(o.a.Component),_t=Object(p.a)((function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}}))(gt),ft=a(917),bt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onRemove=function(){var e=Math.floor(Date.now()),t=[];a.props.user_data.map((function(e){return e.chip_id!==a.props.chip_id&&t.push(e),!0}));var n={time:e,device:"web",data:t};Te.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(ye.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ke.a,{id:"alert-dialog-title"},O.remove_sensor),o.a.createElement(Ee.a,null,o.a.createElement(ft.a,{id:"alert-dialog-description"},O.remove_sensor_message_1," ",o.a.createElement("b",null,this.props.chip_id)," ",O.remove_sensor_message_2)),o.a.createElement(Le.a,null,o.a.createElement(b.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},O.cancel),o.a.createElement(b.a,{onClick:this.onRemove,color:"primary"},O.remove)))}}]),t}(o.a.Component),vt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={public:!1,creation_date:O.loading,lat:O.loading,lng:O.loading,alt:O.loading},a.loadSensorDetails=function(){var e=Object(h.a)(a);ve.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensorexisting",chip_id:a.props.chip_id}).end((function(t,a){"1"===a.text.trim()?ve.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getsensorinfo",chip_id:e.props.chip_id}).end((function(t,a){var n=a.text.trim(),o=JSON.parse(n)[0],r=o.alt+"m";e.setState({creation_date:at.a.unix(o.creation_date).format("DD.MM.YYYY"),public:!0,lat:o.lat,lng:o.lng,alt:r})})):e.setState({creation_date:"-",public:!1,lat:"-",lng:"-",alt:"-"})}))},a.loadSensorDetails(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(ye.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ke.a,{id:"alert-dialog-title"},O.sensor_details),o.a.createElement(Ee.a,null,o.a.createElement("table",{width:"350"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.display_name,":")),o.a.createElement("td",{align:"right"},this.props.name)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.chip_id,":")),o.a.createElement("td",{align:"right"},this.props.chip_id)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.public,":")),o.a.createElement("td",{align:"right"},this.state.public?"Ja":"Nein")),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.public,":")),o.a.createElement("td",{align:"right"},this.state.creation_date)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.latitude,":")),o.a.createElement("td",{align:"right"},this.state.lat)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.longitude,":")),o.a.createElement("td",{align:"right"},this.state.lng)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,O.mounting_height,":")),o.a.createElement("td",{align:"right"},this.state.alt))))),o.a.createElement(Le.a,null,o.a.createElement(b.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},O.ok)))}}]),t}(o.a.Component),yt=a(382),Et=a.n(yt),kt=a(380),wt=a.n(kt);function Ct(e){return o.a.createElement(Ke.a,Object.assign({direction:"up"},e))}var St=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={adress:"",position:{lat:0,lng:0}},a.onClose=function(){a.props.onChoose(a.state.position,a.state.address)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleLocationChange",value:function(e){var t=e.position,a=e.address;this.setState({position:t,address:a})}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(ye.a,{fullScreen:!0,open:!0,onClose:this.onClose,TransitionComponent:Ct},o.a.createElement(y.a,{className:e.appBar},o.a.createElement(E.a,null,o.a.createElement(_.a,{variant:"h6",color:"inherit",className:e.flex}," W\xe4hlen Sie den genauen Standort des Sensors auf der Karte "),o.a.createElement(k.a,{color:"inherit",onClick:this.onClose,"aria-label":"Fertig"},o.a.createElement(Et.a,null)))),o.a.createElement(wt.a,{containerElement:o.a.createElement("div",{style:{height:"100%",overflowY:"hidden"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}}),radius:-1,defaultPosition:this.state.position,onChange:this.handleLocationChange}))}}]),t}(o.a.Component),Ot=Object(p.a)({appBar:{position:"relative"},flex:{flex:1}})(St),Dt=a(242),xt=a.n(Dt),jt=a(921),Pt=a(922),Mt=a(920),At=a(918),zt=a(937),Tt=a(919),It=a(936),Ft=a(383),Lt=a.n(Ft),Bt=a(384),Rt=a.n(Bt);function Nt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Wt=[{id:"time",numeric:!1,disablePadding:!0,label:O.time_of_day},{id:"pm10",numeric:!0,disablePadding:!1,label:O.pm1},{id:"pm2.5",numeric:!0,disablePadding:!1,label:O.pm2},{id:"temp",numeric:!0,disablePadding:!1,label:O.temperature},{id:"humidity",numeric:!0,disablePadding:!1,label:O.humidity},{id:"pressure",numeric:!0,disablePadding:!1,label:O.pressure}],Ht=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,r=t.orderBy,i=t.numSelected,s=t.rowCount;return o.a.createElement(At.a,null,o.a.createElement(Tt.a,null,o.a.createElement(Mt.a,{padding:"checkbox"},o.a.createElement(st.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:a})),Wt.map((function(t){return o.a.createElement(Mt.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:r===t.id&&n},o.a.createElement(xe.a,{title:"Sortieren",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(It.a,{active:r===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label)))}),this)))}}]),t}(o.a.Component),Kt=function(e){var t=e.numSelected,a=e.classes;return o.a.createElement(E.a,{className:xt()(a.root,Object(v.a)({},a.highlight,t>0))},o.a.createElement("div",{className:a.title},t>0?o.a.createElement(_.a,{color:"inherit",variant:"subtitle1"},t," Datens\xe4tze ausgew\xe4hlt"):o.a.createElement(_.a,{variant:"h6",id:"tableTitle"},"Datens\xe4tze der Messdaten")),o.a.createElement("div",{className:a.spacer}),o.a.createElement("div",{className:a.actions},t>0?o.a.createElement(xe.a,{title:O.delete},o.a.createElement(k.a,{"aria-label":O.delete},o.a.createElement(Lt.a,null))):o.a.createElement(xe.a,{title:O.soon_available},o.a.createElement(k.a,{"aria-label":O.soon_available},o.a.createElement(Rt.a,null)))))};Kt=Object(p.a)((function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(w.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}}))(Kt);var qt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={order:"asc",orderBy:"calories",selected:[],page:0,rowsPerPage:25},a.handleRequestSort=function(e,t){var n=t,o="desc";a.state.orderBy===t&&"desc"===a.state.order&&(o="asc"),a.setState({order:o,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState((function(e){return{selected:a.props.data.map((function(e){return e.id}))}})):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,o=n.indexOf(t),r=[];-1===o?r=r.concat(n,t):0===o?r=r.concat(n.slice(1)):o===n.length-1?r=r.concat(n.slice(0,-1)):o>0&&(r=r.concat(n.slice(0,o),n.slice(o+1))),a.setState({selected:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,r=this.state,i=r.order,s=r.orderBy,l=r.selected,c=r.rowsPerPage,d=r.page,h=c-Math.min(c,n.length-d*c);return o.a.createElement(g.a,{className:a.root},o.a.createElement(Kt,{numSelected:l.length}),o.a.createElement("div",{className:a.tableWrapper},o.a.createElement(jt.a,{className:a.table,"aria-labelledby":"tableTitle"},o.a.createElement(Ht,{numSelected:l.length,order:i,orderBy:s,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:n.length}),o.a.createElement(Pt.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(n,function(e,t){return"desc"===e?function(e,a){return Nt(e,a,t)}:function(e,a){return-Nt(e,a,t)}}(i,s)).slice(d*c,d*c+c).map((function(t){var a=e.isSelected(t.id);return o.a.createElement(Tt.a,{hover:!0,onClick:function(a){return e.handleClick(a,t.id)},role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a},o.a.createElement(Mt.a,{padding:"checkbox"},o.a.createElement(st.a,{checked:a})),o.a.createElement(Mt.a,{component:"th",scope:"row",padding:"none"},o.a.createElement("b",null,t.time)),o.a.createElement(Mt.a,{align:"right"},t.pm1," \xb5g/m\xb3"),o.a.createElement(Mt.a,{align:"right"},t.pm2," \xb5g/m\xb3"),o.a.createElement(Mt.a,{align:"right",style:0===t.temp&&0===t.humidity&&0===t.pressure?{color:"#F00"}:{}},0===t.temp&&0===t.humidity&&0===t.pressure?"-":t.temp+" \xb0C"),o.a.createElement(Mt.a,{align:"right"},0!==t.humidity?t.humidity+" %":"-"),o.a.createElement(Mt.a,{align:"right"},0!==t.pressure?t.pressure+" hPa":"-"))})),h>0&&o.a.createElement(Tt.a,{style:{height:49*h}},o.a.createElement(Mt.a,{colSpan:6}))))),o.a.createElement(zt.a,{rowsPerPageOptions:[25,50,100],component:"div",count:n.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":O.previous_page},nextIconButtonProps:{"aria-label":O.next_page},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(o.a.Component),Ut=Object(p.a)((function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}}))(qt),Yt=a(389),Vt=a.n(Yt),Jt=a(931),Gt=a(924),Qt=a(390),Zt=a.n(Qt),Xt=a(391),$t=a.n(Xt),ea=a(241),ta=a.n(ea),aa=a(385),na=a.n(aa),oa=a(386),ra=a(79),ia=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={sync_key:"",user_data:[],favourites:[],own_sensors:[],first_sync_complete:!1,logged_in:!1,markerData:[],currentPosition:{lat:52.520008,lng:13.404954},selected:void 0,selected_id:void 0,suggestions:[],dialog_add_sensor_open:!1,dialog_add_favourite_open:!1,dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!0,dialog_sensor_details_open:!1,dialog_edit_sensor_open:!1,dialog_remove_sensor_open:!1,snackbar_message:O.action_successful,snackbar_success_open:!1,snackbar_error_open:!1},n.loadAllSensors=function(){var e=Object(h.a)(n);ve.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getall"}).end((function(t,a){var n=a.text.trim(),o=JSON.parse(n);e.setState({markerData:o})}))},n.handleSearchChange=function(e){return function(e,t){var a=t.newValue,o=Object(h.a)(n);if(""!==a){var r=na()("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc");ve.a.post("https://h2801469.stratoserver.net/autocomplete.php").set("Content-Type","application/x-www-form-urlencoded").send({key:r,q:a}).end((function(e,t){try{var a=t.text.trim(),n=JSON.parse(a);o.setState({suggestions:n.predictions})}catch(r){console.log("Error: Loading place predictions")}}))}}},n.onShowAddSensorDialog=function(){n.setState({dialog_add_sensor_open:!0})},n.onHideAddSensorDialog=function(e){n.setState({dialog_add_sensor_open:!1}),n.onSnackbarOpen(e,O.sensor_added_successfully,O.error_please_try_again)},n.onShowAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!0,selected_id:e})},n.onHideAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!1}),n.onSnackbarOpen(e,O.sensor_favourized,O.favourization_failed_try_again)},n.onShowSensorDataDialog=function(e){n.setState({dialog_sensor_data_open:!0,selected:e})},n.onHideSensorDataDialog=function(){n.setState({dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!1})},n.onShowDetailsDialog=function(e){n.setState({dialog_sensor_details_open:!0,selected:e})},n.onHideDetailsDialog=function(){n.setState({dialog_sensor_details_open:!1})},n.onShowEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!0,selected:e})},n.onHideEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,O.changings_saved,O.changings_save_failed)},n.onShowRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!0,selected_id:e})},n.onHideRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,O.sensor_removed_successfully,O.sensor_removal_failed)},n.onSnackbarOpen=function(e,t,a){1===e?n.setState({snackbar_success_open:!0,snackbar_message:t}):2===e&&n.setState({snackbar_error_open:!0,snackbar_message:a})},n.onSnackbarClose=function(e,t){"clickaway"!==t&&n.setState({snackbar_success_open:!1,snackbar_error_open:!1})},navigator.geolocation.getCurrentPosition((function(e){n.setState({currentPosition:{lat:e.coords.latitude,lng:e.coords.longitude}})}));var o=a(830)({length:25});return n.state.sync_key=o,window.addEventListener("beforeunload",(function(e){Te.database().ref("sync/"+n.state.sync_key).remove()})),n.loadAllSensors(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.floor(Date.now()),a={time:t,device:"web"};Te.database().ref("sync/"+this.state.sync_key).set(a),Te.database().ref("sync/"+this.state.sync_key).on("value",(function(a){if(null!==a.val()){if(a.child("time").val()>t){var n=a.child("data").val(),o=[],r=[];null!==n?n.map((function(e){return e.fav?o.push(e):r.push(e),!0})):n=[],e.setState({logged_in:!0,user_data:n,favourites:o,own_sensors:r,snackbar_success_open:!1===e.state.first_sync_complete,snackbar_message:"Verkn\xfcpfung mit Android-App erfolgreich",first_sync_complete:!0})}}else e.setState({logged_in:!1,user_data:[],favourites:[],own_sensors:[],snackbar_error_open:!0,snackbar_message:"Verbindung zur Android-App beendet",first_sync_complete:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(oa.a,null,o.a.createElement(n.Fragment,null,o.a.createElement(x,{suggestions:this.state.suggestions,onChange:this.handleSearchChange("single")}),o.a.createElement("main",{className:t.main},o.a.createElement(m.a,{container:!0,style:{height:"100%"}},o.a.createElement(m.a,{item:!0,style:{width:400}},o.a.createElement(ge,{logged_in:this.state.logged_in,sync_key:this.state.sync_key,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onShowSensorData:this.onShowSensorDataDialog,onEditSensor:this.onShowEditSensorDialog,onRemoveSensor:this.onShowRemoveSensorDialog,onSensorDetails:this.onShowDetailsDialog})),o.a.createElement(m.a,{item:!0},this.state.markerData&&o.a.createElement(T,{google:window.google,logged_in:this.state.logged_in,ownPosition:this.state.currentPosition,markerData:this.state.markerData,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onAddFavourite:this.onShowAddFavouriteDialog,onShowSensorData:this.onShowSensorDataDialog,style:{position:"absolute",top:0,bottom:0}}))),o.a.createElement(g.a,{style:{margin:0,paddingLeft:10,paddingRight:10,paddingTop:3,paddingBottom:3,right:20,top:80,position:"fixed",backgroundColor:"rgba(255,255,255,0.5)",cursor:"pointer"},onClick:function(){return window.open("https://h2801469.stratoserver.net/stats.php","_blank")}},o.a.createElement(_.a,null,this.state.markerData.length," ",O.sensors)),o.a.createElement(f.a,{color:"primary","aria-label":O.add_sensor,style:{margin:0,right:20,bottom:65,position:"fixed"},onClick:this.onShowAddSensorDialog},o.a.createElement(Vt.a,null)),this.state.dialog_add_sensor_open&&o.a.createElement(Fe,{opened:this.state.dialog_add_sensor_open,onClose:this.onHideAddSensorDialog,onSensorAdded:this.props.onHideAddSensorDialog,user_data:this.state.user_data,sync_key:this.state.sync_key,logged_in:this.state.logged_in}),void 0!==this.state.selected_id&&this.state.dialog_add_favourite_open&&o.a.createElement(Re,{opened:this.state.dialog_add_favourite_open,onClose:this.onHideAddFavouriteDialog,sync_key:this.state.sync_key,user_data:this.state.user_data,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_data_open&&o.a.createElement(mt,{opened:this.state.dialog_sensor_data_open,onClose:this.onHideSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,sensor:this.state.selected}),void 0!==this.state.selected&&this.state.dialog_edit_sensor_open&&o.a.createElement(_t,{opened:this.state.dialog_edit_sensor_open,sync_key:this.state.sync_key,data:this.state.user_data,onClose:this.onHideEditSensorDialog,chip_id:this.state.selected.chip_id,name:this.state.selected.name,fav:this.state.selected.fav,color:this.state.selected.color}),void 0!==this.state.selected_id&&this.state.dialog_remove_sensor_open&&o.a.createElement(bt,{opened:this.state.dialog_remove_sensor_open,sync_key:this.state.sync_key,user_data:this.state.user_data,onClose:this.onHideRemoveSensorDialog,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_details_open&&o.a.createElement(vt,{opened:this.state.dialog_sensor_details_open,chip_id:this.state.selected.chip_id,name:this.state.selected.name,onClose:this.onHideDetailsDialog}),o.a.createElement(ra.d,null,o.a.createElement(ra.b,{path:"/s/:id",render:function(t){return o.a.createElement(mt,{opened:e.state.dialog_sensor_data_route_open,onClose:e.onHideSensorDataDialog,onOpenDetails:e.onShowDetailsDialog,sensor:{chip_id:t.match.params.id,name:O.unknown_sensor}})}}),o.a.createElement(ra.a,{strict:!0,from:"/",to:"."})),o.a.createElement(Jt.a,{open:this.state.snackbar_success_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},o.a.createElement(Gt.a,{message:o.a.createElement("span",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Zt.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[o.a.createElement(k.a,{key:"success",color:"inherit",onClick:this.onSnackbarClose},o.a.createElement(He.a,{style:{fontSize:20}}))],style:{backgroundColor:Me.a[600]}})),o.a.createElement(Jt.a,{open:this.state.snackbar_error_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},o.a.createElement(Gt.a,{message:o.a.createElement("span",{style:{display:"flex",alignItems:"center"}},o.a.createElement($t.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[o.a.createElement(k.a,{key:"error",color:"inherit",onClick:this.onSnackbarClose},o.a.createElement(He.a,{style:{fontSize:20}}))],style:{backgroundColor:ta.a[600]}}))),o.a.createElement(m.a,{container:!0,className:t.footer},o.a.createElement(_.a,{variant:"body2",color:"inherit",style:{marginTop:7},noWrap:!0},"\xa9 M&R Games\xa0\xa0-\xa0\xa02018 - ",(new Date).getFullYear()),o.a.createElement(b.a,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com",target:"_blank",className:t.button_homepage},O.our_homepage),o.a.createElement(b.a,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com/feinstaub-app/info/",target:"_blank",className:t.button_info},O.info),o.a.createElement(b.a,{variant:"contained",color:"secondary",href:"https://play.google.com/store/apps/details?id=com.mrgames13.jimdo.feinstaubapp",target:"_blank",className:t.button_download},O.download_android_app))))}}]),t}(n.Component),sa=Object(p.a)((function(e){return{main:{flexGrow:1,display:"flex",position:"absolute",width:"100%",height:"calc(100% - 64px - 45px)",zIndex:1,top:64,overflow:"hidden"},footer:{position:"absolute",backgroundColor:"#32a087",height:45,paddingLeft:13,paddingRight:13,paddingTop:5,width:"100%",bottom:0,left:0,right:0},button_download:{position:"absolute",right:13},button_info:{position:"absolute",right:272},button_homepage:{position:"absolute",right:344}}}),{withTheme:!0})(ia);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(sa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[416,1,2]]]);
//# sourceMappingURL=main.499e2e6f.chunk.js.map