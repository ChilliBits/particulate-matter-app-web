(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1087:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(28),i=a.n(r),s=(a(509),a(21)),l=a(22),c=a(24),d=a(23),h=a(44),u=a(25),p=a(15),m=a(12),g=a(61),_=a(71),f=a.n(_),b=a(49),v=a.n(b),y=a(26),E=a.n(y),k=a(19),w=a.n(k),S=a(52),C=a(190),D=a.n(C),O=a(440),x=new(a.n(O).a)({en:{app_name:"Particulate Matter App",action_successful:"Action completed successfully",sensor_added_successfully:"Sensor added successfully!",error_please_try_again:"Error! Please try again.",sensor_favourized:"Sensor favourized successfully!",favourization_failed_try_again:"Favourization failed! Please try again.",changings_saved:"Changings saved successfully!",changings_save_failed:"The changings could not be saved! Please try again.",sensor_removed_successfully:"Removed sensor successfully!",sensor_removal_failed:"Sensor removal failed! Please try again.",add_sensor:"Add sensor",unknown_sensor:"Unknown sensor",sensors:"sensors",our_homepage:"Our homepage",download_android_app:"Download android app",info:"Info",add_sensor_to_favourites:"Add sensor to favourites",display_name:"Display name",chip_id:"Chip id",cancel:"Cancel",ok:"OK",save:"Save",back:"Back",next:"Next",skip:"Skip",add_favourite:"Add favourite",error_add_sensor:"You entered a wrong chip id or the option 'Send to Feinstaub-App' is not enabled in the configuration of your sensor. After it is enabled, it can last up to 10 minutes until our server receives data from the sensor.",enter_chip_id:"Enter chip id",enter_chip_id_instruction_1:"Please enter the chip id of your sensor below. You can find the id in the configuration of your sensor. If you still not find the chip id, you can check out the entry on our",enter_chip_id_instruction_2:".",faq_site:"faq site",enter_base_data:"Enter base data",display_name_color_instruction:"Please choose a display name and a color for sensor within the diagrams",add_sensor_to_map:"Add sensor to the map",add_sensor_to_map_instruction_1:"To add your sensor to the map, you have to enter the exact location and the mounting height of the sensor <b>over the ground </b>.<br><b>HINT:</b> This values only can be changed afterwards, if you",add_sensor_to_map_instruction_2:".",contact:"send us an email",soon_available:"Soon available",latitude:"Latitude",longitude:"Longitude",mounting_height:"Mounting height (meters)",choose_location:"Choose location of sensor",edit_sensor:"Edit sensor",remove_sensor:"Remove sensor",remove_sensor_message_1:"Do you really want to remove the sensor with the chip id",remove_sensor_message_2:"? You could link it again at any time.",remove:"Remove",pm1:"PM10",pm2:"PM2.5",temperature:"Temperature",humidity:"Humidity",pressure:"Pressure",show_sensor_details:"Show sensor details",show_details:"Show details",close_window:"Close window",day_before:"Day before",day_after:"Day after",choose_another_date:"Choose another date",diagram:"Diagram",data_records:"Data records",time_of_day:"Time",measurement:"Measurement",show_pm1:"Show PM10 curve",show_pm2:"Show PM2.5 curve",show_temperature:"Show temperature curve",show_humidity:"Show humidity curve",show_pressure:"Show pressure curve",show_time:"Show measurement time",hide_dots:"Hide dots",enable_soft_curve:"Enable soft curve",enable_curve_smoothing:"Enable curve smoothing",zoom_of_diagram_:"Zoom of the diagram:",no_data:"No data existing",loading:"Loading ...",sensor_details:"Sensor details",public:"Public",online_since:"Online since",link_with_android_app:"Link with android app",link_instruction_1:"To synchronize your sensors and your favourites,",link_instruction_2:"start the Particulate Matter App.",link_instruction_3:"Three dots at the top right corner \u2192 'Web version'.",link_instruction_4:"Scan the qr code above.",show_measurements:"Show measurements",properties:"Properties",no_favourites:"No favourites existing yet. To add a favourite, click on a sonsor on the map and select 'Add favourite'.",no_own_sensors_1:"If you have an particulate matter sensor from",no_own_sensors_2:", you can link it here. Click on the '+' button in the right bottom corner on the page.",favourites:"My favourites",own_sensors:"Own sensors",loading_address:"Loading address ...",unknown_country:"Unknown country",unknown_city:"Unknown city",delete:"Delete",previous_page:"Previous page",next_page:"Next page"},de:{app_name:"Feinstaub-App",action_successful:"Die Aktion war erfolgreich!",sensor_added_successfully:"Sensor erfolgreich hinzugef\xfcgt!",error_please_try_again:"Fehler! Bitte versuchen Sie es erneut.",sensor_favourized:"Der Sensor wurde favorisiert!",favourization_failed_try_again:"Favorisieren fehlgeschlagen! Bitte versuchen Sie es erneut.",changings_saved:"\xc4nderungen erfolgreich gespeichert!",changings_save_failed:"Die \xc4nderungen konnten nicht gespeichert werden! Bitte versuchen Sie es erneut.",sensor_removed_successfully:"Sensor erfolgreich entfernt!",sensor_removal_failed:"Entfernen fehlgeschlagen! Bitte versuchen Sie es erneut.",add_sensor:"Sensor hinzuf\xfcgen",unknown_sensor:"Unbekannter Sensor",sensors:"Sensoren",our_homepage:"Unsere Homepage",download_android_app:"Android-App herunterladen",info:"Info",add_sensor_to_favourites:"Sensor zu Favoriten hinzuf\xfcgen",display_name:"Anzeigename",chip_id:"Chip-ID",cancel:"Abbrechen",ok:"OK",save:"Speichern",back:"Zur\xfcck",next:"Weiter",skip:"\xdcberspringen",add_favourite:"Favorit hinzuf\xfcgen",error_add_sensor:"Sie haben entweder die falsche Chip-ID angegeben oder in der Konfiguration Ihres Sensors ist die Option 'Senden an Feinstaub-App' nicht aktiviert. Nachdem die Option aktiviert ist, kann es bis zu 10 Minuten dauern, bis Daten auf dem Server ankommen.",enter_chip_id:"Chip-ID angeben",enter_chip_id_instruction_1:"Bitte geben Sie die Chip-ID Ihres Sensors in das Feld unten ein. Sie finden die ID in der Konfiguration Ihres Sensors. Falls Sie die Chip-ID dennoch nicht finden sollten, finden Sie auf unserer",enter_chip_id_instruction_2:"einen Eintrag",faq_site:"FAQ-Seite",enter_base_data:"Basisdaten angeben",display_name_color_instruction:"Bitte vergeben Sie f\xfcr Ihren Sensor einen Anzeigenamen und bestimmen Sie eine Farbe f\xfcr den Sensor innerhalb der Diagramme.",add_sensor_to_map:"Sensor auf die Karte bringen",add_sensor_to_map_instruction_1:"Um Ihren Sensor auf die Karte zu bekommen, m\xfcssen Sie die genaue Position des Sensors und die Montageh\xf6he \xfcber dem Boden angeben.\nHINWEIS: Diese Daten k\xf6nnen sp\xe4ter nur noch ge\xe4ndert werden, indem Sie per E-Mail mit uns in",add_sensor_to_map_instruction_2:"treten.",contact:"Kontakt",soon_available:"Bald verf\xfcgbar",latitude:"L\xe4ngengrad",longitude:"Breitengrad",mounting_height:"Montageh\xf6he (Meter)",choose_location:"Position des Sensors w\xe4hlen",edit_sensor:"Sensor bearbeiten",remove_sensor:"Sensor entfernen",remove_sensor_message_1:"Wollen Sie den Sensor mit der Chip-ID",remove_sensor_message_2:"wirklich entfernen? Sie k\xf6nnen ihn jederzeit wieder verkn\xfcpfen.",remove:"Entfernen",pm1:"PM10",pm2:"PM2,5",temperature:"Temperatur",humidity:"Luftfeuchtigkeit",pressure:"Luftdruck",show_sensor_details:"Sensordetails anzeigen",show_details:"Details anzeigen",close_window:"Fenster schlie\xdfen",day_before:"Tag davor",day_after:"Tag danach",choose_another_date:"Anderes Datum w\xe4hlen",diagram:"Diagramm",data_records:"Datens\xe4tze",time_of_day:"Uhrzeit",measurement:"Messwert",show_pm1:"PM10-Kurve anzeigen",show_pm2:"PM2,5-Kurve anzeigen",show_temperature:"Temperatur-Kurve anzeigen",show_humidity:"Luftfeuchtigkeit-Kurve anzeigen",show_pressure:"Luftdruck-Kurve anzeigen",show_time:"Messzeiten einblenden",hide_dots:"Punkte ausblenden",enable_soft_curve:"Weiche Kurve aktivieren",enable_curve_smoothing:"Kurvengl\xe4ttung aktivieren",zoom_of_diagram_:"Zoom des Diagrammes:",no_data:"Keine Daten vorhanden",loading:"Laden ...",sensor_details:"Sensor Details",public:"\xd6ffentlich",online_since:"Online seit",link_with_android_app:"Mit der Android-App verkn\xfcpfen",link_instruction_1:"Um Ihre Sensoren und Ihre Favouriten aus der App",link_instruction_2:"hier anzuzeigen, starten Sie die Feinstaub-App.",link_instruction_3:"Drei Punkte oben rechts \u2192 'Web-Version'.",link_instruction_4:"Scannen Sie den obigen QR-Code.",show_measurements:"Messwerte anzeigen",properties:"Eigenschaften",no_favourites:"Noch keine Favouriten vorhanden. Um Favoriten hinzuzuf\xfcgen, tippen Sie auf der Karte auf einen Sensor und w\xe4hlen Sie 'Favorit hinzuf\xfcgen'.",no_own_sensors_1:"Falls Sie einen eigenen Feinstaubsensor von",no_own_sensors_2:"haben, k\xf6nnen Sie ihn hier verkn\xfcpfen. Klicken Sie auf den '+'-Button ganz unten rechts auf der Seite.",favourites:"Meine Favouriten",own_sensors:"Meine Sensoren",loading_address:"Adresse wird geladen ...",unknown_country:"Unbekanntes Land",unknown_city:"Unbekannte Stadt",delete:"L\xf6schen",previous_page:"Vorherige Seite",next_page:"N\xe4chste Seite"}}),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){return function(e,t){var n=t.newValue;a.props.onChange(e,{newValue:n})}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(f.a,{position:"static"},o.a.createElement(v.a,null,o.a.createElement(E.a,{href:"#",className:e.menuButton,color:"inherit","aria-label":x.app_name},o.a.createElement(D.a,{alt:x.app_name,src:"../favicon.ico",className:e.avatar})),o.a.createElement(w.a,{className:e.title,variant:"h6",color:"inherit",noWrap:!0},x.app_name),o.a.createElement("div",{className:e.grow}))))}}]),t}(n.Component),M=Object(p.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(S.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(S.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(g.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:350}})}})(j),P="AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc",A=a(115),z=a(290),T=a.n(z),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={markers:[],old_markerData:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{},selectedAddress:"",selectedMarkerLat:0,selectedMarkerLng:0,old_favourites:[],old_own_sensors:[]},a.onMarkerClick=function(e,t,n){var o=Object(h.a)(a);T.a.setApiKey(P),T.a.fromLatLng(t.position.lat(),t.position.lng()).then(function(e){a.setState({selectedAddress:o.getCountry(e.results[0].address_components)+", "+o.getCity(e.results[0].address_components)})},function(e){console.error(e)}),a.setState({selectedPlace:e,activeMarker:t,selectedMarkerLat:Math.round(1e3*t.position.lat())/1e3,selectedMarkerLng:Math.round(1e3*t.position.lng())/1e3,selectedAddress:x.loading_address,showingInfoWindow:!0})},a.getCountry=function(e){for(var t=0;t<e.length;t++){if("country"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return x.unknown_country},a.getCity=function(e){for(var t=0;t<e.length;t++){if("locality"===e[t].types[0]||"postal_town"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return x.unknown_city},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onShowSensorDataClicked=function(){var e={chip_id:a.state.activeMarker.name,name:a.state.selectedAddress,color:"#000000",fav:!1};a.props.onShowSensorData(e)},a.onAddFavouriteClicked=function(){a.props.onAddFavourite(a.state.activeMarker.name)},a.state.markers=a.props.markerData.map(function(e){return o.a.createElement(A.Marker,{key:e.i,icon:{url:"markers/blue.png"},title:e.i,name:e.i,onClick:a.onMarkerClick,position:{lat:e.l,lng:e.b}})}),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"onInfoWindowOpen",value:function(e,t){var a=o.a.createElement(m.b,{variant:"outlined",color:"primary",onClick:this.onShowSensorDataClicked,style:{marginTop:5,width:210}},x.show_measurements);if(i.a.render(o.a.Children.only(a),document.getElementById("show_data")),this.props.logged_in){var n=o.a.createElement(m.b,{variant:"contained",color:"primary",onClick:this.onAddFavouriteClicked,style:{marginTop:5,width:210}},x.add_favourite);i.a.render(o.a.Children.only(n),document.getElementById("add_favourite"))}}},{key:"render",value:function(){var e=this;return this.props.markerData===this.state.old_markerData&&this.props.favourites.length===this.state.old_favourites.length&&this.props.own_sensors.length===this.state.old_own_sensors.length||(this.state.markers=this.props.markerData.map(function(t){var a="markers/blue.png";return e.props.favourites.map(function(e){return e.chip_id===t.i&&(a="markers/red.png"),!0}),e.props.own_sensors.map(function(e){return e.chip_id===t.i&&(a="markers/green.png"),!0}),o.a.createElement(A.Marker,{key:t.i,icon:{url:a},title:t.i,name:t.i,onClick:e.onMarkerClick,position:{lat:t.l,lng:t.b}})}),this.setState({old_markerData:this.props.markerData,old_favourites:this.props.favourites,old_own_sensors:this.props.own_sensors})),o.a.createElement(A.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:7,initialCenter:{lat:this.props.ownPosition.lat,lng:this.props.ownPosition.lng}},this.state.markers,o.a.createElement(A.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onOpen:function(t){e.onInfoWindowOpen(e.props,t)}},o.a.createElement(m.e,{elevation:1,style:{width:210}},o.a.createElement("div",null,o.a.createElement(m.d,{container:!0},o.a.createElement(m.d,{item:!0,xs:3},o.a.createElement(m.a,null,o.a.createElement(Me,null))),o.a.createElement(m.d,{item:!0,xs:9},o.a.createElement(m.f,{variant:"body2",noWrap:!0},this.state.selectedPlace.name),o.a.createElement(m.f,{noWrap:!0},o.a.createElement("i",null,this.state.selectedMarkerLat,", ",this.state.selectedMarkerLng)))),o.a.createElement(m.f,null,this.state.selectedAddress),o.a.createElement("div",{id:"show_data",style:{height:50}}),this.props.logged_in&&o.a.createElement("div",{id:"add_favourite",style:{height:50}})))))}}]),t}(n.Component),F=Object(A.GoogleApiWrapper)({apiKey:"AIzaSyDs145s6rNrM2_yEhWs27gd4Q9RHbh4WSY",language:"de"})(I),L=a(466),B=a(442),R=a.n(B),N=a(443),W=a.n(N),H=a(444),K=a.n(H),q=a(445),U=a.n(q),Y=a(34),V=a.n(Y),G=a(42),J=a.n(G),Q=a(45),Z=a.n(Q);function X(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,r=e.ref,i=Object(L.a)(e,["classes","inputRef","ref"]);return o.a.createElement(V.a,Object.assign({fullWidth:!0,InputProps:{inputRef:function(e){r(e),n(e)},classes:{input:t.input},disableUnderline:!0}},i))}function $(e,t){var a=t.query,n=t.isHighlighted,r=K()(e.description,a),i=U()(e.description,r);return o.a.createElement(Z.a,{selected:n,component:"div"},o.a.createElement("div",null,i.map(function(e,t){return e.highlight?o.a.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):o.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))}function ee(e,t){var a=e.suggestions,n=R()(t.trim()).toLowerCase(),o=n.length,r=0;return 0===o?[]:a.filter(function(e){var t=r<5&&e.description.slice(0,o).toLowerCase()===n;return t&&(r+=1),t})}function te(e){return e.description}var ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={single:"",popper:"",suggestions:[]},a.handleSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:ee(a.props,t)})},a.handleSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.handleChange=function(e){return function(t,n){var o=n.newValue;a.props.onChange(t,{newValue:o}),a.setState(Object(g.a)({},e,o))}},a.handleEnterHit=function(e){console.log("Enter!"),"Enter"===e.key&&(e.preventDefault(),console.log("Enter!"))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t={renderInputComponent:X,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,getSuggestionValue:te,renderSuggestion:$};return o.a.createElement("div",{className:e.root},o.a.createElement(W.a,Object.assign({onKeyPress:this.handleEnterHit},t,{inputProps:{classes:e,placeholder:this.props.placeholder,value:this.state.single,onChange:this.handleChange("single")},theme:{container:e.container,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderSuggestionsContainer:function(e){return o.a.createElement(J.a,Object.assign({},e.containerProps,{style:{zIndex:3},square:!0}),e.children)}})))}}]),t}(o.a.Component),ne=(Object(p.withStyles)(function(e){return{root:{height:40,flexGrow:1},container:{position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit},input:{display:"flex"}}})(ae),a(78)),oe=a.n(ne),re=a(60),ie=a.n(re),se=a(105),le=a.n(se),ce=a(106),de=a.n(ce),he=a(138),ue=a.n(he),pe=a(139),me=a.n(pe),ge=a(202),_e=a.n(ge),fe=a(447),be=a.n(fe),ve=a(291),ye=a.n(ve),Ee=a(446),ke=a.n(Ee),we=a(113),Se="undefined"!==typeof InstallTrigger;function Ce(e){var t=e.children,a=e.dir;return o.a.createElement(m.f,{component:"div",dir:a},t)}var De=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={sync_key:a.props.sync_key,favourites:a.props.favourites,own_sensors:a.props.own_sensors,clicked:void 0,anchorEl:null,page:0},a.handlePageChange=function(e,t){a.setState({page:t})},a.handleMenuClick=function(e,t){e.stopPropagation(),e.preventDefault(),a.setState({clicked:t,anchorEl:e.currentTarget})},a.handleMenuClose=function(e,t){0===e?a.setState({clicked:void 0,anchorEl:null}):1===e?(a.props.onShowSensorData(t),a.setState({clicked:void 0,anchorEl:null})):2===e?(a.props.onEditSensor(t),a.setState({clicked:void 0,anchorEl:null})):3===e?(a.props.onRemoveSensor(t.chip_id),a.setState({clicked:void 0,anchorEl:null})):4===e&&(a.props.onSensorDetails(t),a.setState({clicked:void 0,anchorEl:null}))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme;return o.a.createElement("div",{style:{height:"100%"}},!1===this.props.logged_in&&o.a.createElement(we.Scrollbars,null,o.a.createElement("div",{className:a.container},o.a.createElement(m.a,{className:a.qr_container},o.a.createElement("div",{style:{backgroundColor:"#FFF",padding:10,borderRadius:10}},o.a.createElement(ke.a,{value:this.state.sync_key,size:210,logo:"https://map.h2801469.stratoserver.net/qr_icon.png",logoWidth:70}))),o.a.createElement(m.f,{variant:"h6",style:Se?{position:"absolute",marginTop:450,color:"#3F51B5"}:{position:"absolute",marginTop:230,color:"#3F51B5"},gutterBottom:!0},o.a.createElement("b",null,x.link_with_android_app)),o.a.createElement(m.f,{variant:"subtitle1",style:Se?{position:"absolute",marginTop:560,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:290,color:"#666",textAlign:"center"},gutterBottom:!0},x.link_instruction_1,o.a.createElement("br",null),x.link_instruction_2),o.a.createElement(m.f,{variant:"subtitle1",style:Se?{position:"absolute",marginTop:690,color:"#666",textAlign:"center"}:{position:"absolute",marginTop:360,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("i",{style:{color:"#3F51B5"}},x.link_instruction_3)),o.a.createElement(m.f,{variant:"subtitle1",style:Se?{position:"absolute",marginTop:800,color:"#666",textAlign:"center",marginBottom:30}:{position:"absolute",marginTop:415,color:"#666",textAlign:"center",marginBottom:30},gutterBottom:!0},x.link_instruction_4))),this.props.logged_in&&o.a.createElement("div",{style:{height:"calc(100% - 8px)"}},o.a.createElement(we.Scrollbars,{style:{height:"calc(100% - 64px)"}},o.a.createElement(_e.a,{axis:"x",index:this.state.page,onChangeIndex:this.handlePageChange,animateHeight:!0},o.a.createElement(Ce,{style:{overflow:"auto"},dir:r.direction},this.props.favourites.length>0&&o.a.createElement(le.a,{style:{overflow:"auto"}},this.props.favourites.map(function(t){return o.a.createElement(n.Fragment,null,o.a.createElement(de.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},o.a.createElement(m.a,{style:{backgroundColor:t.color}},o.a.createElement(Me,null)),o.a.createElement(ue.a,{primary:t.name,secondary:t.chip_id}),o.a.createElement(E.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},o.a.createElement(ye.a,null))),void 0!==e.state.clicked&&o.a.createElement(me.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(1,t)}},x.show_measurements),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(2,t)}},x.edit_sensor),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(3,t)}},x.remove_sensor),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(4,t)}},x.properties)))},this)),0===this.props.favourites.length&&o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{src:"/images/star_impossible.png",style:{width:250,height:250,marginLeft:60,marginTop:50,padding:15}}),o.a.createElement(m.f,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:40,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("b",null,x.no_favourites)))),o.a.createElement(Ce,{style:{overflow:"auto"},dir:r.direction},this.props.own_sensors.length>0&&o.a.createElement(le.a,{style:{overflow:"auto"}},this.props.own_sensors.map(function(t){return o.a.createElement(n.Fragment,null,o.a.createElement(de.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},o.a.createElement(m.a,{style:{backgroundColor:t.color}},o.a.createElement(Me,null)),o.a.createElement(ue.a,{primary:t.name,secondary:t.chip_id}),o.a.createElement(E.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},o.a.createElement(ye.a,null))),void 0!==e.state.clicked&&o.a.createElement(me.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(1,t)}},x.show_measurements),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(2,t)}},x.edit_sensor),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(3,t)}},x.remove_sensor),o.a.createElement(Z.a,{onClick:function(){return e.handleMenuClose(4,t)}},x.properties)))},this)),0===this.props.own_sensors.length&&o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{src:"/images/sensor_large.png",style:{width:200,height:200,marginLeft:85,marginTop:75,padding:15}}),o.a.createElement(m.f,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:65,height:200,color:"#666",textAlign:"center"},gutterBottom:!0},o.a.createElement("b",null,x.no_own_sensors_1," ",o.a.createElement("a",{href:"https://luftdaten.info/feinstaubsensor-bauen/",target:"blank"},"www.luftdaten.info")," ",x.no_own_sensors_2)))))),o.a.createElement(oe.a,{value:this.state.page,onChange:this.handlePageChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},o.a.createElement(ie.a,{icon:o.a.createElement(be.a,null),label:x.favourites}),o.a.createElement(ie.a,{icon:o.a.createElement(Me,null),label:x.own_sensors}))))}}]),t}(n.Component),Oe=Object(p.withStyles)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},qr_container:{width:330,height:330,marginTop:40,backgroundColor:"#3F51B5"}}},{withTheme:!0})(De),xe=a(31),je=a.n(xe),Me=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(je.a,null,o.a.createElement("path",{d:"M22,9L22,7h-2L20,5c0,-1.1 -0.9,-2 -2,-2L4,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2v-2h2v-2h-2v-2h2v-2h-2L20,9h2zM18,19L4,19L4,5h14v14zM6,13h5v4L6,17zM12,7h4v3h-4zM6,7h5v5L6,12zM12,11h4v6h-4z"}))}}]),t}(n.Component),Pe=a(72),Ae=a.n(Pe),ze=a(27),Te=a.n(ze),Ie=a(33),Fe=a.n(Ie),Le=a(66),Be=a.n(Le),Re=a(53),Ne=a.n(Re),We=a(191),He=a.n(We),Ke=a(109),qe=a.n(Ke),Ue=a(110),Ye=a.n(Ue),Ve=a(111),Ge=a.n(Ve),Je=a(140),Qe=a.n(Je),Ze=a(38),Xe=a.n(Ze),$e=a(108),et=a(203),tt=a.n(et),at=a(289),nt=a.n(at),ot=(a(850),nt.a.initializeApp({apiKey:"AIzaSyBcaCFA3uJQ7WrjRflWoIdQFhuFmqBEmcI",authDomain:"feinstaub-app-web.firebaseapp.com",databaseURL:"https://feinstaub-app-web.firebaseio.com",projectId:"feinstaub-app-web",storageBucket:"feinstaub-app-web.appspot.com",messagingSenderId:"985064412726"})),rt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={active_step:1,chip_id:"",next_disabled:!0,loading:!1,chip_id_error:!1,error_desc:"",sensor_name:"",color:"",lat:"",lng:"",alt:"",location_picker_open:!1},a.handleNext=function(e){if(1===e){a.setState({loading:!0});var t=Object(h.a)(a);Ae.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensordataexisting",chip_id:a.state.chip_id}).end(function(e,a){"true"===a.text.trim()?t.setState({loading:!1,active_step:2,next_disabled:!0}):t.setState({loading:!1,chip_id_error:!0,next_disabled:!0,error_desc:x.error_add_sensor})})}else 3===e?a.addSensor():a.setState({active_step:a.state.active_step+1,next_disabled:!0})},a.handleBack=function(){a.setState({active_step:a.state.active_step-1})},a.chipIDChange=function(e){var t=0===e.target.value.length;a.setState({chip_id:e.target.value,chip_id_error:!1,error_desc:"",next_disabled:t})},a.nameChange=function(e){var t=0===e.target.value.length||""===a.state.color;a.setState({sensor_name:e.target.value,next_disabled:t})},a.colorChange=function(e,t){var n=0===a.state.sensor_name.length;a.setState({color:e.hex,next_disabled:n})},a.chooseLocation=function(){a.setState({location_picker_open:!0})},a.locationChange=function(e,t){console.log(t),console.log(e),a.setState({location_picker_open:!1})},a.latChanged=function(e){var t=0===e.target.value.length||0===a.state.lng.length||0===a.state.alt.length;a.setState({lat:e.target.value,next_disabled:t})},a.lngChanged=function(e){var t=0===a.state.lat.length||0===e.target.value.length||0===a.state.alt.length;a.setState({lng:e.target.value,next_disabled:t})},a.altChanged=function(e){var t=0===a.state.lat.length||0===a.state.lng.length||0===e.target.value.length;a.setState({alt:e.target.value,next_disabled:t})},a.addSensor=function(){if(a.setState({loading:!0}),a.props.logged_in){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};ot.database().ref("sync/"+a.props.sync_key).set(n)}var o=Object(h.a)(a);Ae.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"addsensor",chip_id:a.state.chip_id,lat:a.state.lat,lng:a.state.lng,alt:a.state.alt}).end(function(e,t){var a=t.text.trim();console.log(a),0===a&&(a=2),o.props.onClose(parseInt(a))})},a.addSensorPrivate=function(){a.setState({loading:!0});var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};ot.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(n.Fragment,null,o.a.createElement(Fe.a,{open:this.props.opened,fullWidth:!0,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Ne.a,{id:"alert-dialog-title"},x.add_sensor),o.a.createElement(Be.a,null,o.a.createElement(He.a,{activeStep:this.state.active_step-1,orientation:"vertical"},o.a.createElement(qe.a,{key:x.enter_chip_id},o.a.createElement(Ye.a,null,x.enter_chip_id),o.a.createElement(Ge.a,null,o.a.createElement("div",null,o.a.createElement(w.a,null,x.enter_chip_id_instruction_1," ",o.a.createElement("a",{href:"https://mrgames13.jimdo.com/feinstaub-app/faq/#6",target:"blank"},x.faq_site)," ",x.enter_chip_id_instruction_2),o.a.createElement(V.a,{value:this.state.chip_id,label:x.chip_id,type:"number",error:this.state.chip_id_error,onChange:this.chipIDChange,variant:"outlined",style:{marginTop:15}}),""!==this.state.error_desc&&o.a.createElement(w.a,{color:"error",style:{marginTop:15}},this.state.error_desc)),o.a.createElement(Te.a,{disabled:!0,onClick:this.handleBack,style:{marginTop:15,marginRight:15}},x.back),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(Te.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(1)}},x.next),this.state.loading&&o.a.createElement(Qe.a,{size:24,style:{marginTop:0},className:t.buttonProgress})))),o.a.createElement(qe.a,{key:x.enter_base_data},o.a.createElement(Ye.a,null,x.enter_base_data),o.a.createElement(Ge.a,null,o.a.createElement("div",null,o.a.createElement(w.a,null,x.display_name_color_instruction),o.a.createElement(V.a,{label:x.display_name,value:this.state.sensor_name,style:{width:360,marginTop:15,marginBottom:15},onChange:this.nameChange,variant:"outlined"}),o.a.createElement($e.CirclePicker,{color:this.state.color,width:"380px",onChangeComplete:this.colorChange})),o.a.createElement(Te.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},x.back),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(Te.a,{variant:"contained",color:"primary",disabled:this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(2)}},x.next)))),o.a.createElement(qe.a,{key:x.add_sensor_to_map},o.a.createElement(Ye.a,null,x.add_sensor_to_map),o.a.createElement(Ge.a,null,o.a.createElement("div",null,o.a.createElement(w.a,null,x.add_sensor_to_map_instruction_1," ",o.a.createElement("a",{href:"mailto:mrgames@outlook.de"},x.contact)," ",x.add_sensor_to_map_instruction_2),o.a.createElement(Xe.a,{title:x.soon_available},o.a.createElement(Te.a,{variant:"outlined",color:"primary",_onClick:this.chooseLocation,style:{margin:10,width:440}},x.choose_location)),o.a.createElement("span",null,o.a.createElement(V.a,{label:x.latitude,style:{margin:10},type:"number",onChange:this.latChanged,variant:"outlined"}),o.a.createElement(V.a,{label:x.longitude,style:{margin:10},type:"number",onChange:this.lngChanged,variant:"outlined"})),o.a.createElement(V.a,{label:x.mounting_height,style:{margin:10},type:"number",onChange:this.altChanged,variant:"outlined"})),o.a.createElement(Te.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},x.back),this.props.logged_in&&o.a.createElement(Te.a,{variant:"outlined",onClick:this.addSensorPrivate,style:{marginTop:15,marginRight:15}},x.skip),o.a.createElement("span",{style:{position:"relative",width:80}},o.a.createElement(Te.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(3)}},x.add_sensor),this.state.loading&&o.a.createElement(Qe.a,{size:24,style:{marginTop:0},className:t.buttonProgress}))))))),this.state.location_picker_open&&o.a.createElement(la,{onChoose:this.locationChange}))}}]),t}(o.a.Component),it=Object(p.withStyles)(function(e){return{buttonProgress:{position:"absolute",color:tt.a[500],top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})(rt),st=a(54),lt=a.n(st),ct=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",color:void 0,button_disabled:!0},a.onAddFavourite=function(){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.props.chip_id,color:a.state.color,fav:!0,name:a.state.name});var n={time:e,device:"web",data:t};ot.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose()},a.onNameChanged=function(e){var t=0===e.target.value.length||void 0===a.state.color;a.setState({name:e.target.value,button_disabled:t})},a.onColorChanged=function(e,t){a.setState({color:e.hex,button_disabled:0===a.state.name.length})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Fe.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"dialog-title"},o.a.createElement(Ne.a,{id:"dialog-title"},x.add_sensor_to_favourites),o.a.createElement("div",{className:e.dialog_content},o.a.createElement("p",null,o.a.createElement(V.a,{label:x.display_name,style:{width:"320px"},onChange:this.onNameChanged,variant:"outlined"})),o.a.createElement("p",null,o.a.createElement(V.a,{label:x.chip_id,disabled:!0,value:this.props.chip_id,style:{width:"320px"},variant:"outlined"})),o.a.createElement($e.CirclePicker,{color:this.state.color,width:"340px",onChangeComplete:this.onColorChanged})),o.a.createElement(lt.a,null,o.a.createElement(Te.a,{onClick:this.props.onClose,color:"primary"},x.cancel),o.a.createElement(Te.a,{onClick:this.onAddFavourite,color:"primary",disabled:this.state.button_disabled,autoFocus:!0},x.add_favourite)))}}]),t}(o.a.Component),dt=Object(p.withStyles)(function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}})(ct),ht=a(192),ut=a.n(ht),pt=a(143),mt=a.n(pt),gt=a(89),_t=a.n(gt),ft=a(193),bt=a.n(ft),vt=a(194),yt=a.n(vt),Et=a(295),kt=a(465),wt=a(453),St=a.n(wt),Ct=a(451),Dt=a.n(Ct),Ot=a(293),xt=a.n(Ot),jt=a(454),Mt=a.n(jt),Pt=a(448),At=a.n(Pt),zt=a(142),Tt=a.n(zt),It=a(449),Ft=a(455),Lt=a.n(Ft),Bt=a(50),Rt=a.n(Bt),Nt=a(62),Wt=a.n(Nt),Ht=a(80),Kt=a.n(Ht),qt=0;function Ut(e){var t=e.children,a=e.dir;return o.a.createElement(w.a,{component:"div",dir:a,style:{padding:24}}," ",t," ")}function Yt(e){return o.a.createElement(_t.a,Object.assign({direction:"up"},e))}function Vt(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var Gt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={data:void 0,data_pm10:[],data_pm2_5:[],data_temp:[],data_humidity:[],data_pressure:[],data_graph:[],loading:!0,picker:null,open:!1,value:0,default_date:new Date,selected_date:new Date,dialog_details_open:!1,current_zoom:1e4,enabled_pm10:!0,enabled_pm2_5:!0,enabled_temp:!1,enabled_humidity:!1,enabled_pressure:!1},a.loadSensorData=function(){a.setState({loading:!0});var e=Object(h.a)(a);qt=0,fetch("https://h2801469.stratoserver.net/contents.php?path=esp8266-"+a.props.sensor.chip_id+"/data-"+Tt()(a.state.selected_date).format("YYYY-MM-DD")+".csv").then(function(e){return e.text()}).then(function(t){var n=At.a.parse(t),o=[],r=[],i=[],s=[],l=[],c=[],d=[],h=0;n.map(function(e){if(h>0){var t=new Date,a=0,n=0,r=0,u=0,p=0;""!==e[0]&&(t=e[0]),""!==e[1]&&(a=e[1]),""!==e[2]&&(a=e[2]),""!==e[3]&&(a=e[3]),""!==e[4]&&(n=e[4]),""!==e[5]&&(n=e[5]),""!==e[6]&&(n=e[6]),""!==e[7]&&(a=e[7]),""!==e[8]&&(n=e[8]),""!==e[9]&&(r=e[9]),""!==e[10]&&(u=e[10]),""!==e[11]&&(r=e[11]),""!==e[12]&&(p=e[12]),""!==e[13]&&(r=e[13]),""!==e[14]&&(u=e[14]),""!==e[15]&&(p=e[15]),""!==e[20]&&(a=e[20]),""!==e[21]&&(n=e[21]),""!==e[22]&&(a=e[22]),""!==e[23]&&(n=e[23]),r=Vt(r,1),u=Vt(u,1),p=Vt(p/100,2),o.push(function(e,t,a,n,o,r){return{id:qt+=1,time:e,pm1:t,pm2:a,temp:n,humidity:o,pressure:r}}(t.substring(11),a,n,r,u,p)),t=new Date(t);var m=parseFloat(a),g=parseFloat(n),_=parseFloat(r),f=parseFloat(u),b=parseFloat(p);i.push({x:t,y:m}),s.push({x:t,y:g}),l.push({x:t,y:_}),c.push({x:t,y:f}),d.push({x:t,y:b})}return h++,!0}),a.state.enabled_pm10&&r.push({id:x.pm1,color:"hsl(353, 70%, 50%)",data:i}),a.state.enabled_pm2_5&&r.push({id:x.pm2,color:"hsl(87, 70%, 50%)",data:s}),a.state.enabled_temp&&r.push({id:x.temperature,color:"hsl(183, 70%, 50%)",data:l}),a.state.enabled_humidity&&r.push({id:x.humidity,color:"hsl(281, 70%, 50%)",data:c}),a.state.enabled_pressure&&r.push({id:x.pressure,color:"hsl(61, 70%, 50%)",data:d}),e.setState({data:o,data_graph:r,data_pm10:i,data_pm2_5:s,data_temp:l,data_humidity:c,data_pressure:d,loading:!1})})},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.showDetails=function(){a.props.onOpenDetails(a.props.sensor)},a.handleTabChange=function(e,t){a.setState({value:t})},a.handleTabChangeIndex=function(e){a.setState({value:e})},a.openPicker=function(){a.picker.open()},a.minusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()-864e5))}),a.loadSensorData()},a.plusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()+864e5))}),a.loadSensorData()},a.handleDateChange=function(e){a.setState({selected_date:e}),a.loadSensorData()},a.onZoomChange=function(e,t){a.setState({current_zoom:t})},a.onCheckedChange=function(e){return function(t){var n,o=[];"enabled_pm10"===e&&t.target.checked?o.push({id:x.pm1,color:"hsl(353, 70%, 50%)",data:a.state.data_pm10}):"enabled_pm10"!==e&&a.state.enabled_pm10&&o.push({id:x.pm1,color:"hsl(353, 70%, 50%)",data:a.state.data_pm10}),"enabled_pm2_5"===e&&t.target.checked?o.push({id:x.pm2,color:"hsl(87, 70%, 50%)",data:a.state.data_pm2_5}):"enabled_pm2_5"!==e&&a.state.enabled_pm2_5&&o.push({id:x.pm2,color:"hsl(87, 70%, 50%)",data:a.state.data_pm2_5}),"enabled_temp"===e&&t.target.checked?o.push({id:x.temperature,color:"hsl(183, 70%, 50%)",data:a.state.data_temp}):"enabled_temp"!==e&&a.state.enabled_temp&&o.push({id:x.temperature,color:"hsl(183, 70%, 50%)",data:a.state.data_temp}),"enabled_humidity"===e&&t.target.checked?o.push({id:x.humidity,color:"hsl(281, 70%, 50%)",data:a.state.data_humidity}):"enabled_humidity"!==e&&a.state.enabled_humidity&&o.push({id:x.humidity,color:"hsl(281, 70%, 50%)",data:a.state.data_humidity}),"enabled_pressure"===e&&t.target.checked?o.push({id:x.pressure,color:"hsl(61, 70%, 50%)",data:a.state.data_pressure}):"enabled_pressure"!==e&&a.state.enabled_pressure&&o.push({id:x.pressure,color:"hsl(61, 70%, 50%)",data:a.state.data_pressure}),a.setState((n={},Object(g.a)(n,e,t.target.checked),Object(g.a)(n,"data_graph",o),n))}},a.loadSensorData(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme;return o.a.createElement(Fe.a,{fullScreen:!0,open:this.props.opened,onClose:this.props.onClose,TransitionComponent:Yt},o.a.createElement(f.a,{className:a.appBar},o.a.createElement(v.a,null,o.a.createElement(Xe.a,{title:x.show_sensor_details},o.a.createElement(E.a,{color:"inherit",onClick:this.showDetails,"aria-label":x.show_details},o.a.createElement(Me,null))),o.a.createElement(w.a,{variant:"h6",color:"inherit",className:a.flex},this.props.sensor.name," - ChipID: ",this.props.sensor.chip_id),o.a.createElement(Xe.a,{title:x.close_window},o.a.createElement(E.a,{color:"inherit",onClick:this.props.onClose},o.a.createElement(mt.a,null))))),this.state.loading&&o.a.createElement(ut.a,null),o.a.createElement(bt.a,{className:a.card},o.a.createElement(yt.a,{className:a.card_content},o.a.createElement(Xe.a,{title:x.day_before},o.a.createElement(E.a,{onClick:this.minusDay},o.a.createElement(Dt.a,null))),o.a.createElement(Et.b,{utils:kt.a,locale:St.a},o.a.createElement(Et.a,{value:this.state.selected_date,onChange:this.handleDateChange,className:a.date_selection,showTodayButton:!0,disableFuture:!0,cancelLabel:"Abbrechen",todayLabel:"Heute",okLabel:"OK",invalidLabel:"Ung\xfcltige Eingabe",format:"dd.MM.yyyy",ref:function(t){e.picker=t}})),o.a.createElement(Xe.a,{title:x.choose_another_date},o.a.createElement(E.a,{onClick:this.openPicker},o.a.createElement(Mt.a,null))),this.state.selected_date>=this.state.default_date&&o.a.createElement(Xe.a,{title:x.day_after},o.a.createElement(E.a,{onClick:this.plusDay,disabled:!0},o.a.createElement(xt.a,{disabled:!0}))),this.state.selected_date<this.state.default_date&&o.a.createElement(Xe.a,{title:x.day_after},o.a.createElement(E.a,{onClick:this.plusDay},o.a.createElement(xt.a,null))))),o.a.createElement(f.a,{position:"static",color:"default"},o.a.createElement(oe.a,{value:this.state.value,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(ie.a,{label:x.diagram}),o.a.createElement(ie.a,{label:x.data_records}))),o.a.createElement(we.Scrollbars,null,o.a.createElement(_e.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleTabChangeIndex,style:{overflowX:"hidden"},animateHeight:!0},o.a.createElement(Ut,{dir:r.direction,style:{overflowX:"hidden"}},o.a.createElement(we.Scrollbars,{style:{height:600,overflowX:"hidden"}},this.state.data_graph!==[]&&o.a.createElement("div",{style:{height:590,width:this.state.current_zoom}},o.a.createElement(It.ResponsiveLine,{data:this.state.data_graph,margin:{top:10,right:50,bottom:40,left:30},xScale:{type:"time",format:"native",precision:"minute"},yScale:{type:"linear",stacked:!1,min:"auto",max:"auto"},curve:this.state.smooth_curve?this.state.basis_curve?"basis":"cardinal":"linear",axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:x.time_of_day,legendOffset:35,format:"%H:%m",legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:x.measurement,legendOffset:-40,legendPosition:"middle"},colors:"category10",lineWidth:1,dotSize:this.state.disable_dots?0:5,dotColor:"inherit:darker(0.3)",enableDotLabel:!0,dotLabel:this.state.enable_time?function(e){return"".concat(Tt()(e.x).format("HH:mm"),"")}:"",dotLabelYOffset:-12,dotBorderWidth:0,animate:!1,motionStiffness:90,motionDamping:15,legends:[{anchor:"bottom-right",direction:"row",justify:!1,translateX:25,translateY:40,itemsSpacing:10,itemDirection:"left-to-right",itemWidth:100,itemHeight:18,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))),o.a.createElement(Rt.a,{control:o.a.createElement(Wt.a,{checked:this.state.enabled_pm10,onChange:this.onCheckedChange("enabled_pm10"),value:"pm10",color:"primary"}),label:x.show_pm1}),o.a.createElement(Rt.a,{control:o.a.createElement(Wt.a,{checked:this.state.enabled_pm2_5,onChange:this.onCheckedChange("enabled_pm2_5"),value:"pm2_5",color:"primary"}),label:x.show_pm2}),o.a.createElement(Rt.a,{control:o.a.createElement(Wt.a,{checked:this.state.enabled_temp,onChange:this.onCheckedChange("enabled_temp"),value:"temp",color:"primary"}),label:x.show_temperature}),o.a.createElement(Rt.a,{control:o.a.createElement(Wt.a,{checked:this.state.enabled_humidity,onChange:this.onCheckedChange("enabled_humidity"),value:"humidity",color:"primary"}),label:x.show_humidity}),o.a.createElement(Rt.a,{control:o.a.createElement(Wt.a,{checked:this.state.enabled_pressure,onChange:this.onCheckedChange("enabled_pressure"),value:"pressure",color:"primary"}),label:x.show_pressure}),o.a.createElement(w.a,{variant:"h6"},x.zoom_of_diagram_),o.a.createElement("br",null),o.a.createElement(Lt.a,{value:this.state.current_zoom,onChange:this.onZoomChange,min:1e3,max:3e4,step:1e3}),o.a.createElement("br",null),o.a.createElement(Rt.a,{control:o.a.createElement(Kt.a,{checked:this.state.enable_time,onChange:this.onCheckedChange("enable_time"),color:"primary"}),label:x.show_time}),o.a.createElement(Rt.a,{control:o.a.createElement(Kt.a,{checked:this.state.disable_dots,onChange:this.onCheckedChange("disable_dots"),color:"primary"}),label:x.hide_dots}),o.a.createElement(Rt.a,{control:o.a.createElement(Kt.a,{checked:this.state.smooth_curve,onChange:this.onCheckedChange("smooth_curve"),color:"primary"}),label:x.enable_soft_curve}),this.state.smooth_curve&&o.a.createElement(Rt.a,{control:o.a.createElement(Kt.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary"}),label:x.enable_curve_smoothing}),!this.state.smooth_curve&&o.a.createElement(Rt.a,{control:o.a.createElement(Kt.a,{checked:this.state.basis_curve,onChange:this.onCheckedChange("basis_curve"),color:"primary",disabled:!0}),label:x.enable_curve_smoothing})),o.a.createElement(Ut,{dir:r.direction},this.state.data&&o.a.createElement(Ta,{data:this.state.data}),void 0===this.state.data&&o.a.createElement(n.Fragment,null,x.no_data)))))}}]),t}(o.a.Component),Jt=Object(p.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500},appBar:{position:"relative"},flex:{flex:1},card:{minWidth:275,margin:15},card_content:{height:50,padding:5},date_selection:{marginTop:10}}},{withTheme:!0})(Gt),Qt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:a.props.name,color:a.props.color,error:!1},a.nameChanged=function(e){var t=0===e.target.value.length;a.setState({name:e.target.value,error:t})},a.colorChanged=function(e,t){a.setState({color:e.hex})},a.saveChangings=function(){var e=Math.floor(Date.now()),t=[];a.props.data.map(function(e){return e.chip_id===a.props.chip_id?t.push({chip_id:a.props.chip_id,color:a.state.color,fav:a.props.fav,name:a.state.name}):t.push(e),!0});var n={time:e,device:"web",data:t};ot.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Fe.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Ne.a,{id:"alert-dialog-title"},x.edit_sensor),o.a.createElement("div",{className:e.dialog_content},o.a.createElement("p",null,o.a.createElement(V.a,{label:x.display_name,value:this.state.name,style:{width:"320px"},onChange:this.nameChanged,variant:"outlined"})),o.a.createElement("p",null,o.a.createElement(V.a,{label:x.chip_id,value:this.props.chip_id,style:{width:"320px"},variant:"outlined",disabled:!0})),o.a.createElement($e.CirclePicker,{colors:[this.props.color,"#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],color:this.state.color,width:"340px",onChangeComplete:this.colorChanged})),o.a.createElement(lt.a,null,o.a.createElement(Te.a,{onClick:this.props.onClose,color:"primary"},x.cancel),o.a.createElement(Te.a,{onClick:this.saveChangings,color:"primary",disabled:this.state.error,autoFocus:!0},x.save)))}}]),t}(o.a.Component),Zt=Object(p.withStyles)(function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}})(Qt),Xt=a(196),$t=a.n(Xt),ea=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onRemove=function(){var e=Math.floor(Date.now()),t=[];a.props.user_data.map(function(e){return e.chip_id!==a.props.chip_id&&t.push(e),!0});var n={time:e,device:"web",data:t};ot.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(Fe.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Ne.a,{id:"alert-dialog-title"},x.remove_sensor),o.a.createElement(Be.a,null,o.a.createElement($t.a,{id:"alert-dialog-description"},x.remove_sensor_message_1," ",o.a.createElement("b",null,this.props.chip_id)," ",x.remove_sensor_message_2)),o.a.createElement(lt.a,null,o.a.createElement(Te.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},x.cancel),o.a.createElement(Te.a,{onClick:this.onRemove,color:"primary"},x.remove)))}}]),t}(o.a.Component),ta=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={public:!1,creation_date:x.loading,lat:x.loading,lng:x.loading,alt:x.loading},a.loadSensorDetails=function(){var e=Object(h.a)(a);Ae.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensorexisting",chip_id:a.props.chip_id}).end(function(t,a){"1"===a.text.trim()?Ae.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getsensorinfo",chip_id:e.props.chip_id}).end(function(t,a){var n=a.text.trim(),o=JSON.parse(n)[0],r=o.alt+"m";e.setState({creation_date:Tt.a.unix(o.creation_date).format("DD.MM.YYYY"),public:!0,lat:o.lat,lng:o.lng,alt:r})}):e.setState({creation_date:"-",public:!1,lat:"-",lng:"-",alt:"-"})})},a.loadSensorDetails(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(Fe.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Ne.a,{id:"alert-dialog-title"},x.sensor_details),o.a.createElement(Be.a,null,o.a.createElement("table",{width:"350"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.display_name,":")),o.a.createElement("td",{align:"right"},this.props.name)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.chip_id,":")),o.a.createElement("td",{align:"right"},this.props.chip_id)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.public,":")),o.a.createElement("td",{align:"right"},this.state.public?"Ja":"Nein")),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.public,":")),o.a.createElement("td",{align:"right"},this.state.creation_date)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.latitude,":")),o.a.createElement("td",{align:"right"},this.state.lat)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.longitude,":")),o.a.createElement("td",{align:"right"},this.state.lng)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,x.mounting_height,":")),o.a.createElement("td",{align:"right"},this.state.alt))))),o.a.createElement(lt.a,null,o.a.createElement(Te.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},x.ok)))}}]),t}(o.a.Component),aa=a(458),na=a.n(aa),oa=a(456),ra=a.n(oa);function ia(e){return o.a.createElement(_t.a,Object.assign({direction:"up"},e))}var sa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={adress:"",position:{lat:0,lng:0}},a.onClose=function(){a.props.onChoose(a.state.position,a.state.address)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleLocationChange",value:function(e){var t=e.position,a=e.address;this.setState({position:t,address:a})}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(Fe.a,{fullScreen:!0,open:!0,onClose:this.onClose,TransitionComponent:ia},o.a.createElement(f.a,{className:e.appBar},o.a.createElement(v.a,null,o.a.createElement(w.a,{variant:"h6",color:"inherit",className:e.flex}," W\xe4hlen Sie den genauen Standort des Sensors auf der Karte "),o.a.createElement(E.a,{color:"inherit",onClick:this.onClose,"aria-label":"Fertig"},o.a.createElement(na.a,null)))),o.a.createElement(ra.a,{containerElement:o.a.createElement("div",{style:{height:"100%",overflowY:"hidden"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}}),radius:-1,defaultPosition:this.state.position,onChange:this.handleLocationChange}))}}]),t}(o.a.Component),la=Object(p.withStyles)({appBar:{position:"relative"},flex:{flex:1}})(sa),ca=a(6),da=a.n(ca),ha=a(199),ua=a.n(ha),pa=a(200),ma=a.n(pa),ga=a(46),_a=a.n(ga),fa=a(197),ba=a.n(fa),va=a(201),ya=a.n(va),Ea=a(112),ka=a.n(Ea),wa=a(198),Sa=a.n(wa),Ca=a(459),Da=a.n(Ca),Oa=a(460),xa=a.n(Oa);function ja(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Ma=[{id:"time",numeric:!1,disablePadding:!0,label:x.time_of_day},{id:"pm10",numeric:!0,disablePadding:!1,label:x.pm1},{id:"pm2.5",numeric:!0,disablePadding:!1,label:x.pm2},{id:"temp",numeric:!0,disablePadding:!1,label:x.temperature},{id:"humidity",numeric:!0,disablePadding:!1,label:x.humidity},{id:"pressure",numeric:!0,disablePadding:!1,label:x.pressure}],Pa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,r=t.orderBy,i=t.numSelected,s=t.rowCount;return o.a.createElement(ba.a,null,o.a.createElement(ka.a,null,o.a.createElement(_a.a,{padding:"checkbox"},o.a.createElement(Wt.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:a})),Ma.map(function(t){return o.a.createElement(_a.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:r===t.id&&n},o.a.createElement(Xe.a,{title:"Sortieren",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(Sa.a,{active:r===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(o.a.Component),Aa=function(e){var t=e.numSelected,a=e.classes;return o.a.createElement(v.a,{className:da()(a.root,Object(g.a)({},a.highlight,t>0))},o.a.createElement("div",{className:a.title},t>0?o.a.createElement(w.a,{color:"inherit",variant:"subtitle1"},t," Datens\xe4tze ausgew\xe4hlt"):o.a.createElement(w.a,{variant:"h6",id:"tableTitle"},"Datens\xe4tze der Messdaten")),o.a.createElement("div",{className:a.spacer}),o.a.createElement("div",{className:a.actions},t>0?o.a.createElement(Xe.a,{title:x.delete},o.a.createElement(E.a,{"aria-label":x.delete},o.a.createElement(Da.a,null))):o.a.createElement(Xe.a,{title:x.soon_available},o.a.createElement(E.a,{"aria-label":x.soon_available},o.a.createElement(xa.a,null)))))};Aa=Object(p.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(S.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Aa);var za=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={order:"asc",orderBy:"calories",selected:[],page:0,rowsPerPage:25},a.handleRequestSort=function(e,t){var n=t,o="desc";a.state.orderBy===t&&"desc"===a.state.order&&(o="asc"),a.setState({order:o,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:a.props.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,o=n.indexOf(t),r=[];-1===o?r=r.concat(n,t):0===o?r=r.concat(n.slice(1)):o===n.length-1?r=r.concat(n.slice(0,-1)):o>0&&(r=r.concat(n.slice(0,o),n.slice(o+1))),a.setState({selected:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,r=this.state,i=r.order,s=r.orderBy,l=r.selected,c=r.rowsPerPage,d=r.page,h=c-Math.min(c,n.length-d*c);return o.a.createElement(J.a,{className:a.root},o.a.createElement(Aa,{numSelected:l.length}),o.a.createElement("div",{className:a.tableWrapper},o.a.createElement(ua.a,{className:a.table,"aria-labelledby":"tableTitle"},o.a.createElement(Pa,{numSelected:l.length,order:i,orderBy:s,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:n.length}),o.a.createElement(ma.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,a){return ja(e,a,t)}:function(e,a){return-ja(e,a,t)}}(i,s)).slice(d*c,d*c+c).map(function(t){var a=e.isSelected(t.id);return o.a.createElement(ka.a,{hover:!0,onClick:function(a){return e.handleClick(a,t.id)},role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a},o.a.createElement(_a.a,{padding:"checkbox"},o.a.createElement(Wt.a,{checked:a})),o.a.createElement(_a.a,{component:"th",scope:"row",padding:"none"},o.a.createElement("b",null,t.time)),o.a.createElement(_a.a,{align:"right"},t.pm1," \xb5g/m\xb3"),o.a.createElement(_a.a,{align:"right"},t.pm2," \xb5g/m\xb3"),o.a.createElement(_a.a,{align:"right",style:0===t.temp&&0===t.humidity&&0===t.pressure?{color:"#F00"}:{}},0===t.temp&&0===t.humidity&&0===t.pressure?"-":t.temp+" \xb0C"),o.a.createElement(_a.a,{align:"right"},0!==t.humidity?t.humidity+" %":"-"),o.a.createElement(_a.a,{align:"right"},0!==t.pressure?t.pressure+" hPa":"-"))}),h>0&&o.a.createElement(ka.a,{style:{height:49*h}},o.a.createElement(_a.a,{colSpan:6}))))),o.a.createElement(ya.a,{rowsPerPageOptions:[25,50,100],component:"div",count:n.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":x.previous_page},nextIconButtonProps:{"aria-label":x.next_page},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(o.a.Component),Ta=Object(p.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(za),Ia=a(462),Fa=a.n(Ia),La=a(141),Ba=a.n(La),Ra=a(107),Na=a.n(Ra),Wa=a(463),Ha=a.n(Wa),Ka=a(464),qa=a.n(Ka),Ua=a(288),Ya=a.n(Ua),Va=a(461),Ga=a.n(Va),Ja=a(1090),Qa=a(1092),Za=a(1093),Xa=a(1091),$a=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={sync_key:"",user_data:[],favourites:[],own_sensors:[],first_sync_complete:!1,logged_in:!1,markerData:[],currentPosition:{lat:52.520008,lng:13.404954},selected:void 0,selected_id:void 0,suggestions:[],dialog_add_sensor_open:!1,dialog_add_favourite_open:!1,dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!0,dialog_sensor_details_open:!1,dialog_edit_sensor_open:!1,dialog_remove_sensor_open:!1,snackbar_message:x.action_successful,snackbar_success_open:!1,snackbar_error_open:!1},n.loadAllSensors=function(){var e=Object(h.a)(n);Ae.a.post("https://h2801469.stratoserver.net/ServerScriptWeb_v100.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getall"}).end(function(t,a){var n=a.text.trim(),o=JSON.parse(n);e.setState({markerData:o})})},n.handleSearchChange=function(e){return function(e,t){var a=t.newValue,o=Object(h.a)(n);if(""!==a){var r=Ga()("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc");Ae.a.post("https://h2801469.stratoserver.net/autocomplete.php").set("Content-Type","application/x-www-form-urlencoded").send({key:r,q:a}).end(function(e,t){try{var a=t.text.trim(),n=JSON.parse(a);o.setState({suggestions:n.predictions})}catch(r){console.log("Error: Loading place predictions")}})}}},n.onShowAddSensorDialog=function(){n.setState({dialog_add_sensor_open:!0})},n.onHideAddSensorDialog=function(e){n.setState({dialog_add_sensor_open:!1}),n.onSnackbarOpen(e,x.sensor_added_successfully,x.error_please_try_again)},n.onShowAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!0,selected_id:e})},n.onHideAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!1}),n.onSnackbarOpen(e,x.sensor_favourized,x.favourization_failed_try_again)},n.onShowSensorDataDialog=function(e){n.setState({dialog_sensor_data_open:!0,selected:e})},n.onHideSensorDataDialog=function(){n.setState({dialog_sensor_data_open:!1,dialog_sensor_data_route_open:!1})},n.onShowDetailsDialog=function(e){n.setState({dialog_sensor_details_open:!0,selected:e})},n.onHideDetailsDialog=function(){n.setState({dialog_sensor_details_open:!1})},n.onShowEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!0,selected:e})},n.onHideEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,x.changings_saved,x.changings_save_failed)},n.onShowRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!0,selected_id:e})},n.onHideRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,x.sensor_removed_successfully,x.sensor_removal_failed)},n.onSnackbarOpen=function(e,t,a){1===e?n.setState({snackbar_success_open:!0,snackbar_message:t}):2===e&&n.setState({snackbar_error_open:!0,snackbar_message:a})},n.onSnackbarClose=function(e,t){"clickaway"!==t&&n.setState({snackbar_success_open:!1,snackbar_error_open:!1})},navigator.geolocation.getCurrentPosition(function(e){n.setState({currentPosition:{lat:e.coords.latitude,lng:e.coords.longitude}})});var o=a(1080)({length:25});return n.state.sync_key=o,window.addEventListener("beforeunload",function(e){ot.database().ref("sync/"+n.state.sync_key).remove()}),n.loadAllSensors(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.floor(Date.now()),a={time:t,device:"web"};ot.database().ref("sync/"+this.state.sync_key).set(a),ot.database().ref("sync/"+this.state.sync_key).on("value",function(a){if(null!==a.val()){if(a.child("time").val()>t){var n=a.child("data").val(),o=[],r=[];null!==n?n.map(function(e){return e.fav?o.push(e):r.push(e),!0}):n=[],e.setState({logged_in:!0,user_data:n,favourites:o,own_sensors:r,snackbar_success_open:!1===e.state.first_sync_complete,snackbar_message:"Verkn\xfcpfung mit Android-App erfolgreich",first_sync_complete:!0})}}else e.setState({logged_in:!1,user_data:[],favourites:[],own_sensors:[],snackbar_error_open:!0,snackbar_message:"Verbindung zur Android-App beendet",first_sync_complete:!1})})}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(Ja.a,null,o.a.createElement(n.Fragment,null,o.a.createElement(M,{suggestions:this.state.suggestions,onChange:this.handleSearchChange("single")}),o.a.createElement("main",{className:t.main},o.a.createElement(m.d,{container:!0,style:{height:"100%"}},o.a.createElement(m.d,{item:!0,style:{width:400}},o.a.createElement(Oe,{logged_in:this.state.logged_in,sync_key:this.state.sync_key,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onShowSensorData:this.onShowSensorDataDialog,onEditSensor:this.onShowEditSensorDialog,onRemoveSensor:this.onShowRemoveSensorDialog,onSensorDetails:this.onShowDetailsDialog})),o.a.createElement(m.d,{item:!0},this.state.markerData&&o.a.createElement(F,{google:window.google,logged_in:this.state.logged_in,ownPosition:this.state.currentPosition,markerData:this.state.markerData,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onAddFavourite:this.onShowAddFavouriteDialog,onShowSensorData:this.onShowSensorDataDialog,style:{position:"absolute",top:0,bottom:0}}))),o.a.createElement(m.e,{style:{margin:0,paddingLeft:10,paddingRight:10,paddingTop:3,paddingBottom:3,right:20,top:80,position:"fixed",backgroundColor:"rgba(255,255,255,0.5)",cursor:"pointer"},onClick:function(){return window.open("https://h2801469.stratoserver.net/stats.php","_blank")}},o.a.createElement(m.f,null,this.state.markerData.length," ",x.sensors)),o.a.createElement(m.c,{color:"primary","aria-label":x.add_sensor,style:{margin:0,right:20,bottom:65,position:"fixed"},onClick:this.onShowAddSensorDialog},o.a.createElement(Fa.a,null)),this.state.dialog_add_sensor_open&&o.a.createElement(it,{opened:this.state.dialog_add_sensor_open,onClose:this.onHideAddSensorDialog,onSensorAdded:this.props.onHideAddSensorDialog,user_data:this.state.user_data,sync_key:this.state.sync_key,logged_in:this.state.logged_in}),void 0!==this.state.selected_id&&this.state.dialog_add_favourite_open&&o.a.createElement(dt,{opened:this.state.dialog_add_favourite_open,onClose:this.onHideAddFavouriteDialog,sync_key:this.state.sync_key,user_data:this.state.user_data,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_data_open&&o.a.createElement(Jt,{opened:this.state.dialog_sensor_data_open,onClose:this.onHideSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,sensor:this.state.selected}),void 0!==this.state.selected&&this.state.dialog_edit_sensor_open&&o.a.createElement(Zt,{opened:this.state.dialog_edit_sensor_open,sync_key:this.state.sync_key,data:this.state.user_data,onClose:this.onHideEditSensorDialog,chip_id:this.state.selected.chip_id,name:this.state.selected.name,fav:this.state.selected.fav,color:this.state.selected.color}),void 0!==this.state.selected_id&&this.state.dialog_remove_sensor_open&&o.a.createElement(ea,{opened:this.state.dialog_remove_sensor_open,sync_key:this.state.sync_key,user_data:this.state.user_data,onClose:this.onHideRemoveSensorDialog,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_details_open&&o.a.createElement(ta,{opened:this.state.dialog_sensor_details_open,chip_id:this.state.selected.chip_id,name:this.state.selected.name,onClose:this.onHideDetailsDialog}),o.a.createElement(Qa.a,null,o.a.createElement(Za.a,{path:"/s/:id",render:function(t){return o.a.createElement(Jt,{opened:e.state.dialog_sensor_data_route_open,onClose:e.onHideSensorDataDialog,onOpenDetails:e.onShowDetailsDialog,sensor:{chip_id:t.match.params.id,name:x.unknown_sensor}})}}),o.a.createElement(Xa.a,{strict:!0,from:"/",to:"."})),o.a.createElement(Ba.a,{open:this.state.snackbar_success_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},o.a.createElement(Na.a,{message:o.a.createElement("span",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Ha.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[o.a.createElement(E.a,{key:"success",color:"inherit",onClick:this.onSnackbarClose},o.a.createElement(mt.a,{style:{fontSize:20}}))],style:{backgroundColor:tt.a[600]}})),o.a.createElement(Ba.a,{open:this.state.snackbar_error_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},o.a.createElement(Na.a,{message:o.a.createElement("span",{style:{display:"flex",alignItems:"center"}},o.a.createElement(qa.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[o.a.createElement(E.a,{key:"error",color:"inherit",onClick:this.onSnackbarClose},o.a.createElement(mt.a,{style:{fontSize:20}}))],style:{backgroundColor:Ya.a[600]}}))),o.a.createElement(m.d,{container:!0,className:t.footer},o.a.createElement(m.f,{variant:"body2",color:"inherit",style:{marginTop:7},noWrap:!0},"\xa9 M&R Games\xa0\xa0-\xa0\xa02018 - 2019"),o.a.createElement(m.b,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com",target:"_blank",className:t.button_homepage},x.our_homepage),o.a.createElement(m.b,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com/feinstaub-app/info/",target:"_blank",className:t.button_info},x.info),o.a.createElement(m.b,{variant:"outlined",color:"secondary",href:"https://play.google.com/store/apps/details?id=com.mrgames13.jimdo.feinstaubapp",target:"_blank",className:t.button_download},x.download_android_app))))}}]),t}(n.Component),en=Object(p.withStyles)(function(e){return{main:{flexGrow:1,display:"flex",position:"absolute",width:"100%",height:"calc(100% - 64px - 45px)",zIndex:1,top:64,overflow:"hidden"},footer:{position:"absolute",backgroundColor:"#32a087",height:45,paddingLeft:13,paddingRight:13,paddingTop:5,width:"100%",bottom:0,left:0,right:0},button_download:{position:"absolute",right:13},button_info:{position:"absolute",right:265},button_homepage:{position:"absolute",right:338}}},{withTheme:!0})($a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(en,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},504:function(e,t,a){e.exports=a(1087)},509:function(e,t,a){},874:function(e,t){},876:function(e,t){}},[[504,1,2]]]);
//# sourceMappingURL=main.be3e1ff6.chunk.js.map