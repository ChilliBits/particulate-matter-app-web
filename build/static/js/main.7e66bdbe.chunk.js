(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1081:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a.n(i),l=(a(508),a(17)),s=a(18),c=a(21),d=a(19),u=a(20),h=a(29),p=a(12),m=a(16),g=a(72),f=a(65),b=a.n(f),v=a(44),E=a.n(v),_=a(23),y=a.n(_),S=a(22),C=a.n(S),k=a(52),w=a(434),O=a.n(w),D=a(188),j=a.n(D),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(e,t){var n=t.newValue;a.props.onChange(e,{newValue:n})}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.suggestions;return r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(y.a,{href:"#",className:t.menuButton,color:"inherit","aria-label":"Feinstaub-Karte"},r.a.createElement(j.a,{alt:"Feinstaub-Karte",src:"../favicon.ico",className:t.avatar})),r.a.createElement(C.a,{className:t.title,variant:"h6",color:"inherit",noWrap:!0},"Feinstaub-Karte"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(O.a,null)),r.a.createElement(De,{placeholder:"Ort suchen \u2026",suggestions:a,onChange:this.handleChange("single"),classes:{root:t.inputRoot,input:t.inputInput}})))))}}]),t}(n.Component),M=Object(p.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(k.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(k.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(g.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:350}})}})(x),A=a(189),P=a.n(A),T=a(66),I=a.n(T),F=a(53),L=a.n(F),z=a(91),B=a.n(z),N=a(59),R=a.n(N),W=a(134),H=a.n(W),K=a(437),q=a.n(K),U=a(436),V=a.n(U),Y=a(435),G=a.n(Y),J=a(438),Q=a.n(J),Z=a(439),X=a.n(Z),$=a(440),ee=a.n($),te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleClick=function(){a.setState(function(e){return{open:!e.open}})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(I.a,{component:"nav",subheader:r.a.createElement(P.a,{component:"div"},this.props.title)},r.a.createElement(L.a,{button:!0},r.a.createElement(B.a,null,r.a.createElement(G.a,null)),r.a.createElement(R.a,{inset:!0,primary:"Sent mail"})),r.a.createElement(L.a,{button:!0},r.a.createElement(B.a,null,r.a.createElement(V.a,null)),r.a.createElement(R.a,{inset:!0,primary:"Drafts"})),r.a.createElement(L.a,{button:!0,onClick:this.handleClick},r.a.createElement(B.a,null,r.a.createElement(q.a,null)),r.a.createElement(R.a,{inset:!0,primary:"Inbox"}),this.state.open?r.a.createElement(Q.a,null):r.a.createElement(X.a,null)),r.a.createElement(H.a,{in:this.state.open,timeout:"auto",unmountOnExit:!0},r.a.createElement(I.a,{component:"div",disablePadding:!0},r.a.createElement(L.a,{button:!0,className:e.nested},r.a.createElement(B.a,null,r.a.createElement(ee.a,null)),r.a.createElement(R.a,{inset:!0,primary:"Starred"}))))))}}]),t}(r.a.Component),ae=(Object(p.withStyles)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit}}})(te),a(141)),ne=a(287),re=a.n(ne),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={markers:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{},selectedAddress:"",selectedMarkerLat:0,selectedMarkerLng:0},a.onMarkerClick=function(e,t,n){var r=Object(h.a)(Object(h.a)(a));re.a.setApiKey("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc"),re.a.fromLatLng(t.position.lat(),t.position.lng()).then(function(e){a.setState({selectedAddress:r.getCountry(e.results[0].address_components)+", "+r.getCity(e.results[0].address_components)})},function(e){console.error(e)}),a.setState({selectedPlace:e,activeMarker:t,selectedMarkerLat:Math.round(1e3*t.position.lat())/1e3,selectedMarkerLng:Math.round(1e3*t.position.lng())/1e3,selectedAddress:"Adresse wird geladen ...",showingInfoWindow:!0})},a.getCountry=function(e){for(var t=0;t<e.length;t++){if("country"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return"Unbekanntes Land"},a.getCity=function(e){for(var t=0;t<e.length;t++){if("locality"===e[t].types[0]||"postal_town"===e[t].types[0])return e[t].long_name;if(2===e[t].types.length&&"political"===e[t].types[0])return e[t].long_name}return"Unbekannte Stadt"},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onShowSensorDataClicked=function(){var e={chip_id:a.state.activeMarker.name,name:"Unbekannter Sensor",color:"#000000",fav:!1};a.props.onShowSensorData(e)},a.onAddFavouriteClicked=function(){a.props.onAddFavourite(a.state.activeMarker.name)},a.state.markers=e.markerData.map(function(e){return r.a.createElement(ae.Marker,{key:e.chip_id,title:e.chip_id,name:e.chip_id,onClick:a.onMarkerClick,position:{lat:e.lat,lng:e.lng}})}),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onInfoWindowOpen",value:function(e,t){var a=r.a.createElement(m.b,{variant:"outlined",color:"primary",onClick:this.onShowSensorDataClicked,style:{marginTop:5,width:210}},"Messwerte\xa0anzeigen");if(o.a.render(r.a.Children.only(a),document.getElementById("show_data")),this.props.logged_in){var n=r.a.createElement(m.b,{variant:"contained",color:"primary",onClick:this.onAddFavouriteClicked,style:{marginTop:5,width:210}},"Favorit\xa0hinzuf\xfcgen");o.a.render(r.a.Children.only(n),document.getElementById("add_favourite"))}}},{key:"render",value:function(){var e=this;return r.a.createElement(ae.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:7,initialCenter:{lat:this.props.ownPosition.lat,lng:this.props.ownPosition.lng}},this.state.markers,r.a.createElement(ae.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onOpen:function(t){e.onInfoWindowOpen(e.props,t)}},r.a.createElement(m.e,{elevation:1,style:{width:210}},r.a.createElement("div",null,r.a.createElement(m.d,{container:!0},r.a.createElement(m.d,{item:!0,xs:3},r.a.createElement(m.a,null,r.a.createElement(Ge,null))),r.a.createElement(m.d,{item:!0,xs:9},r.a.createElement(m.f,{variant:"body2",noWrap:!0},this.state.selectedPlace.name),r.a.createElement(m.f,{noWrap:!0},r.a.createElement("i",null,this.state.selectedMarkerLat,", ",this.state.selectedMarkerLng)))),r.a.createElement(m.f,null,this.state.selectedAddress),r.a.createElement("div",{id:"show_data",style:{height:50}}),this.props.logged_in&&r.a.createElement("div",{id:"add_favourite",style:{height:50}})))))}}]),t}(n.Component),oe=Object(ae.GoogleApiWrapper)({apiKey:"AIzaSyDs145s6rNrM2_yEhWs27gd4Q9RHbh4WSY",language:"de"})(ie),le=a(465),se=a(441),ce=a.n(se),de=a(442),ue=a.n(de),he=a(443),pe=a.n(he),me=a(444),ge=a.n(me),fe=a(34),be=a.n(fe),ve=a(39),Ee=a.n(ve),_e=a(40),ye=a.n(_e);function Se(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,i=e.ref,o=Object(le.a)(e,["classes","inputRef","ref"]);return r.a.createElement(be.a,Object.assign({fullWidth:!0,InputProps:{inputRef:function(e){i(e),n(e)},classes:{input:t.input},disableUnderline:!0}},o))}function Ce(e,t){var a=t.query,n=t.isHighlighted,i=pe()(e.description,a),o=ge()(e.description,i);return r.a.createElement(ye.a,{selected:n,component:"div"},r.a.createElement("div",null,o.map(function(e,t){return e.highlight?r.a.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):r.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))}function ke(e,t){var a=e.suggestions,n=ce()(t.trim()).toLowerCase(),r=n.length,i=0;return 0===r?[]:a.filter(function(e){var t=i<5&&e.description.slice(0,r).toLowerCase()===n;return t&&(i+=1),t})}function we(e){return e.description}var Oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={single:"",popper:"",suggestions:[]},a.handleSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:ke(a.props,t)})},a.handleSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.handleChange=function(e){return function(t,n){var r=n.newValue;a.props.onChange(t,{newValue:r}),a.setState(Object(g.a)({},e,r))}},a.handleEnterHit=function(e){console.log("Enter!"),"Enter"===e.key&&(e.preventDefault(),console.log("Enter!"))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t={renderInputComponent:Se,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,getSuggestionValue:we,renderSuggestion:Ce};return r.a.createElement("div",{className:e.root},r.a.createElement(ue.a,Object.assign({onKeyPress:this.handleEnterHit},t,{inputProps:{classes:e,placeholder:this.props.placeholder,value:this.state.single,onChange:this.handleChange("single")},theme:{container:e.container,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderSuggestionsContainer:function(e){return r.a.createElement(Ee.a,Object.assign({},e.containerProps,{style:{zIndex:3},square:!0}),e.children)}})))}}]),t}(r.a.Component),De=Object(p.withStyles)(function(e){return{root:{height:40,flexGrow:1},container:{position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit},input:{display:"flex"}}})(Oe),je=a(71),xe=a.n(je),Me=a(54),Ae=a.n(Me),Pe=a(136),Te=a.n(Pe),Ie=a(201),Fe=a.n(Ie),Le=a(446),ze=a.n(Le),Be=a(288),Ne=a.n(Be),Re=a(445),We=a.n(Re),He=a(139);function Ke(e){var t=e.children,a=e.dir;return r.a.createElement(m.f,{component:"div",dir:a},t)}var qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={sync_key:a.props.sync_key,favourites:a.props.favourites,own_sensors:a.props.own_sensors,clicked:void 0,anchorEl:null,page:0},a.handlePageChange=function(e,t){a.setState({page:t})},a.handleMenuClick=function(e,t){e.stopPropagation(),e.preventDefault(),a.setState({clicked:t,anchorEl:e.currentTarget})},a.handleMenuClose=function(e,t){0===e?a.setState({clicked:void 0,anchorEl:null}):1===e?(a.props.onShowSensorData(t),a.setState({clicked:void 0,anchorEl:null})):2===e?(a.props.onEditSensor(t),a.setState({clicked:void 0,anchorEl:null})):3===e?(a.props.onRemoveSensor(t.chip_id),a.setState({clicked:void 0,anchorEl:null})):4===e&&(a.props.onSensorDetails(t),a.setState({clicked:void 0,anchorEl:null}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.theme;return r.a.createElement("div",{style:{height:"100%"}},!1===this.props.logged_in&&r.a.createElement(He.Scrollbars,null,r.a.createElement("div",{className:a.container},r.a.createElement(m.a,{className:a.qr_container},r.a.createElement("div",{style:{backgroundColor:"#FFF",padding:10,borderRadius:10}},r.a.createElement(We.a,{value:this.state.sync_key,size:210,logo:"https://map.h2801469.stratoserver.net/qr_icon.png",logoWidth:70}))),r.a.createElement(m.f,{variant:"h6",style:{position:"absolute",marginTop:230,color:"#3F51B5"},gutterBottom:!0},r.a.createElement("b",null,"Mit der Android-App verkn\xfcpfen")),r.a.createElement(m.f,{variant:"subtitle1",style:{position:"absolute",marginTop:290,color:"#666",textAlign:"center"},gutterBottom:!0},"Um Ihre Sensoren und Ihre Favouriten aus der App",r.a.createElement("br",null),"hier anzuzeigen, starten Sie die Feinstaub-App."),r.a.createElement(m.f,{variant:"subtitle1",style:{position:"absolute",marginTop:360,color:"#666",textAlign:"center"},gutterBottom:!0},r.a.createElement("i",{style:{color:"#3F51B5"}},"Drei Punkte oben rechts \u2192 'Web-Version'.")),r.a.createElement(m.f,{variant:"subtitle1",style:{position:"absolute",marginTop:415,color:"#666",textAlign:"center",marginBottom:30},gutterBottom:!0},"Scannen Sie den obigen QR-Code."))),this.props.logged_in&&r.a.createElement("div",{style:{height:"calc(100% - 8px)"}},r.a.createElement(He.Scrollbars,{style:{height:"calc(100% - 64px)"}},r.a.createElement(Fe.a,{axis:"x",index:this.state.page,onChangeIndex:this.handlePageChange},r.a.createElement(Ke,{style:{overflow:"auto"},dir:i.direction},this.props.favourites.length>0&&r.a.createElement(I.a,{style:{overflow:"auto"}},this.props.favourites.map(function(t){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},r.a.createElement(m.a,{style:{backgroundColor:t.color}},r.a.createElement(Ge,null)),r.a.createElement(R.a,{primary:t.name,secondary:t.chip_id}),r.a.createElement(y.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},r.a.createElement(Ne.a,null))),void 0!==e.state.clicked&&r.a.createElement(Te.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(1,t)}},"Messdaten anzeigen"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(2,t)}},"Sensor bearbeiten"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(3,t)}},"Sensor entfernen"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(4,t)}},"Eigenschaften")))},this)),0===this.props.favourites.length&&r.a.createElement(n.Fragment,null,r.a.createElement(m.a,{alt:"Favourites",src:"/images/star_impossible.png",style:{width:250,height:250,marginLeft:60,marginTop:50,padding:15}}),r.a.createElement(m.f,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:40,color:"#666",textAlign:"center"},gutterBottom:!0},r.a.createElement("b",null,"Noch keine Favouriten vorhanden. Um Favoriten hinzuzuf\xfcgen, tippen Sie auf der Karte auf einen Sensor und w\xe4hlen Sie 'Favorit hinzuf\xfcgen'.")))),r.a.createElement(Ke,{style:{overflow:"auto"},dir:i.direction},this.props.own_sensors.length>0&&r.a.createElement(I.a,{style:{overflow:"auto"}},this.props.own_sensors.map(function(t){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{button:!0,onClick:function(){return e.props.onShowSensorData(t)}},r.a.createElement(m.a,{style:{backgroundColor:t.color}},r.a.createElement(Ge,null)),r.a.createElement(R.a,{primary:t.name,secondary:t.chip_id}),r.a.createElement(y.a,{"aria-label":"Weitere Optionen",onClick:function(a){return e.handleMenuClick(a,t.chip_id)},style:{zIndex:"3"},"aria-haspopup":"true"},r.a.createElement(Ne.a,null))),void 0!==e.state.clicked&&r.a.createElement(Te.a,{anchorEl:e.state.anchorEl,open:e.state.clicked===t.chip_id,onClose:function(){return e.handleMenuClose(0,t)}},r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(1,t)}},"Messdaten anzeigen"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(2,t)}},"Sensor bearbeiten"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(3,t)}},"Sensor entfernen"),r.a.createElement(ye.a,{onClick:function(){return e.handleMenuClose(4,t)}},"Eigenschaften")))},this)),0===this.props.own_sensors.length&&r.a.createElement(n.Fragment,null,r.a.createElement(m.a,{alt:"Own Sensors",src:"/images/sensor_large.png",style:{width:200,height:200,marginLeft:85,marginTop:75,padding:15}}),r.a.createElement(m.f,{variant:"subtitle1",style:{marginLeft:20,marginRight:20,marginTop:65,color:"#666",textAlign:"center"},gutterBottom:!0},r.a.createElement("b",null,"Falls Sie einen eigenen Feinstaubsensor von ",r.a.createElement("a",{href:"https://luftdaten.info/feinstaubsensor-bauen/",target:"blank"},"www.luftdaten.info")," haben, k\xf6nnen Sie ihn hier verkn\xfcpfen. Tippen Sie auf den '+'-Button ganz unten rechts auf der Seite.")))))),r.a.createElement(xe.a,{value:this.state.page,onChange:this.handlePageChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(Ae.a,{icon:r.a.createElement(ze.a,null),label:"Favoriten"}),r.a.createElement(Ae.a,{icon:r.a.createElement(Ge,null),label:"Meine Sensoren"}))))}}]),t}(n.Component),Ue=Object(p.withStyles)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},qr_container:{width:330,height:330,marginTop:40,backgroundColor:"#3F51B5"}}},{withTheme:!0})(qe),Ve=a(28),Ye=a.n(Ve),Ge=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Ye.a,null,r.a.createElement("path",{d:"M22,9L22,7h-2L20,5c0,-1.1 -0.9,-2 -2,-2L4,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2v-2h2v-2h-2v-2h2v-2h-2L20,9h2zM18,19L4,19L4,5h14v14zM6,13h5v4L6,17zM12,7h4v3h-4zM6,7h5v5L6,12zM12,11h4v6h-4z"}))}}]),t}(n.Component),Je=a(67),Qe=a.n(Je),Ze=a(25),Xe=a.n(Ze),$e=a(33),et=a.n($e),tt=a(58),at=a.n(tt),nt=a(47),rt=a.n(nt),it=a(190),ot=a.n(it),lt=a(109),st=a.n(lt),ct=a(110),dt=a.n(ct),ut=a(111),ht=a.n(ut),pt=a(89),mt=a.n(pt),gt=a(38),ft=a.n(gt),bt=a(108),vt=a(202),Et=a.n(vt),_t=a(447),yt=a.n(_t),St=(a(907),yt.a.initializeApp({apiKey:"AIzaSyBcaCFA3uJQ7WrjRflWoIdQFhuFmqBEmcI",authDomain:"feinstaub-app-web.firebaseapp.com",databaseURL:"https://feinstaub-app-web.firebaseio.com",projectId:"feinstaub-app-web",storageBucket:"feinstaub-app-web.appspot.com",messagingSenderId:"985064412726"})),Ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={active_step:1,chip_id:"",next_disabled:!0,loading:!1,chip_id_error:!1,error_desc:"",sensor_name:"",color:"",lat:"",lng:"",alt:"",location_picker_open:!1},a.handleNext=function(e){if(1===e){a.setState({loading:!0});var t=Object(h.a)(Object(h.a)(a));Qe.a.post("https://h2801469.stratoserver.net/ServerScript.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensordataexisting",chip_id:a.state.chip_id}).end(function(e,a){"true"===a.text.trim()?t.setState({loading:!1,active_step:2,next_disabled:!0}):t.setState({loading:!1,chip_id_error:!0,next_disabled:!0,error_desc:"Sie haben entweder die falsche Chip-ID angegeben oder in der Konfiguration Ihres Sensors ist die Option 'Senden an Feinstaub-App' nicht aktiviert. Nachdem die Option aktiviert ist, kann es bis zu 10 Minuten dauern, bis Daten auf dem Server ankommen."})})}else 3===e?a.addSensor():a.setState({active_step:a.state.active_step+1,next_disabled:!0})},a.handleBack=function(){a.setState({active_step:a.state.active_step-1})},a.chipIDChange=function(e){var t=0===e.target.value.length;a.setState({chip_id:e.target.value,chip_id_error:!1,error_desc:"",next_disabled:t})},a.nameChange=function(e){var t=0===e.target.value.length||""===a.state.color;a.setState({sensor_name:e.target.value,next_disabled:t})},a.colorChange=function(e,t){var n=0===a.state.sensor_name.length;a.setState({color:e.hex,next_disabled:n})},a.chooseLocation=function(){a.setState({location_picker_open:!0})},a.locationChange=function(e,t){console.log(t),console.log(e),a.setState({location_picker_open:!1})},a.latChanged=function(e){var t=0===e.target.value.length||0===a.state.lng.length||0===a.state.alt.length;a.setState({lat:e.target.value,next_disabled:t})},a.lngChanged=function(e){var t=0===a.state.lat.length||0===e.target.value.length||0===a.state.alt.length;a.setState({lng:e.target.value,next_disabled:t})},a.altChanged=function(e){var t=0===a.state.lat.length||0===a.state.lng.length||0===e.target.value.length;a.setState({alt:e.target.value,next_disabled:t})},a.addSensor=function(){if(a.setState({loading:!0}),a.props.logged_in){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};St.database().ref("sync/"+a.props.sync_key).set(n)}var r=Object(h.a)(Object(h.a)(a));Qe.a.post("https://h2801469.stratoserver.net/ServerScript.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"addsensor",chip_id:a.state.chip_id,lat:a.state.lat,lng:a.state.lng,alt:a.state.alt}).end(function(e,t){var a=t.text.trim();console.log(a),0===a&&(a=2),r.props.onClose(parseInt(a))})},a.addSensorPrivate=function(){a.setState({loading:!0});var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.state.chip_id,color:a.state.color,fav:!1,name:a.state.sensor_name});var n={time:e,device:"web",data:t};St.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(et.a,{open:this.props.opened,fullWidth:!0,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(rt.a,{id:"alert-dialog-title"},"Sensor hinzuf\xfcgen"),r.a.createElement(at.a,null,r.a.createElement(ot.a,{activeStep:this.state.active_step-1,orientation:"vertical"},r.a.createElement(st.a,{key:"Chip-ID angeben"},r.a.createElement(dt.a,null,"Chip-ID angeben"),r.a.createElement(ht.a,null,r.a.createElement("div",null,r.a.createElement(C.a,null,"Bitte geben Sie die Chip-ID Ihres Sensors in das Feld unten ein. Sie finden die ID in der Konfiguration Ihres Sensors. Falls Sie die Sensor-ID dennoch nicht finden sollten, finden Sie auf unserer ",r.a.createElement("a",{href:"https://mrgames13.jimdo.com/feinstaub-app/faq/#6",target:"blank"},"FAQ-Seite")," einen Eintrag."),r.a.createElement(be.a,{value:this.state.chip_id,label:"Chip-ID",type:"number",error:this.state.chip_id_error,onChange:this.chipIDChange,variant:"outlined",style:{marginTop:15}}),""!==this.state.error_desc&&r.a.createElement(C.a,{color:"error",style:{marginTop:15}},this.state.error_desc)),r.a.createElement(Xe.a,{disabled:!0,onClick:this.handleBack,style:{marginTop:15,marginRight:15}},"Zur\xfcck"),r.a.createElement("span",{style:{position:"relative",width:80}},r.a.createElement(Xe.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(1)}},"Weiter"),this.state.loading&&r.a.createElement(mt.a,{size:24,style:{marginTop:0},className:t.buttonProgress})))),r.a.createElement(st.a,{key:"Basisdaten angeben"},r.a.createElement(dt.a,null,"Basisdaten angeben"),r.a.createElement(ht.a,null,r.a.createElement("div",null,r.a.createElement(C.a,null,"Bitte vergeben Sie f\xfcr Ihren Sensor einen Anzeigenamen und bestimmen Sie eine Farbe f\xfcr den Sensor innerhalb der Diagramme."),r.a.createElement(be.a,{label:"Anzeigename",value:this.state.sensor_name,style:{width:360,marginTop:15,marginBottom:15},onChange:this.nameChange,variant:"outlined"}),r.a.createElement(bt.CirclePicker,{color:this.state.color,width:"380px",onChangeComplete:this.colorChange})),r.a.createElement(Xe.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},"Zur\xfcck"),r.a.createElement("span",{style:{position:"relative",width:80}},r.a.createElement(Xe.a,{variant:"contained",color:"primary",disabled:this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(2)}},"Weiter")))),r.a.createElement(st.a,{key:"Auf die Karte bringen"},r.a.createElement(dt.a,null,"Auf die Karte bringen"),r.a.createElement(ht.a,null,r.a.createElement("div",null,r.a.createElement(C.a,null,"Um Ihren Sensor auf die Karte zu bekommen, m\xfcssen Sie die genaue Position des Sensors und die Montageh\xf6he ",r.a.createElement("b",null,"\xfcber dem Boden")," angeben.",r.a.createElement("br",null),r.a.createElement("b",null,"HINWEIS:")," Diese Daten k\xf6nnen sp\xe4ter nur noch ge\xe4ndert werden, indem Sie per E-Mail mit uns in ",r.a.createElement("a",{href:"mailto:mrgames@outlook.de"},"Kontakt")," treten."),r.a.createElement(ft.a,{title:"Bald verf\xfcgbar"},r.a.createElement(Xe.a,{variant:"outlined",color:"primary",_onClick:this.chooseLocation,style:{margin:10,width:440}},"Position des Sensors w\xe4hlen")),r.a.createElement("span",null,r.a.createElement(be.a,{label:"L\xe4ngengrad",style:{margin:10},type:"number",onChange:this.latChanged,variant:"outlined"}),r.a.createElement(be.a,{label:"Breitengrad",style:{margin:10},type:"number",onChange:this.lngChanged,variant:"outlined"})),r.a.createElement(be.a,{label:"Montageh\xf6he (in Meter)",style:{margin:10},type:"number",onChange:this.altChanged,variant:"outlined"})),r.a.createElement(Xe.a,{onClick:this.handleBack,style:{marginTop:15,marginRight:15}},"Zur\xfcck"),this.props.logged_in&&r.a.createElement(Xe.a,{variant:"outlined",onClick:this.addSensorPrivate,style:{marginTop:15,marginRight:15}},"\xdcberspringen"),r.a.createElement("span",{style:{position:"relative",width:80}},r.a.createElement(Xe.a,{variant:"contained",color:"primary",disabled:this.state.loading||this.state.next_disabled,style:{marginTop:15},onClick:function(){return e.handleNext(3)}},"Sensor hinzuf\xfcgen"),this.state.loading&&r.a.createElement(mt.a,{size:24,style:{marginTop:0},className:t.buttonProgress}))))))),this.state.location_picker_open&&r.a.createElement(ba,{onChoose:this.locationChange}))}}]),t}(r.a.Component),kt=Object(p.withStyles)(function(e){return{buttonProgress:{position:"absolute",color:Et.a[500],top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})(Ct),wt=a(48),Ot=a.n(wt),Dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",color:void 0,button_disabled:!0},a.onAddFavourite=function(){var e=Math.floor(Date.now()),t=a.props.user_data;t.push({chip_id:a.props.chip_id,color:a.state.color,fav:!0,name:a.state.name});var n={time:e,device:"web",data:t};St.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose()},a.onNameChanged=function(e){var t=0===e.target.value.length||void 0===a.state.color;a.setState({name:e.target.value,button_disabled:t})},a.onColorChanged=function(e,t){a.setState({color:e.hex,button_disabled:0===a.state.name.length})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(et.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"dialog-title"},r.a.createElement(rt.a,{id:"dialog-title"},"Sensor zu Favoriten hinzuf\xfcgen"),r.a.createElement("div",{className:e.dialog_content},r.a.createElement("p",null,r.a.createElement(be.a,{label:"Anzeigename",style:{width:"320px"},onChange:this.onNameChanged,variant:"outlined"})),r.a.createElement("p",null,r.a.createElement(be.a,{label:"Chip-ID",disabled:!0,value:this.props.chip_id,style:{width:"320px"},variant:"outlined"})),r.a.createElement(bt.CirclePicker,{color:this.state.color,width:"340px",onChangeComplete:this.onColorChanged})),r.a.createElement(Ot.a,null,r.a.createElement(Xe.a,{onClick:this.props.onClose,color:"primary"},"Abbrechen"),r.a.createElement(Xe.a,{onClick:this.onAddFavourite,color:"primary",disabled:this.state.button_disabled,autoFocus:!0},"Favorit hinzuf\xfcgen")))}}]),t}(r.a.Component),jt=Object(p.withStyles)(function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}})(Dt),xt=a(191),Mt=a.n(xt),At=a(140),Pt=a.n(At),Tt=a(88),It=a.n(Tt),Ft=a(192),Lt=a.n(Ft),zt=a(193),Bt=a.n(zt),Nt=a(292),Rt=a(464),Wt=a(453),Ht=a.n(Wt),Kt=a(451),qt=a.n(Kt),Ut=a(290),Vt=a.n(Ut),Yt=a(454),Gt=a.n(Yt),Jt=a(448),Qt=a(450),Zt=a.n(Qt),Xt=a(203),$t=a.n(Xt),ea=0;function ta(e){var t=e.children,a=e.dir;return r.a.createElement(C.a,{component:"div",dir:a,style:{padding:24}}," ",t," ")}function aa(e){return r.a.createElement(It.a,Object.assign({direction:"up"},e))}var na=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={data:void 0,data_graph:void 0,loading:!0,picker:null,open:!1,value:0,default_date:new Date,selected_date:new Date,dialog_details_open:!1},a.loadSensorData=function(){a.setState({loading:!0});var e=Object(h.a)(Object(h.a)(a));fetch("https://h2801469.stratoserver.net/contents.php?path=esp8266-"+a.props.sensor.chip_id+"/data-"+$t()(a.state.selected_date).format("YYYY-MM-DD")+".csv").then(function(e){return e.text()}).then(function(t){var a=Zt.a.parse(t),n=[],r=[];r.push([{type:"date",label:"Uhrzeit"},"PM10","PM2,5","Temperatur","Luftfeuchtigkeit","Luftdruck"]);var i=0;a.map(function(e){if(i>0){var t=new Date,a=0,o=0,l=0,s=0,c=0;""!==e[0]&&(t=e[0]),""!==e[1]&&(a=e[1]),""!==e[2]&&(a=e[2]),""!==e[3]&&(a=e[3]),""!==e[4]&&(o=e[4]),""!==e[5]&&(o=e[5]),""!==e[6]&&(o=e[6]),""!==e[7]&&(a=e[7]),""!==e[8]&&(o=e[8]),""!==e[9]&&(l=e[9]),""!==e[10]&&(s=e[10]),""!==e[11]&&(l=e[11]),""!==e[12]&&(c=e[12]),""!==e[13]&&(l=e[13]),""!==e[14]&&(s=e[14]),""!==e[15]&&(c=e[15]),""!==e[20]&&(a=e[20]),""!==e[21]&&(o=e[21]),""!==e[22]&&(a=e[22]),""!==e[23]&&(o=e[23]),g=c/100,f=2,c=Math.round(g*Math.pow(10,f))/Math.pow(10,f),n.push(function(e,t,a,n,r,i){return{id:ea+=1,time:e,pm1:t,pm2:a,temp:n,humidity:r,pressure:i}}(t.substring(11),a,o,l,s,c)),t=new Date(t);var d=parseFloat(a),u=parseFloat(o),h=parseFloat(l),p=parseFloat(s),m=parseFloat(c);r.push([t,d,u,h,p,m])}var g,f;return i++,!0}),e.setState({data:n,data_graph:r,loading:!1})})},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.showDetails=function(){a.props.onOpenDetails(a.props.sensor)},a.handleTabChange=function(e,t){a.setState({value:t})},a.handleTabChangeIndex=function(e){a.setState({value:e})},a.openPicker=function(){a.picker.open()},a.minusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()-864e5))}),a.loadSensorData()},a.plusDay=function(){var e=a.state.selected_date;a.setState({selected_date:new Date(e.setTime(e.getTime()+864e5))}),a.loadSensorData()},a.handleDateChange=function(e){a.setState({selected_date:e}),a.loadSensorData()},a.loadSensorData(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.theme;return r.a.createElement(et.a,{fullScreen:!0,open:this.props.opened,onClose:this.props.onClose,TransitionComponent:aa},r.a.createElement(b.a,{className:a.appBar},r.a.createElement(E.a,null,r.a.createElement(ft.a,{title:"Sensordetails anzeigen"},r.a.createElement(y.a,{color:"inherit",onClick:this.showDetails,"aria-label":"Details anzeigen"},r.a.createElement(Ge,null))),r.a.createElement(C.a,{variant:"h6",color:"inherit",className:a.flex},this.props.sensor.chip_id),r.a.createElement(ft.a,{title:"Fenster schlie\xdfen"},r.a.createElement(y.a,{color:"inherit",onClick:this.props.onClose,"aria-label":"Close"},r.a.createElement(Pt.a,null))))),this.state.loading&&r.a.createElement(Mt.a,null),r.a.createElement(Lt.a,{className:a.card},r.a.createElement(Bt.a,{className:a.card_content},r.a.createElement(ft.a,{title:"Tag davor"},r.a.createElement(y.a,{"aria-label":"Tag davor",onClick:this.minusDay},r.a.createElement(qt.a,null))),r.a.createElement(Nt.b,{utils:Rt.a,locale:Ht.a},r.a.createElement(Nt.a,{value:this.state.selected_date,onChange:this.handleDateChange,className:a.date_selection,showTodayButton:!0,disableFuture:!0,cancelLabel:"Abbrechen",todayLabel:"Heute",okLabel:"OK",invalidLabel:"Ung\xfcltige Eingabe",format:"dd.MM.yyyy",ref:function(t){e.picker=t}})),r.a.createElement(ft.a,{title:"Anderes Datum w\xe4hlen"},r.a.createElement(y.a,{"aria-label":"Datum bearbeiten",onClick:this.openPicker},r.a.createElement(Gt.a,null))),this.state.selected_date>=this.state.default_date&&r.a.createElement(ft.a,{title:"Tag danach"},r.a.createElement(y.a,{"aria-label":"Tag danach",onClick:this.plusDay,disabled:!0},r.a.createElement(Vt.a,null))),this.state.selected_date<this.state.default_date&&r.a.createElement(ft.a,{title:"Tag danach"},r.a.createElement(y.a,{"aria-label":"Tag danach",onClick:this.plusDay},r.a.createElement(Vt.a,null))))),r.a.createElement(b.a,{position:"static",color:"default"},r.a.createElement(xe.a,{value:this.state.value,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},r.a.createElement(Ae.a,{label:"Diagramm"}),r.a.createElement(Ae.a,{label:"Datens\xe4tze"}))),r.a.createElement(He.Scrollbars,null,r.a.createElement(Fe.a,{axis:"rtl"===i.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleTabChangeIndex},r.a.createElement(ta,{dir:i.direction},r.a.createElement(Jt.a,{height:"700px",width:"100%",chartType:"Line",loader:r.a.createElement(mt.a,{className:a.progress}),data:this.state.data_graph,controls:[{controlType:"ChartRangeFilter",options:{filterColumnIndex:0,ui:{chartType:"LineChart",chartOptions:{chartArea:{width:"90%",height:"50%"},hAxis:{baselineColor:"none",format:"HH:mm"}}}},controlPosition:"bottom"}],options:{hAxis:{format:"HH:mm:ss"},series:{0:{axis:"ParticulateMatter"},1:{axis:"ParticulateMatter"},2:{axis:"Temp"},3:{axis:"Humidity"},4:{axis:"Pressure"}},axes:{y:{ParticulateMatter:{label:"Feinstaub (\xb5g/m\xb3)"},Temp:{label:"Temperatur (\xb0C)"},Humidity:{label:"rel. Luftfeuchtigkeit (%)"},Pressure:{label:"Luftdruck (hPa)"}},x:{format:"HH:mm:ss"}},animation:{startup:!0,easing:"linear",duration:1500},enableInteractivity:!1,async:!0}})),r.a.createElement(ta,{dir:i.direction},this.state.data&&r.a.createElement(Ua,{data:this.state.data}),void 0===this.state.data&&r.a.createElement(n.Fragment,null,"Keine Daten vorhanden")))))}}]),t}(r.a.Component),ra=Object(p.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500},appBar:{position:"relative"},flex:{flex:1},card:{minWidth:275,margin:15},card_content:{height:120},date_selection:{marginTop:10}}},{withTheme:!0})(na),ia=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.name,color:a.props.color,error:!1},a.nameChanged=function(e){var t=0===e.target.value.length;a.setState({name:e.target.value,error:t})},a.colorChanged=function(e,t){a.setState({color:e.hex})},a.saveChangings=function(){var e=Math.floor(Date.now()),t=[];a.props.data.map(function(e){return e.chip_id===a.props.chip_id?t.push({chip_id:a.props.chip_id,color:a.state.color,fav:a.props.fav,name:a.state.name}):t.push(e),!0});var n={time:e,device:"web",data:t};St.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(et.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(rt.a,{id:"alert-dialog-title"},"Sensor bearbeiten"),r.a.createElement("div",{className:e.dialog_content},r.a.createElement("p",null,r.a.createElement(be.a,{label:"Anzeigename",value:this.state.name,style:{width:"320px"},onChange:this.nameChanged,variant:"outlined"})),r.a.createElement("p",null,r.a.createElement(be.a,{label:"Chip-ID",value:this.props.chip_id,style:{width:"320px"},variant:"outlined",disabled:!0})),r.a.createElement(bt.CirclePicker,{colors:[this.props.color,"#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],color:this.state.color,width:"340px",onChangeComplete:this.colorChanged})),r.a.createElement(Ot.a,null,r.a.createElement(Xe.a,{onClick:this.props.onClose,color:"primary"},"Abbrechen"),r.a.createElement(Xe.a,{onClick:this.saveChangings,color:"primary",disabled:this.state.error,autoFocus:!0},"Speichern")))}}]),t}(r.a.Component),oa=Object(p.withStyles)(function(e){return{dialog_content:{marginTop:"-25px",marginLeft:"20px",marginRight:"20px"}}})(ia),la=a(195),sa=a.n(la),ca=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onRemove=function(){var e=Math.floor(Date.now()),t=[];a.props.user_data.map(function(e){return e.chip_id!==a.props.chip_id&&t.push(e),!0});var n={time:e,device:"web",data:t};St.database().ref("sync/"+a.props.sync_key).set(n),a.props.onClose(1)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(et.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(rt.a,{id:"alert-dialog-title"},"Sensor entfernen"),r.a.createElement(at.a,null,r.a.createElement(sa.a,{id:"alert-dialog-description"},"Wollen Sie den Sensor mit der Chip-ID ",r.a.createElement("b",null,this.props.chip_id)," wirklich entfernen? Sie k\xf6nnen ihn jederzeit wieder verkn\xfcpfen.")),r.a.createElement(Ot.a,null,r.a.createElement(Xe.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},"Abbrechen"),r.a.createElement(Xe.a,{onClick:this.onRemove,color:"primary"},"Entfernen")))}}]),t}(r.a.Component),da=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={public:!1,creation_date:"Laden...",lat:"Laden...",lng:"Laden...",alt:"Laden..."},a.loadSensorDetails=function(){var e=Object(h.a)(Object(h.a)(a));Qe.a.post("https://h2801469.stratoserver.net/ServerScript.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"issensorexisting",chip_id:a.props.chip_id}).end(function(t,a){"1"===a.text.trim()?Qe.a.post("https://h2801469.stratoserver.net/ServerScript.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getsensorinfo",chip_id:e.props.chip_id}).end(function(t,a){var n=a.text.trim(),r=JSON.parse(n)[0],i=r.alt+"m";e.setState({creation_date:$t.a.unix(r.creation_date).format("DD.MM.YYYY"),public:!0,lat:r.lat,lng:r.lng,alt:i})}):e.setState({creation_date:"-",public:!1,lat:"-",lng:"-",alt:"-"})})},a.loadSensorDetails(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(et.a,{open:this.props.opened,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(rt.a,{id:"alert-dialog-title"},"Sensor Details"),r.a.createElement(at.a,null,r.a.createElement("table",{width:"350"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Anzeigename:")),r.a.createElement("td",{align:"right"},this.props.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Chip-ID:")),r.a.createElement("td",{align:"right"},this.props.chip_id)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"\xd6ffentlich:")),r.a.createElement("td",{align:"right"},this.state.public?"Ja":"Nein")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Online seit:")),r.a.createElement("td",{align:"right"},this.state.creation_date)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"L\xe4ngengrad:")),r.a.createElement("td",{align:"right"},this.state.lat)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Breitengrad:")),r.a.createElement("td",{align:"right"},this.state.lng)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Montageh\xf6he:")),r.a.createElement("td",{align:"right"},this.state.alt))))),r.a.createElement(Ot.a,null,r.a.createElement(Xe.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},"OK")))}}]),t}(r.a.Component),ua=a(457),ha=a.n(ua),pa=a(455),ma=a.n(pa);function ga(e){return r.a.createElement(It.a,Object.assign({direction:"up"},e))}var fa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={adress:"",position:{lat:0,lng:0}},a.onClose=function(){a.props.onChoose(a.state.position,a.state.address)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleLocationChange",value:function(e){var t=e.position,a=e.address;this.setState({position:t,address:a})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(et.a,{fullScreen:!0,open:!0,onClose:this.onClose,TransitionComponent:ga},r.a.createElement(b.a,{className:e.appBar},r.a.createElement(E.a,null,r.a.createElement(C.a,{variant:"h6",color:"inherit",className:e.flex}," W\xe4hlen Sie den genauen Standort des Sensors auf der Karte "),r.a.createElement(y.a,{color:"inherit",onClick:this.onClose,"aria-label":"Fertig"},r.a.createElement(ha.a,null)))),r.a.createElement(ma.a,{containerElement:r.a.createElement("div",{style:{height:"100%",overflowY:"hidden"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),radius:-1,defaultPosition:this.state.position,onChange:this.handleLocationChange}))}}]),t}(r.a.Component),ba=Object(p.withStyles)({appBar:{position:"relative"},flex:{flex:1}})(fa),va=a(6),Ea=a.n(va),_a=a(198),ya=a.n(_a),Sa=a(199),Ca=a.n(Sa),ka=a(41),wa=a.n(ka),Oa=a(196),Da=a.n(Oa),ja=a(200),xa=a.n(ja),Ma=a(112),Aa=a.n(Ma),Pa=a(197),Ta=a.n(Pa),Ia=a(137),Fa=a.n(Ia),La=a(458),za=a.n(La),Ba=a(459),Na=a.n(Ba);function Ra(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Wa=[{id:"time",numeric:!1,disablePadding:!0,label:"Uhrzeit"},{id:"pm10",numeric:!0,disablePadding:!1,label:"PM10 (\xb5g/m\xb3)"},{id:"pm2.5",numeric:!0,disablePadding:!1,label:"PM2,5 (\xb5g/m\xb3)"},{id:"temp",numeric:!0,disablePadding:!1,label:"Temperatur (\xb0C)"},{id:"humidity",numeric:!0,disablePadding:!1,label:"Luftfeuchtigkeit (%)"},{id:"pressure",numeric:!0,disablePadding:!1,label:"Luftdruck (hPa)"}],Ha=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,o=t.numSelected,l=t.rowCount;return r.a.createElement(Da.a,null,r.a.createElement(Aa.a,null,r.a.createElement(wa.a,{padding:"checkbox"},r.a.createElement(Fa.a,{indeterminate:o>0&&o<l,checked:o===l,onChange:a})),Wa.map(function(t){return r.a.createElement(wa.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},r.a.createElement(ft.a,{title:"Sortieren",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(Ta.a,{active:i===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(r.a.Component),Ka=function(e){var t=e.numSelected,a=e.classes;return r.a.createElement(E.a,{className:Ea()(a.root,Object(g.a)({},a.highlight,t>0))},r.a.createElement("div",{className:a.title},t>0?r.a.createElement(C.a,{color:"inherit",variant:"subtitle1"},t," Datens\xe4tze ausgew\xe4hlt"):r.a.createElement(C.a,{variant:"h6",id:"tableTitle"},"Datens\xe4tze der Messdaten")),r.a.createElement("div",{className:a.spacer}),r.a.createElement("div",{className:a.actions},t>0?r.a.createElement(ft.a,{title:"L\xf6schen"},r.a.createElement(y.a,{"aria-label":"L\xf6schen"},r.a.createElement(za.a,null))):r.a.createElement(ft.a,{title:"Bald verf\xfcgbar"},r.a.createElement(y.a,{"aria-label":"Bald verf\xfcgbar"},r.a.createElement(Na.a,null)))))};Ka=Object(p.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(k.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Ka);var qa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:a.props.data,page:0,rowsPerPage:25},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),i=[];-1===r?i=i.concat(n,t):0===r?i=i.concat(n.slice(1)):r===n.length-1?i=i.concat(n.slice(0,-1)):r>0&&(i=i.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,i=a.order,o=a.orderBy,l=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ee.a,{className:t.root},r.a.createElement(Ka,{numSelected:l.length}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ya.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Ha,{numSelected:l.length,order:i,orderBy:o,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:n.length}),r.a.createElement(Ca.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,a){return Ra(e,a,t)}:function(e,a){return-Ra(e,a,t)}}(i,o)).slice(c*s,c*s+s).map(function(t){var a=e.isSelected(t.id);return r.a.createElement(Aa.a,{hover:!0,onClick:function(a){return e.handleClick(a,t.id)},role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a},r.a.createElement(wa.a,{padding:"checkbox"},r.a.createElement(Fa.a,{checked:a})),r.a.createElement(wa.a,{component:"th",scope:"row",padding:"none"},r.a.createElement("b",null,t.time)),r.a.createElement(wa.a,{align:"right"},t.pm1),r.a.createElement(wa.a,{align:"right"},t.pm2),r.a.createElement(wa.a,{align:"right"},t.temp),r.a.createElement(wa.a,{align:"right"},t.humidity),r.a.createElement(wa.a,{align:"right"},t.pressure))}),d>0&&r.a.createElement(Aa.a,{style:{height:49*d}},r.a.createElement(wa.a,{colSpan:6}))))),r.a.createElement(xa.a,{rowsPerPageOptions:[25,50,100],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"Vorherige Seite"},nextIconButtonProps:{"aria-label":"N\xe4chste Seite"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(r.a.Component),Ua=Object(p.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(qa),Va=a(461),Ya=a.n(Va),Ga=a(138),Ja=a.n(Ga),Qa=a(107),Za=a.n(Qa),Xa=a(462),$a=a.n(Xa),en=a(463),tn=a.n(en),an=a(286),nn=a.n(an),rn=a(460),on=a.n(rn),ln=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={sync_key:"",user_data:[],favourites:[],own_sensors:[],first_sync_complete:!1,logged_in:!1,markerData:void 0,currentPosition:{lat:52.520008,lng:13.404954},selected:void 0,selected_id:void 0,suggestions:[],dialog_add_sensor_open:!1,dialog_add_favourite_open:!1,dialog_sensor_data_open:!1,dialog_sensor_details_open:!1,dialog_edit_sensor_open:!1,dialog_remove_sensor_open:!1,snackbar_message:"Die Aktion war erfolgreich!",snackbar_success_open:!1,snackbar_error_open:!1},n.loadAllSensors=function(){var e=Object(h.a)(Object(h.a)(n));Qe.a.post("https://h2801469.stratoserver.net/ServerScript.php").set("Content-Type","application/x-www-form-urlencoded").send({command:"getall"}).end(function(t,a){var n=a.text.trim(),r=JSON.parse(n);e.setState({markerData:r})})},n.handleSearchChange=function(e){return function(e,t){var a=t.newValue,r=Object(h.a)(Object(h.a)(n));if(""!==a){var i=on()("AIzaSyDUiKmZIwgnhCcWldQSuScuzKE8vGg94dc");Qe.a.post("https://h2801469.stratoserver.net/autocomplete.php").set("Content-Type","application/x-www-form-urlencoded").send({key:i,q:a}).end(function(e,t){try{var a=t.text.trim(),n=JSON.parse(a);r.setState({suggestions:n.predictions})}catch(i){console.log("Error: Loading place predictions")}})}}},n.onShowAddSensorDialog=function(){n.setState({dialog_add_sensor_open:!0})},n.onHideAddSensorDialog=function(e){n.setState({dialog_add_sensor_open:!1}),n.onSnackbarOpen(e,"Sensor erfolgreich hinzugef\xfcgt!","Fehler! Bitte versuchen Sie es erneut.")},n.onShowAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!0,selected_id:e})},n.onHideAddFavouriteDialog=function(e){n.setState({dialog_add_favourite_open:!1}),n.onSnackbarOpen(e,"Der Sensor wurde favorisiert!","Favorisieren fehlgeschlagen! Bitte versuchen Sie es erneut.")},n.onShowSensorDataDialog=function(e){n.setState({dialog_sensor_data_open:!0,selected:e})},n.onHideSensorDataDialog=function(){n.setState({dialog_sensor_data_open:!1})},n.onShowDetailsDialog=function(e){n.setState({dialog_sensor_details_open:!0,selected:e})},n.onHideDetailsDialog=function(){n.setState({dialog_sensor_details_open:!1})},n.onShowEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!0,selected:e})},n.onHideEditSensorDialog=function(e){n.setState({dialog_edit_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,"\xc4nderungen erfolgreich gespeichert!","Die \xc4nderungen konnten nicht gespeichert werden! Bitte versuchen Sie es erneut.")},n.onShowRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!0,selected_id:e})},n.onHideRemoveSensorDialog=function(e){n.setState({dialog_remove_sensor_open:!1,selected:void 0}),n.onSnackbarOpen(e,"Sensor erfolgreich entfernt!","Entfernen fehlgeschlagen! Bitte versuchen Sie es erneut.")},n.onSnackbarOpen=function(e,t,a){1===e?n.setState({snackbar_success_open:!0,snackbar_message:t}):2===e&&n.setState({snackbar_error_open:!0,snackbar_message:a})},n.onSnackbarClose=function(e,t){"clickaway"!==t&&n.setState({snackbar_success_open:!1,snackbar_error_open:!1})},n.loadAllSensors(),navigator.geolocation.getCurrentPosition(function(e){n.setState({currentPosition:{lat:e.coords.latitude,lng:e.coords.longitude}})});var r=a(1077)({length:25});return n.state.sync_key=r,window.addEventListener("beforeunload",function(e){St.database().ref("sync/"+n.state.sync_key).remove()}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.floor(Date.now()),a={time:t,device:"web"};St.database().ref("sync/"+this.state.sync_key).set(a),St.database().ref("sync/"+this.state.sync_key).on("value",function(a){if(null!==a.val()){if(a.child("time").val()>t){var n=a.child("data").val(),r=[],i=[];null!==n?n.map(function(e){return e.fav?r.push(e):i.push(e),!0}):n=[],e.setState({logged_in:!0,user_data:n,favourites:r,own_sensors:i,snackbar_success_open:!1===e.state.first_sync_complete,snackbar_message:"Verkn\xfcpfung mit Android-App erfolgreich",first_sync_complete:!0})}}else e.setState({logged_in:!1,user_data:[],favourites:[],own_sensors:[],snackbar_error_open:!0,snackbar_message:"Verbindung zur Android-App beendet",first_sync_complete:!1})})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(M,{suggestions:this.state.suggestions,onChange:this.handleSearchChange("single")}),r.a.createElement("main",{className:e.main},r.a.createElement(m.d,{container:!0,style:{height:"100%"}},r.a.createElement(m.d,{item:!0,style:{width:400}},r.a.createElement(Ue,{logged_in:this.state.logged_in,sync_key:this.state.sync_key,favourites:this.state.favourites,own_sensors:this.state.own_sensors,onShowSensorData:this.onShowSensorDataDialog,onEditSensor:this.onShowEditSensorDialog,onRemoveSensor:this.onShowRemoveSensorDialog,onSensorDetails:this.onShowDetailsDialog})),r.a.createElement(m.d,{item:!0},null!=this.state.markerData&&r.a.createElement(oe,{google:window.google,logged_in:this.state.logged_in,ownPosition:this.state.currentPosition,markerData:this.state.markerData,onAddFavourite:this.onShowAddFavouriteDialog,onShowSensorData:this.onShowSensorDataDialog,style:{position:"absolute",top:0,bottom:0}}))),r.a.createElement(m.c,{color:"primary","aria-label":"Sensor hinzuf\xfcgen",style:{margin:0,right:20,bottom:65,position:"fixed"},onClick:this.onShowAddSensorDialog},r.a.createElement(Ya.a,null)),this.state.dialog_add_sensor_open&&r.a.createElement(kt,{opened:this.state.dialog_add_sensor_open,onClose:this.onHideAddSensorDialog,onSensorAdded:this.props.onHideAddSensorDialog,user_data:this.state.user_data,sync_key:this.state.sync_key,logged_in:this.state.logged_in}),void 0!==this.state.selected_id&&this.state.dialog_add_favourite_open&&r.a.createElement(jt,{opened:this.state.dialog_add_favourite_open,onClose:this.onHideAddFavouriteDialog,sync_key:this.state.sync_key,user_data:this.state.user_data,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_data_open&&r.a.createElement(ra,{opened:this.state.dialog_sensor_data_open,onClose:this.onHideSensorDataDialog,onOpenDetails:this.onShowDetailsDialog,sensor:this.state.selected}),void 0!==this.state.selected&&this.state.dialog_edit_sensor_open&&r.a.createElement(oa,{opened:this.state.dialog_edit_sensor_open,sync_key:this.state.sync_key,data:this.state.user_data,onClose:this.onHideEditSensorDialog,chip_id:this.state.selected.chip_id,name:this.state.selected.name,fav:this.state.selected.fav,color:this.state.selected.color}),void 0!==this.state.selected_id&&this.state.dialog_remove_sensor_open&&r.a.createElement(ca,{opened:this.state.dialog_remove_sensor_open,sync_key:this.state.sync_key,user_data:this.state.user_data,onClose:this.onHideRemoveSensorDialog,chip_id:this.state.selected_id}),void 0!==this.state.selected&&this.state.dialog_sensor_details_open&&r.a.createElement(da,{opened:this.state.dialog_sensor_details_open,chip_id:this.state.selected.chip_id,name:this.state.selected.name,onClose:this.onHideDetailsDialog}),r.a.createElement(Ja.a,{open:this.state.snackbar_success_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},r.a.createElement(Za.a,{message:r.a.createElement("span",{style:{display:"flex",alignItems:"center"}},r.a.createElement($a.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[r.a.createElement(y.a,{key:"success",color:"inherit",onClick:this.onSnackbarClose},r.a.createElement(Pt.a,{style:{fontSize:20}}))],style:{backgroundColor:Et.a[600]}})),r.a.createElement(Ja.a,{open:this.state.snackbar_error_open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:3e3,onClose:this.onSnackbarClose},r.a.createElement(Za.a,{message:r.a.createElement("span",{style:{display:"flex",alignItems:"center"}},r.a.createElement(tn.a,{style:{fontSize:20,opacity:.9,marginRight:15}}),this.state.snackbar_message),action:[r.a.createElement(y.a,{key:"error",color:"inherit",onClick:this.onSnackbarClose},r.a.createElement(Pt.a,{style:{fontSize:20}}))],style:{backgroundColor:nn.a[600]}}))),r.a.createElement(m.d,{container:!0,className:e.footer},r.a.createElement(m.f,{variant:"body2",color:"inherit",style:{marginTop:7},noWrap:!0},"\xa9 M&R Games\xa0\xa0-\xa0\xa02018 - 2019"),r.a.createElement(m.b,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com",target:"_blank",className:e.button_homepage},"Unsere Homepage"),r.a.createElement(m.b,{variant:"outlined",color:"primary",href:"https://mrgames13.jimdo.com/feinstaub-app/info/",target:"_blank",className:e.button_info},"Info"),r.a.createElement(m.b,{variant:"outlined",color:"secondary",href:"https://play.google.com/store/apps/details?id=com.mrgames13.jimdo.feinstaubapp",target:"_blank",className:e.button_download},"Android-App herunterladen")))}}]),t}(n.Component),sn=Object(p.withStyles)(function(e){return{main:{flexGrow:1,display:"flex",position:"absolute",width:"100%",height:"calc(100% - 64px - 45px)",zIndex:1,top:64,overflow:"hidden"},footer:{position:"absolute",backgroundColor:"#32a087",height:45,paddingLeft:13,paddingRight:13,paddingTop:5,width:"100%",bottom:0,left:0,right:0},button_download:{position:"absolute",right:13},button_info:{position:"absolute",right:265},button_homepage:{position:"absolute",right:338}}},{withTheme:!0})(ln);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(sn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},503:function(e,t,a){e.exports=a(1081)},508:function(e,t,a){},931:function(e,t){},933:function(e,t){}},[[503,2,1]]]);
//# sourceMappingURL=main.7e66bdbe.chunk.js.map